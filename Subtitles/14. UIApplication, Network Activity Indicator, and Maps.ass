[Script Info]
; Script generated by Aegisub 3.2.0
; http://www.aegisub.org/
Title: Default Aegisub file
ScriptType: v4.00+
WrapStyle: 0
ScaledBorderAndShadow: yes
YCbCr Matrix: None

[Aegisub Project Garbage]
Active Line: 7

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: yin,冬青黑体简体中文 W3,20,&H00FFFFFF,&HF0000000,&H00000000,&H32000000,0,0,0,0,100,100,0,0,1,1,0,2,5,5,5,134

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:04.89,0:00:07.99,yin,,0,0,0,,斯坦福大学\N{\fs12}Stanford University.
Dialogue: 0,0:00:07.99,0:00:16.00,yin,,0,0,0,,欢迎来到CS193P课程 2013-14秋季第14讲\N{\fs12}Welcome to the lecture 14 of CS193P for Fall of 2013 and 14.
Dialogue: 0,0:00:16.00,0:00:20.14,yin,,0,0,0,,今天我将讲到一些比较杂的主题\N{\fs12}Today I'm going to talk a little bit about miscellaneous topics,
Dialogue: 0,0:00:20.14,0:00:24.18,yin,,0,0,0,,UIApplication和网络活动指示器\N{\fs12}UI application and network activity indicator,
Dialogue: 0,0:00:24.18,0:00:28.70,yin,,0,0,0,,然后我打算继续上次的demo\N{\fs12}and then I'm going to follow up a little bit on the demo we did last time,
Dialogue: 0,0:00:28.70,0:00:32.38,yin,,0,0,0,,我要接着上周创建的Photomania程序\N{\fs12}then I'm going to continue that demo, and we're going to take Photo Mania
Dialogue: 0,0:00:32.38,0:00:35.20,yin,,0,0,0,,让它运行到iPad上\N{\fs12}that we built last week and we're going to make it work on the iPad,
Dialogue: 0,0:00:35.20,0:00:38.57,yin,,0,0,0,,我还要给它加个弹窗segue\N{\fs12}and we're going to add a popover segue to it,
Dialogue: 0,0:00:38.57,0:00:40.56,yin,,0,0,0,,因为几周前我讲过弹窗\N{\fs12}because I talked about popovers a couple weeks ago,
Dialogue: 0,0:00:40.56,0:00:43.23,yin,,0,0,0,,但我从来就没演示过\N{\fs12}but I never showed you how to do it, and you know, all this stuff
Dialogue: 0,0:00:43.23,0:00:46.18,yin,,0,0,0,,要知道 我不能只是讲而不演示\N{\fs12}if I just tell you about it, it's really not real probably
Dialogue: 0,0:00:46.18,0:00:49.03,yin,,0,0,0,,否则你们会一头雾水 这里我要演示弹窗\N{\fs12}for you until I show you how to do it, so we'll do a popover.
Dialogue: 0,0:00:49.04,0:00:51.31,yin,,0,0,0,,然后我们将开始讨论地图\N{\fs12}And then we're going to dive into maps,
Dialogue: 0,0:00:51.31,0:00:53.33,yin,,0,0,0,,今天的课将开始讨论地图\N{\fs12}so I'll be doing the lecture today on maps.
Dialogue: 0,0:00:53.33,0:00:55.07,yin,,0,0,0,,但愿我能讲完\N{\fs12}Hopefully, I'll get all the way through it.
Dialogue: 0,0:00:55.07,0:00:58.04,yin,,0,0,0,,然后周三 我会做一个地图的demo\N{\fs12}And then on Wednesday, I will do a demo with the maps,
Dialogue: 0,0:00:58.04,0:01:03.46,yin,,0,0,0,,周三我还将演示更多segue 特别是embed segue\N{\fs12}and also then on Wednesday, I will demo some more segues, especially the embed segue.
Dialogue: 0,0:01:03.48,0:01:05.57,yin,,0,0,0,,这就是我们的安排\N{\fs12}So that's what we're talking about today.
Dialogue: 0,0:01:05.57,0:01:08.06,yin,,0,0,0,,首先讲一些比较杂的主题\N{\fs12}So let's talk about a couple of miscellaneous topics.
Dialogue: 0,0:01:08.06,0:01:11.36,yin,,0,0,0,,第一个是UIApplication\N{\fs12}So UI application is my first one.
Dialogue: 0,0:01:11.36,0:01:12.86,yin,,0,0,0,,什么是UIApplication\N{\fs12}What is UI application?
Dialogue: 0,0:01:12.86,0:01:14.43,yin,,0,0,0,,听起来很重要\N{\fs12}It sounds important.
Dialogue: 0,0:01:14.43,0:01:18.37,yin,,0,0,0,,其实并没有那么重要\N{\fs12}It's not really that important, we dive right
Dialogue: 0,0:01:18.37,0:01:21.73,yin,,0,0,0,,上周我们使用了应用委托\N{\fs12}into using the application delegate last week, where we did things like application,
Dialogue: 0,0:01:21.73,0:01:24.04,yin,,0,0,0,,包括didFinishLaunchingWithOptions\N{\fs12}did finish launching with options and,
Dialogue: 0,0:01:24.05,0:01:27.02,yin,,0,0,0,,处理后台进入的URL\N{\fs12}you know, handling background URLs coming in,
Dialogue: 0,0:01:27.02,0:01:29.20,yin,,0,0,0,,后台取回 等等\N{\fs12}and background fetching and all that.
Dialogue: 0,0:01:29.20,0:01:30.84,yin,,0,0,0,,这些都是应用委托\N{\fs12}That was all in the applications delegate.
Dialogue: 0,0:01:30.84,0:01:34.75,yin,,0,0,0,,应用委托实际上是由另一个对象上的属性所设置\N{\fs12}So the applications delegate is actually set by a property on another
Dialogue: 0,0:01:34.77,0:01:37.05,yin,,0,0,0,,这就是UIApplication\N{\fs12}object called UI application.
Dialogue: 0,0:01:37.05,0:01:38.77,yin,,0,0,0,,UIApplication这个类\N{\fs12}So UI application, this class,
Dialogue: 0,0:01:38.77,0:01:41.40,yin,,0,0,0,,在整个应用中只有一个实例\N{\fs12}it only has one instance in your entire application.
Dialogue: 0,0:01:41.40,0:01:44.97,yin,,0,0,0,,通过这个调用 UIApplication sharedApplication\N{\fs12}You get it by calling this UI application shared application,
Dialogue: 0,0:01:44.97,0:01:48.11,yin,,0,0,0,,这个里面没有太多有趣的东西\N{\fs12}and there's really not a lot of really interesting stuff
Dialogue: 0,0:01:48.11,0:01:51.74,yin,,0,0,0,,你可以自己去看说明文档\N{\fs12}in this thing, you can go check out the documentation,
Dialogue: 0,0:01:51.74,0:01:54.84,yin,,0,0,0,,实际的东西都在应用委托中\N{\fs12}but all the real stuff is in applications delegate.
Dialogue: 0,0:01:54.84,0:01:57.56,yin,,0,0,0,,应用上有一个属性 叫委托\N{\fs12}Alright? So it has a property on your application called delegate,
Dialogue: 0,0:01:57.56,0:01:59.31,yin,,0,0,0,,它会自动为你设置\N{\fs12}that gets automatically set for you,
Dialogue: 0,0:01:59.31,0:02:03.92,yin,,0,0,0,,然后是你的应用委托对象 上周三我们详细看过\N{\fs12}and then your application delegate object, which we did a lot in last Wednesday,
Dialogue: 0,0:02:03.92,0:02:05.74,yin,,0,0,0,,所有动作都在这里\N{\fs12}that's where all the action is.
Dialogue: 0,0:02:05.74,0:02:08.93,yin,,0,0,0,,你可以自己去看UIApplication\N{\fs12}So you can check out UI application if you want.
Dialogue: 0,0:02:08.93,0:02:13.18,yin,,0,0,0,,不过我想指出UIApplication上的一个特定属性\N{\fs12}I did want to point out one particular property on UI application, however,
Dialogue: 0,0:02:13.18,0:02:16.12,yin,,0,0,0,,也就是networkActivityIndicatorVisible属性\N{\fs12}which is the network activity indicator visible property.
Dialogue: 0,0:02:16.12,0:02:17.45,yin,,0,0,0,,这是一个布尔型属性\N{\fs12}This is a Boolean property.
Dialogue: 0,0:02:17.45,0:02:21.72,yin,,0,0,0,,如果设为YES 那么状态栏上的那个小转轮就会转\N{\fs12}If you set it to yes, then the little spinner that shows
Dialogue: 0,0:02:21.72,0:02:23.57,yin,,0,0,0,,见过吗\N{\fs12}up on the status bar, have you ever seen that?
Dialogue: 0,0:02:23.57,0:02:27.04,yin,,0,0,0,,进行网络活动时 有个小转轮在转\N{\fs12}When you're doing network stuff, there's a little spinner that's spinning,
Dialogue: 0,0:02:27.05,0:02:30.98,yin,,0,0,0,,应用是活动应用时 这个会开启\N{\fs12}that turns that on when your application is the active application.
Dialogue: 0,0:02:30.98,0:02:37.26,yin,,0,0,0,,这个是布尔型的 YES或NO 转轮对应开或关\N{\fs12}And this thing, you know, it's Boolean, yes or no, that spinner is either on or it's off,
Dialogue: 0,0:02:37.26,0:02:40.41,yin,,0,0,0,,它的开关完全取决于你\N{\fs12}it's totally your responsibility to turn this thing on and off.
Dialogue: 0,0:02:40.41,0:02:43.35,yin,,0,0,0,,这有点难于处理 因为\N{\fs12}It's a little bit difficult to deal with because
Dialogue: 0,0:02:43.35,0:02:46.36,yin,,0,0,0,,一 它是全局的 它在UIApplication中\N{\fs12}A, it's global, it's in UI application,
Dialogue: 0,0:02:46.36,0:02:51.02,yin,,0,0,0,,你的应用中的所有线程都在使用这个转轮\N{\fs12}so all the threads in your application are all using this same spinner,
Dialogue: 0,0:02:51.02,0:02:56.45,yin,,0,0,0,,二是 它是一个布尔型 而不是压入弹出 或是计数\N{\fs12}and number two, it's a Boolean, it's not like a push and pop or a count,
Dialogue: 0,0:02:56.46,0:03:01.68,yin,,0,0,0,,假设你开始了一个很大的Flickr取回 需要10秒\N{\fs12}and so imagine that you fire off a big Flickr fetch that's going to take ten seconds.
Dialogue: 0,0:03:01.68,0:03:02.69,yin,,0,0,0,,你开始app\N{\fs12}And you start the app,
Dialogue: 0,0:03:02.69,0:03:05.44,yin,,0,0,0,,这个网络活动指示器 打开为YES\N{\fs12}this network activity indicator, turn it to yes.
Dialogue: 0,0:03:05.44,0:03:08.44,yin,,0,0,0,,然后在另一个线程中 你发起了一个小的Flickr取回\N{\fs12}Then, in another thread, you fire off a little Flickr fetch,
Dialogue: 0,0:03:08.44,0:03:10.52,yin,,0,0,0,,只需要1秒钟\N{\fs12}it's only going to take one second.
Dialogue: 0,0:03:10.52,0:03:14.14,yin,,0,0,0,,它发起了 打开了这个 1秒钟过去\N{\fs12}So it fires off, it turns this on, one second goes on,
Dialogue: 0,0:03:14.14,0:03:16.10,yin,,0,0,0,,它完成了 然后关掉\N{\fs12}it finishes, it turns it back off.
Dialogue: 0,0:03:16.10,0:03:19.22,yin,,0,0,0,,现在它关掉了 但10秒那个还在运行\N{\fs12}Now it's off, but the ten second one is still running.
Dialogue: 0,0:03:19.22,0:03:20.93,yin,,0,0,0,,这就糟糕了\N{\fs12}So that's bad.
Dialogue: 0,0:03:20.93,0:03:26.24,yin,,0,0,0,,很不幸 你需要在app中添加一些机制\N{\fs12}So it's totally up to you, unfortunately, to put mechanism in your app for dealing
Dialogue: 0,0:03:26.24,0:03:30.20,yin,,0,0,0,,来处理这里API的过分简单化\N{\fs12}with that unfortunate simplicity of API.
Dialogue: 0,0:03:30.20,0:03:32.66,yin,,0,0,0,,我不确定 不过我猜\N{\fs12}I'm sure, I mean, I don't know, but I'm guessing
Dialogue: 0,0:03:32.66,0:03:35.93,yin,,0,0,0,,苹果试过在这上面加一些复杂的API\N{\fs12}that Apple tried to put more complicated API on top of this,
Dialogue: 0,0:03:35.93,0:03:39.26,yin,,0,0,0,,但这并不适用于人们在不同线程\N{\fs12}and it just didn't work for all different kinds of ways people,
Dialogue: 0,0:03:39.26,0:03:41.46,yin,,0,0,0,,进行各种网络活动的不同需要\N{\fs12}you know, are doing network activity in different threads,
Dialogue: 0,0:03:41.46,0:03:44.76,yin,,0,0,0,,最后他们只能说 这个还是留给你们自己吧\N{\fs12}so they just kind of said, okay we'll give you this and we'll leave it to you.
Dialogue: 0,0:03:44.76,0:03:46.62,yin,,0,0,0,,不过 你应该开启这个\N{\fs12}But you should turn this on.
Dialogue: 0,0:03:46.62,0:03:49.45,yin,,0,0,0,,我不确定苹果会不会因为某个程序没有开启这个\N{\fs12}I'm not sure if Apple would reject an application submitted
Dialogue: 0,0:03:49.45,0:03:51.02,yin,,0,0,0,,而拒绝它在App商店中的提交\N{\fs12}to the App Store that didn't turn this on,
Dialogue: 0,0:03:51.02,0:03:52.95,yin,,0,0,0,,不过他们很有可能这么做\N{\fs12}and did do network activity, but they might.
Dialogue: 0,0:03:53.61,0:03:55.84,yin,,0,0,0,,而且这样做在他们的权利范围之内\N{\fs12}And they'd probably be within their rights to doing it.
Dialogue: 0,0:03:55.84,0:03:57.21,yin,,0,0,0,,为什么要这个呢\N{\fs12}Why do we have this thing?
Dialogue: 0,0:03:57.21,0:04:00.25,yin,,0,0,0,,因为很多用户都在使用移动电话\N{\fs12}Because a lot of users might be on cellular,
Dialogue: 0,0:04:00.25,0:04:02.87,yin,,0,0,0,,他们可能一个月只有300兆流量\N{\fs12}and they only have 300 megabytes a month or something,
Dialogue: 0,0:04:02.87,0:04:06.04,yin,,0,0,0,,他们希望知道应用什么时候在耗流量\N{\fs12}and they want to know when apps are using that up, right?
Dialogue: 0,0:04:06.04,0:04:08.14,yin,,0,0,0,,他们希望看到那个旋转\N{\fs12}So they want to see that little thing spinning.
Dialogue: 0,0:04:08.14,0:04:10.09,yin,,0,0,0,,因此 开启这个非常重要\N{\fs12}So that's why it's important to turn this thing on.
Dialogue: 0,0:04:10.09,0:04:14.42,yin,,0,0,0,,这是网络活动的转轮 而不是请等待的转轮\N{\fs12}Only when you're doing network activity, this is not a spinner for please wait, okay.
Dialogue: 0,0:04:14.42,0:04:16.74,yin,,0,0,0,,首先 app不应该总让用户等\N{\fs12}Your app first of all should never be doing please wait,
Dialogue: 0,0:04:16.74,0:04:18.84,yin,,0,0,0,,因为一切都可以不在主线程上进行\N{\fs12}because as we know, we do everything off the main thread,
Dialogue: 0,0:04:18.84,0:04:21.78,yin,,0,0,0,,不过这里是告诉用户 网络活动正在发生\N{\fs12}but this is just to tell them network activity is happening,
Dialogue: 0,0:04:21.78,0:04:23.53,yin,,0,0,0,,哪怕是在app的后台\N{\fs12}even in the background in my app.
Dialogue: 0,0:04:23.53,0:04:24.26,yin,,0,0,0,,有问题\N{\fs12}Question back there?
Dialogue: 0,0:04:30.46,0:04:33.40,yin,,0,0,0,,问题是iOS难道不能知道\N{\fs12}Yeah, so the question is can't iOS know
Dialogue: 0,0:04:33.40,0:04:36.81,yin,,0,0,0,,我的app在进行网络活动 然后为我开启吗\N{\fs12}that I'm doing network activity in my app and turn it on for me?
Dialogue: 0,0:04:36.81,0:04:39.85,yin,,0,0,0,,答案它大多数时候都能知道\N{\fs12}And the answer is, I'll be it could figure it out most of the time,
Dialogue: 0,0:04:39.85,0:04:41.53,yin,,0,0,0,,但并非100%的时候\N{\fs12}but not 100 percent of the time,
Dialogue: 0,0:04:41.53,0:04:43.03,yin,,0,0,0,,因为你在网络活动时\N{\fs12}because when you do a network activity,
Dialogue: 0,0:04:43.03,0:04:46.23,yin,,0,0,0,,你会发起什么东西 或许是URLSession\N{\fs12}you fire something off, maybe you're doing that URL session,
Dialogue: 0,0:04:46.23,0:04:49.09,yin,,0,0,0,,等等 如果是URLSession\N{\fs12}things like that, I think if you do the URL session
Dialogue: 0,0:04:49.09,0:04:52.85,yin,,0,0,0,,这个发生时 iOS应该会开启它\N{\fs12}where it's actually happening I bet they do turn it on, or they might.
Dialogue: 0,0:04:52.85,0:04:54.13,yin,,0,0,0,,具体我不知道\N{\fs12}I really don't know what they do,
Dialogue: 0,0:04:54.13,0:04:57.03,yin,,0,0,0,,不过可以肯定的是 这不是100%可靠的\N{\fs12}but then the bottom line is they can't reliably 100 percent do
Dialogue: 0,0:04:57.03,0:04:59.17,yin,,0,0,0,,因此他们要求你来做\N{\fs12}it, so they're asking you, you can do it here.
Dialogue: 0,0:04:59.70,0:05:02.31,yin,,0,0,0,,据我所知 情况就是这样的\N{\fs12}This is the best to my knowledge, that's the answer.
Dialogue: 0,0:05:03.04,0:05:04.91,yin,,0,0,0,,以上只是一些离题的话\N{\fs12}Um, okay so that was just a little aside.
Dialogue: 0,0:05:04.91,0:05:08.84,yin,,0,0,0,,下面 我们将接着上周三的demo来\N{\fs12}So now, a little follow up on our demo that we did last Wednesday.
Dialogue: 0,0:05:08.84,0:05:12.04,yin,,0,0,0,,有两点我要澄清 我也确实澄清了\N{\fs12}Two things that I want to clarify and that I did clarify
Dialogue: 0,0:05:12.04,0:05:15.30,yin,,0,0,0,,下载了已发布代码 读了评论的人知道\N{\fs12}if you downloaded the posted code and read the comments,
Dialogue: 0,0:05:15.30,0:05:17.55,yin,,0,0,0,,一点是 有时我在demo中途\N{\fs12}one is, as I was going through my demo,
Dialogue: 0,0:05:17.55,0:05:20.99,yin,,0,0,0,,忘记了一些东西 例如我忘了这一段代码\N{\fs12}sometimes I forget things, and I did forget this one line of code,
Dialogue: 0,0:05:20.99,0:05:24.63,yin,,0,0,0,,也就是如果你想让这些后台取回发生\N{\fs12}which is you have to send a message if you want to get these background
Dialogue: 0,0:05:24.65,0:05:28.41,yin,,0,0,0,,你就需要发送一条消息给你的共享应用\N{\fs12}fetches to happen, to your shared application,
Dialogue: 0,0:05:28.41,0:05:31.96,yin,,0,0,0,,消息叫作setMinimumBackgroundFetchInterval\N{\fs12}you shared your application called set minimum background fetch interval.
Dialogue: 0,0:05:31.96,0:05:34.39,yin,,0,0,0,,这个区间是NSTimeInterval\N{\fs12}So that interval, and it's NS time interval,
Dialogue: 0,0:05:34.39,0:05:35.92,yin,,0,0,0,,以秒数计\N{\fs12}it's the number of seconds
Dialogue: 0,0:05:35.92,0:05:42.06,yin,,0,0,0,,是iOS给你机会进行后台取回的最小时间间隔\N{\fs12}that is the minimum between the times that iOS will send you the opportunity
Dialogue: 0,0:05:42.06,0:05:43.47,yin,,0,0,0,,是iOS给你机会进行后台取回的最小时间间隔\N{\fs12}to do a background fetch, right?
Dialogue: 0,0:05:43.47,0:05:44.86,yin,,0,0,0,,这时你在后台\N{\fs12}So you're in the background, remember,
Dialogue: 0,0:05:44.86,0:05:47.36,yin,,0,0,0,,iOS会发个消息给你说 嘿 醒醒\N{\fs12}the iOS can send you a thing, it says "Hey, wake up,
Dialogue: 0,0:05:47.36,0:05:50.96,yin,,0,0,0,,你现在可以进行后台取回 而这里是最小值\N{\fs12}you can do a background fetch if you want," and this says the minimum.
Dialogue: 0,0:05:50.96,0:05:55.28,yin,,0,0,0,,这个最小值 你甚至可以设为1秒 每秒都唤醒\N{\fs12}Now, this minimum, you can't set it to one second, it's going to wake you up every second
Dialogue: 0,0:05:55.28,0:05:58.33,yin,,0,0,0,,因为有一个UIApplicationBackgroundFetchIntervalMinimum\N{\fs12}because there's a UI application background fetch interval
Dialogue: 0,0:05:58.33,0:06:01.00,yin,,0,0,0,,这就是你可以设置的最小值\N{\fs12}minimum and that's the minimum you can set it to,
Dialogue: 0,0:06:01.00,0:06:03.38,yin,,0,0,0,,如果设置为这个\N{\fs12}and so if you want to set it to that,
Dialogue: 0,0:06:03.38,0:06:07.83,yin,,0,0,0,,系统就会尽可能多地将你唤醒\N{\fs12}then you'll get woken up as much as the system is willing to wake you up,
Dialogue: 0,0:06:07.83,0:06:09.77,yin,,0,0,0,,记住 这只是最小值\N{\fs12}remember that only the minimum.
Dialogue: 0,0:06:09.77,0:06:13.38,yin,,0,0,0,,唤醒你可能会需要更久 取决于发生了什么\N{\fs12}It could take much longer to wake you up, depending on what's happening.
Dialogue: 0,0:06:13.38,0:06:14.99,yin,,0,0,0,,关于这些后台取回有一点要讲\N{\fs12}One thing about these background fetches,
Dialogue: 0,0:06:14.99,0:06:18.62,yin,,0,0,0,,系统在何时唤醒你进行后台取回方面非常聪明\N{\fs12}the system is quite smart about when it wakes you up to do a background fetch,
Dialogue: 0,0:06:18.62,0:06:21.31,yin,,0,0,0,,它可能也会唤醒其它一些程序 进行后台取回\N{\fs12}it's probably waking up a whole bunch of other apps doing background fetches too,
Dialogue: 0,0:06:21.31,0:06:23.67,yin,,0,0,0,,一次性做所有这些事 因为\N{\fs12}and doing it all at one time because all
Dialogue: 0,0:06:23.67,0:06:27.95,yin,,0,0,0,,iOS中的所有这些多任务处理 都是为了节约电量\N{\fs12}of this multi-tasking in iOS is all about saving the battery.
Dialogue: 0,0:06:27.95,0:06:29.82,yin,,0,0,0,,为什么 也许你会问\N{\fs12}Why, you might ask?
Dialogue: 0,0:06:29.82,0:06:31.99,yin,,0,0,0,,屏幕上不能同时有四个app吗\N{\fs12}Can't I have four apps on the screen at the same time?
Dialogue: 0,0:06:31.99,0:06:33.55,yin,,0,0,0,,这会需要很多处理器\N{\fs12}Well that would be a lot of processor,
Dialogue: 0,0:06:33.55,0:06:36.30,yin,,0,0,0,,很多网络活动 很多电量消耗\N{\fs12}a lot of network activity, a lot of battery drain.
Dialogue: 0,0:06:36.30,0:06:38.52,yin,,0,0,0,,因此 当应用在后台时\N{\fs12}And so when an application is in the background
Dialogue: 0,0:06:38.52,0:06:42.45,yin,,0,0,0,,它没在运行 我们希望它消耗的电量最小\N{\fs12}and it's not running, we want minimum battery drain going on,
Dialogue: 0,0:06:42.45,0:06:43.85,yin,,0,0,0,,如果要唤醒它\N{\fs12}so if it's going to wake,
Dialogue: 0,0:06:43.85,0:06:46.83,yin,,0,0,0,,很多时候电量消耗都不是来自于你的app\N{\fs12}and a lot of the battery drain is not necessarily what your app is doing,
Dialogue: 0,0:06:46.83,0:06:50.64,yin,,0,0,0,,而只是手机或iPad醒着的状态\N{\fs12}it's just the fact that the phone or the iPad is awake, right?
Dialogue: 0,0:06:50.64,0:06:52.95,yin,,0,0,0,,它在运行 OS在运行\N{\fs12}It's up and running, it's OS is running.
Dialogue: 0,0:06:52.95,0:06:56.58,yin,,0,0,0,,不过大多数时候 手机或iPad不用时都处于睡眠状态\N{\fs12}So mostly the phone and iPad are sleeping when you're not using it.
Dialogue: 0,0:06:56.58,0:06:58.02,yin,,0,0,0,,你希望它保持这样\N{\fs12}So you want it to stay that way.
Dialogue: 0,0:06:58.02,0:06:59.85,yin,,0,0,0,,如果你要把它唤醒\N{\fs12}So if you are going to wake it up from sleep
Dialogue: 0,0:06:59.85,0:07:02.42,yin,,0,0,0,,开始消耗电量 你需要让尽量多的app\N{\fs12}and start using battery, you want to get as many apps going
Dialogue: 0,0:07:02.42,0:07:04.64,yin,,0,0,0,,同时进行后台取回这些操作\N{\fs12}with their background fetches and all at once.
Dialogue: 0,0:07:04.64,0:07:08.59,yin,,0,0,0,,而且 还有很多电量消耗很多的东西 例如无线电天线\N{\fs12}Plus, there's a lot of very battery intensive things like the radio antennas, right?
Dialogue: 0,0:07:08.59,0:07:12.01,yin,,0,0,0,,wifi 电话功能 这些会消耗电量\N{\fs12}The wi-fi and the cellular, those things use power.
Dialogue: 0,0:07:12.01,0:07:14.01,yin,,0,0,0,,因此 如果你要进行后台取回\N{\fs12}So if you're going to do a background fetch,
Dialogue: 0,0:07:14.01,0:07:17.10,yin,,0,0,0,,这有可能会用到wifi 这会消耗电量\N{\fs12}you're probably going to fire up the wi-fi, that's going to use power,
Dialogue: 0,0:07:17.11,0:07:20.42,yin,,0,0,0,,这时最好是让所有需要后台取回的人都一起取回了\N{\fs12}we'd better get everybody who wants to do a background fetch doing it all at once.
Dialogue: 0,0:07:20.42,0:07:21.86,yin,,0,0,0,,这只是一个最小值\N{\fs12}So this is just a minimum.
Dialogue: 0,0:07:21.86,0:07:24.45,yin,,0,0,0,,提到这个的原因在于\N{\fs12}Now, the reason I'm mentioning this is
Dialogue: 0,0:07:24.45,0:07:25.78,yin,,0,0,0,,默认值是\N{\fs12}because the default is
Dialogue: 0,0:07:25.78,0:07:29.53,yin,,0,0,0,,UIApplicationBackgroundFetchIntervalNever\N{\fs12}UIApplicationBackgroundFetchIntervalNever
Dialogue: 0,0:07:29.53,0:07:32.03,yin,,0,0,0,,也就是说从不进行后台取回\N{\fs12}which means you'll never get background fetch,
Dialogue: 0,0:07:32.03,0:07:33.88,yin,,0,0,0,,因此 这个肯定需要调用\N{\fs12}so you definitely need to call this.
Dialogue: 0,0:07:33.88,0:07:35.11,yin,,0,0,0,,注意 这还意味着\N{\fs12}It also, notice, means
Dialogue: 0,0:07:35.12,0:07:37.40,yin,,0,0,0,,用户至少需要运行一次你的应用\N{\fs12}you have to run your application at least once.
Dialogue: 0,0:07:37.40,0:07:39.15,yin,,0,0,0,,用户至少需要运行一次你的应用\N{\fs12}Your user has to run your application at least once,
Dialogue: 0,0:07:39.15,0:07:42.63,yin,,0,0,0,,如果你想要后台取回发生 这个需要被调用\N{\fs12}and this gets called if you want background fetching to happen.
Dialogue: 0,0:07:42.63,0:07:45.69,yin,,0,0,0,,调用了这个后 系统知道你要做这个\N{\fs12}Once you've called this, system knows you want to do that,
Dialogue: 0,0:07:45.69,0:07:50.35,yin,,0,0,0,,你到后台之后 然后是启动\N{\fs12}you know, once you go to the background, then after that, the launch,
Dialogue: 0,0:07:50.35,0:07:52.75,yin,,0,0,0,,然后它就不只是唤醒你\N{\fs12}then it will not only wake you up,
Dialogue: 0,0:07:52.75,0:07:54.97,yin,,0,0,0,,如果你退出或是崩溃\N{\fs12}but if you were to exit or crash,
Dialogue: 0,0:07:54.97,0:08:00.73,yin,,0,0,0,,只要是进入了后台取回的世界 它还会重新开启你\N{\fs12}it will fire you back up once it kind of gets you into the background fetch world.
Dialogue: 0,0:08:00.73,0:08:03.77,yin,,0,0,0,,用户不大喜欢应用在后台运行\N{\fs12}Users might find that they don't like your application running
Dialogue: 0,0:08:03.77,0:08:05.78,yin,,0,0,0,,因为这会用掉很多资源\N{\fs12}in the background because you use a lot of resources,
Dialogue: 0,0:08:05.78,0:08:09.04,yin,,0,0,0,,让你在后台取回 电量会被消耗\N{\fs12}their battery gets drained when they let you fetch
Dialogue: 0,0:08:09.04,0:08:11.90,yin,,0,0,0,,或许你是一个很糟糕的后台公民\N{\fs12}in the background, because you're a bad background citizen, maybe.
Dialogue: 0,0:08:11.90,0:08:17.68,yin,,0,0,0,,他们可以到设置里 把处于后台的你关闭掉\N{\fs12}They can actually go into settings and turn you off when it comes to background.
Dialogue: 0,0:08:17.68,0:08:21.22,yin,,0,0,0,,有一个选项会说 不要让Photomania\N{\fs12}Okay, there's actually a switch, it says "don't let Photo Mania
Dialogue: 0,0:08:21.22,0:08:24.17,yin,,0,0,0,,或Shutterbug在后台取回\N{\fs12}or Shutterbug fetch in the background." Don't do it.
Dialogue: 0,0:08:24.17,0:08:26.44,yin,,0,0,0,,把这个设置为关闭 后台取回就做不到了\N{\fs12}And if you set that off, then you won't be able to do it.
Dialogue: 0,0:08:26.44,0:08:30.05,yin,,0,0,0,,你可以通过这个属性看用户有没这样做\N{\fs12}And you can find out if the user has done that, using this property
Dialogue: 0,0:08:30.05,0:08:33.02,yin,,0,0,0,,在UIApplication中 它叫BackgroundRefreshStatus\N{\fs12}in UI application called background refresh status,
Dialogue: 0,0:08:33.02,0:08:34.67,yin,,0,0,0,,它会返回刷新状态\N{\fs12}and it will return the refresh status.
Dialogue: 0,0:08:34.67,0:08:36.06,yin,,0,0,0,,状态有三种\N{\fs12}It actually has three different states.
Dialogue: 0,0:08:36.06,0:08:38.16,yin,,0,0,0,,一个一切良好\N{\fs12}One can be you're good to go,
Dialogue: 0,0:08:38.16,0:08:42.50,yin,,0,0,0,,二是用户关了你 三是受限\N{\fs12}two can be the user turned you off, third can be restricted.
Dialogue: 0,0:08:42.50,0:08:45.13,yin,,0,0,0,,受限是什么 这在很多东西里面都有\N{\fs12}What restricted means, and you're going to see this in various things.
Dialogue: 0,0:08:45.13,0:08:46.77,yin,,0,0,0,,例如在地图里面就有\N{\fs12}You'll see this with the map stuff,
Dialogue: 0,0:08:46.77,0:08:52.10,yin,,0,0,0,,受限是说 你不能这样做 它被关了 但不是用户关的\N{\fs12}restricted means you can't do it, it's off, but your user didn't turn it off,
Dialogue: 0,0:08:52.10,0:08:54.86,yin,,0,0,0,,他们也不能把它打开\N{\fs12}and they can't turn it back on.
Dialogue: 0,0:08:54.86,0:08:57.08,yin,,0,0,0,,因为这在某方面受限了\N{\fs12}Because they're restricted in some way.
Dialogue: 0,0:08:57.08,0:08:58.32,yin,,0,0,0,,为什么会这样呢\N{\fs12}How would this happen?
Dialogue: 0,0:08:58.32,0:09:00.64,yin,,0,0,0,,例如家长控制\N{\fs12}Parental controls, for example.
Dialogue: 0,0:09:00.64,0:09:05.57,yin,,0,0,0,,在家长控制中 某个程序很有可能不被允许\N{\fs12}It's possible in parental controls to make it so this app is not allowed to run
Dialogue: 0,0:09:05.57,0:09:08.05,yin,,0,0,0,,在后台模式下运行\N{\fs12}in background mode in parental controls.
Dialogue: 0,0:09:08.05,0:09:09.35,yin,,0,0,0,,再例如企业环境\N{\fs12}Corporate environment.
Dialogue: 0,0:09:09.35,0:09:12.69,yin,,0,0,0,,一个企业有可能不允许程序运行在后台\N{\fs12}A corporation might not want to allow a certain app to run in the background
Dialogue: 0,0:09:12.70,0:09:14.44,yin,,0,0,0,,因为取回的内容或是别的什么\N{\fs12}because of what it fetches or whatever.
Dialogue: 0,0:09:14.44,0:09:17.36,yin,,0,0,0,,你需要检查所有这三种状态\N{\fs12}So you've got to check all three of those states,
Dialogue: 0,0:09:17.36,0:09:20.15,yin,,0,0,0,,如果它处在受限状态 而不只是这个\N{\fs12}and if it's in that restricted state, not just this thing,
Dialogue: 0,0:09:20.15,0:09:23.45,yin,,0,0,0,,如果它处在受限状态 你不要给用户说\N{\fs12}but anything that's in a restricted state like that, you don't want to say to the user,
Dialogue: 0,0:09:23.45,0:09:25.05,yin,,0,0,0,,我想后台取回\N{\fs12}"I want to do background fetches,
Dialogue: 0,0:09:25.05,0:09:26.29,yin,,0,0,0,,但你没有开启\N{\fs12}but you haven't turned me on,"
Dialogue: 0,0:09:26.29,0:09:28.03,yin,,0,0,0,,因为这时他们根本没能力打开\N{\fs12}because then they won't be able to go turn you on,
Dialogue: 0,0:09:28.03,0:09:30.92,yin,,0,0,0,,他们会说 什么 他们会很困惑\N{\fs12}and they'll be like, "What?" Okay, they'll be confused, so
Dialogue: 0,0:09:30.92,0:09:34.90,yin,,0,0,0,,我只是想借这个机会讲讲这三种状态\N{\fs12}I just want to make-- this is a good opportunity to talk about those three states.
Dialogue: 0,0:09:34.90,0:09:37.55,yin,,0,0,0,,一是开启 一是用户关闭\N{\fs12}Okay, it's on, it got turned off by the user,
Dialogue: 0,0:09:37.55,0:09:40.36,yin,,0,0,0,,一是受限 意思是你无法开启它\N{\fs12}and it's restricted, meaning it can't be turned on.
Dialogue: 0,0:09:40.36,0:09:41.14,yin,,0,0,0,,有问题\N{\fs12}Go ahead. Question.
Dialogue: 0,0:09:46.26,0:09:49.34,yin,,0,0,0,,问题是 如果我想在后台做点取回外的别的什么呢\N{\fs12}So the question is what if I want to do something in the background, but not a fetch?
Dialogue: 0,0:09:49.34,0:09:50.63,yin,,0,0,0,,答案是 你可以这样做\N{\fs12}And the answer is, you can do that.
Dialogue: 0,0:09:50.63,0:09:53.70,yin,,0,0,0,,这个后台取回机制并没说你只能取回\N{\fs12}This background fetch mechanism doesn't mean you can only fetch
Dialogue: 0,0:09:53.70,0:09:55.39,yin,,0,0,0,,你可以在网络上做别的事\N{\fs12}on the network, you can do other things.
Dialogue: 0,0:09:55.39,0:09:57.44,yin,,0,0,0,,不过它叫作后台取回\N{\fs12}But it's called background fetch and all that, I think,
Dialogue: 0,0:09:57.44,0:10:00.52,yin,,0,0,0,,苹果这样做是有原因的 他们可能想说\N{\fs12}for a reason by Apple, is that they're kind of implying
Dialogue: 0,0:10:00.52,0:10:02.80,yin,,0,0,0,,这就是我们希望你用这个做的事\N{\fs12}"this is kind of what we imagine you're doing with this,"
Dialogue: 0,0:10:02.80,0:10:05.75,yin,,0,0,0,,他们可能不希望你把程序唤醒\N{\fs12}so they don't really want you to wake up and then just use a lot
Dialogue: 0,0:10:05.75,0:10:08.38,yin,,0,0,0,,使用很多资源做别的事\N{\fs12}of resources somehow doing something else,
Dialogue: 0,0:10:08.38,0:10:10.29,yin,,0,0,0,,不过做别的事也是允许的\N{\fs12}but you are allowed to do something else.
Dialogue: 0,0:10:10.29,0:10:11.52,yin,,0,0,0,,没有一条规则说\N{\fs12}There's no law that says
Dialogue: 0,0:10:11.52,0:10:13.22,yin,,0,0,0,,后台取回被调用时\N{\fs12}when the background fetch is called you couldn't make some
Dialogue: 0,0:10:13.22,0:10:16.84,yin,,0,0,0,,你不能进行任何数学运算 或是别的什么\N{\fs12}mathematical calculation or something like that.
Dialogue: 0,0:10:16.84,0:10:19.78,yin,,0,0,0,,想想 有什么需要进行数学计算的\N{\fs12}As you can imagine, what really would you be calculating mathematically?
Dialogue: 0,0:10:19.78,0:10:21.35,yin,,0,0,0,,从后台被唤醒后\N{\fs12}Kind of, when you wake up in the background it's kind
Dialogue: 0,0:10:21.35,0:10:23.59,yin,,0,0,0,,你会希望检查正在发生什么\N{\fs12}of like you want to check what's going on in the world.
Dialogue: 0,0:10:23.59,0:10:25.56,yin,,0,0,0,,我们会讲到如何检查诸如\N{\fs12}And we're going to talk about checking things like
Dialogue: 0,0:10:25.56,0:10:27.03,yin,,0,0,0,,我在哪\N{\fs12}"where am I in the world?"
Dialogue: 0,0:10:27.03,0:10:28.03,yin,,0,0,0,,这是另一码事\N{\fs12}That's a different thing.
Dialogue: 0,0:10:28.03,0:10:30.95,yin,,0,0,0,,这方面有另一个机制 我会讲到这个\N{\fs12}There's another mechanism for that, and we're going to talk about that.
Dialogue: 0,0:10:30.95,0:10:31.59,yin,,0,0,0,,有问题\N{\fs12}Yeah. Question?
Dialogue: 0,0:10:37.65,0:10:43.67,yin,,0,0,0,,问题是 Facebook或是其它社交媒体app\N{\fs12}So the question is, is this what, you know, Facebook or some social media app,
Dialogue: 0,0:10:43.67,0:10:46.09,yin,,0,0,0,,在有人发你消息时\N{\fs12}that you know people are sending you messages,
Dialogue: 0,0:10:46.09,0:10:49.67,yin,,0,0,0,,是否就是用这个在说 有人给你发了消息\N{\fs12}is this what it's using to say "someone sent you a message,"
Dialogue: 0,0:10:50.61,0:10:53.77,yin,,0,0,0,,那个小通知行 答案是 不是用的这个\N{\fs12}Yeah, the little notification line, and the answer is no, this is not what it's doing.
Dialogue: 0,0:10:53.77,0:10:56.83,yin,,0,0,0,,那是另外一个机制 叫推送通知\N{\fs12}There's another mechanism for that called push notifications,
Dialogue: 0,0:10:56.83,0:10:59.25,yin,,0,0,0,,很不幸 我们可能不会讲到这个\N{\fs12}which we're probably not going to get to talk about, unfortunately.
Dialogue: 0,0:10:59.25,0:11:01.16,yin,,0,0,0,,这就是他们的做法\N{\fs12}So that's how they're doing it.
Dialogue: 0,0:11:01.16,0:11:05.25,yin,,0,0,0,,有一种方式能让app的用户\N{\fs12}There is a way to basically have a user of an app sign up
Dialogue: 0,0:11:05.25,0:11:07.80,yin,,0,0,0,,在服务器某处同意说\N{\fs12}and say, with the server somewhere, saying "hey,
Dialogue: 0,0:11:07.80,0:11:10.48,yin,,0,0,0,,我愿意接受Facebook的推送通知\N{\fs12}I'm willing to accept push notifications from Facebook,"
Dialogue: 0,0:11:10.48,0:11:14.03,yin,,0,0,0,,然后Facebook服务器就能发送通知\N{\fs12}and then the Facebook server can send notifications,
Dialogue: 0,0:11:14.03,0:11:17.51,yin,,0,0,0,,一个很小的JSON数据包 给手机说\N{\fs12}little tiny JSON packets, basically, to the phone saying
Dialogue: 0,0:11:17.51,0:11:19.50,yin,,0,0,0,,这里有条消息\N{\fs12}"Oh, here's a message" or something like that,
Dialogue: 0,0:11:19.50,0:11:23.40,yin,,0,0,0,,消息可以是这个人获得了一条消息\N{\fs12}and the message might be this guy's got a message.
Dialogue: 0,0:11:23.40,0:11:26.43,yin,,0,0,0,,你获得这些时 后台就有办法唤醒\N{\fs12}When you get those, there's a way to get woken up in the background.
Dialogue: 0,0:11:26.43,0:11:28.65,yin,,0,0,0,,这是后台唤醒的另外一种机制\N{\fs12}So it's a different mechanism for waking up in the background.
Dialogue: 0,0:11:28.65,0:11:33.43,yin,,0,0,0,,不过 如果你在Reddit或Facebook上\N{\fs12}However, if you're doing something, let's say you're in Reddit or in Facebook,
Dialogue: 0,0:11:33.43,0:11:36.40,yin,,0,0,0,,你的页面放到上面\N{\fs12}and you have your little page up,
Dialogue: 0,0:11:36.40,0:11:38.91,yin,,0,0,0,,上次你访问Facebook 你想要它更新\N{\fs12}the last time you were in Facebook and you want that to update.
Dialogue: 0,0:11:38.91,0:11:40.65,yin,,0,0,0,,没人发送消息给你\N{\fs12}No one is sending you a message, per se,
Dialogue: 0,0:11:40.65,0:11:42.78,yin,,0,0,0,,没有Facebook消息\N{\fs12}like not a Facebook messaging thing, but it's just
Dialogue: 0,0:11:42.78,0:11:45.08,yin,,0,0,0,,只是人们在发自己的东西\N{\fs12}like people are posting on their wall, you're watching
Dialogue: 0,0:11:45.08,0:11:47.79,yin,,0,0,0,,你在看发生了什么\N{\fs12}or whatever is going on, and you want that to,
Dialogue: 0,0:11:47.79,0:11:51.55,yin,,0,0,0,,你到app切换器中时 希望看到发生了什么\N{\fs12}when you go to the app switcher, you want to see kind of what's happening there.
Dialogue: 0,0:11:51.55,0:11:55.26,yin,,0,0,0,,不是实时的 不过是… 这就是这个很好用的地方\N{\fs12}Not in real time, but kind of like...you know, that's what this would be great for.
Dialogue: 0,0:11:55.26,0:11:59.42,yin,,0,0,0,,在背景中唤醒 取回页面当前内容\N{\fs12}So wake up in the background, fetch the current contents of the page,
Dialogue: 0,0:11:59.42,0:12:01.63,yin,,0,0,0,,更新 这时有人看app切换器\N{\fs12}update it, now if someone looks in app switcher,
Dialogue: 0,0:12:01.63,0:12:05.37,yin,,0,0,0,,就能很快看到 哦 这里有新东西 他们可以点开看\N{\fs12}they can quickly see "Oh, I've got new stuff there!" and they can go click and look.
Dialogue: 0,0:12:05.37,0:12:07.76,yin,,0,0,0,,明白了吗 这是不同类型的东西\N{\fs12}You see? So it's different kinds of things,
Dialogue: 0,0:12:07.76,0:12:09.93,yin,,0,0,0,,发送消息后的通知\N{\fs12}but sending a message and notification,
Dialogue: 0,0:12:09.93,0:12:12.97,yin,,0,0,0,,是推送通知 这是我们不打算讲的\N{\fs12}that's push notifications, which we're not going to talk about.
Dialogue: 0,0:12:12.97,0:12:14.97,yin,,0,0,0,,问得很好\N{\fs12}Good question though.
Dialogue: 0,0:12:14.97,0:12:18.48,yin,,0,0,0,,好 关于demo还有一点要讲明\N{\fs12}Okay one other follow up from that demo is,
Dialogue: 0,0:12:18.48,0:12:20.98,yin,,0,0,0,,我用了一个小的demo工具\N{\fs12}I kind of use a little demo ware in that,
Dialogue: 0,0:12:20.98,0:12:25.18,yin,,0,0,0,,在我们有机会进行后台取回时我用了它\N{\fs12}when we got the background fetch, when we got a chance to do a background fetch,
Dialogue: 0,0:12:25.18,0:12:27.58,yin,,0,0,0,,我把它叫作startFLickrFetch\N{\fs12}I called start FLickr fetch, okay,
Dialogue: 0,0:12:27.58,0:12:29.55,yin,,0,0,0,,为了让这里只有一行\N{\fs12}just to make it a one-liner there,
Dialogue: 0,0:12:29.55,0:12:32.41,yin,,0,0,0,,我做的是很概念性的东西 也就是\N{\fs12}that was almost a conceptual thing I was doing, just to kind
Dialogue: 0,0:12:32.41,0:12:34.98,yin,,0,0,0,,好 我们有机会取回 让我们取回吧\N{\fs12}of say "Okay, we can have a chance to do a fetch, let's do it."
Dialogue: 0,0:12:34.98,0:12:37.90,yin,,0,0,0,,但实际上 调用startFLickrFetch并不好\N{\fs12}But actually calling start FLickr fetch there would not be
Dialogue: 0,0:12:37.90,0:12:40.22,yin,,0,0,0,,甚至有可能无法工作\N{\fs12}good, and probably would not work.
Dialogue: 0,0:12:40.22,0:12:41.35,yin,,0,0,0,,为什么呢\N{\fs12}And why was that?
Dialogue: 0,0:12:41.35,0:12:43.25,yin,,0,0,0,,这是因为startFLickrFetch\N{\fs12}That's because start FLickr fetch
Dialogue: 0,0:12:43.25,0:12:46.63,yin,,0,0,0,,开始了一个后台URLSession\N{\fs12}starts a background session, URL session.
Dialogue: 0,0:12:46.63,0:12:49.20,yin,,0,0,0,,后台session是说 这是一个URLSession\N{\fs12}Background session meaning it's the kind of URL session
Dialogue: 0,0:12:49.20,0:12:54.25,yin,,0,0,0,,如果URL返回 而你没在运行 你将有机会处理它\N{\fs12}that if the URL comes back and you're not running, you get a chance to handle it.
Dialogue: 0,0:12:54.25,0:12:58.81,yin,,0,0,0,,那整个处理URL后台session 我们看过的\N{\fs12}Right? That whole handle URL background session other one we looked at.
Dialogue: 0,0:12:58.81,0:13:03.15,yin,,0,0,0,,这些后台URLSession取回都是自由裁量的\N{\fs12}Those kind of background session URL fetches are discretionary.
Dialogue: 0,0:13:03.15,0:13:05.94,yin,,0,0,0,,也就是说系统可以决定\N{\fs12}Meaning that the system can determine, can decide,
Dialogue: 0,0:13:05.94,0:13:08.57,yin,,0,0,0,,如果你在后台 我不打算进行取回\N{\fs12}if you're in the background, I'm not even going to do that fetch.
Dialogue: 0,0:13:08.57,0:13:12.01,yin,,0,0,0,,这些取回 你通常是在前台发送\N{\fs12}So those are fetches that generally you issue them in the foreground,
Dialogue: 0,0:13:12.01,0:13:14.47,yin,,0,0,0,,它们可能在后台完成\N{\fs12}they might complete in the background.
Dialogue: 0,0:13:14.47,0:13:16.83,yin,,0,0,0,,当你有机会取回时\N{\fs12}When you get a chance to fetch.
Dialogue: 0,0:13:16.83,0:13:17.92,yin,,0,0,0,,因为这个fetch东西\N{\fs12}Because of this fetch thing?
Dialogue: 0,0:13:17.92,0:13:21.16,yin,,0,0,0,,你希望就在那里进行取回 使用临时session\N{\fs12}You want to do that fetch right there, using ephemeral session
Dialogue: 0,0:13:21.16,0:13:24.06,yin,,0,0,0,,就像我们在Shutterbug很多其它地方做的那样\N{\fs12}like we did everywhere else in Shutterbug and stuff,
Dialogue: 0,0:13:24.06,0:13:25.98,yin,,0,0,0,,临时的常规session\N{\fs12}ephemeral normal session.
Dialogue: 0,0:13:25.98,0:13:27.01,yin,,0,0,0,,而不是后台session\N{\fs12}Not a background session.
Dialogue: 0,0:13:27.01,0:13:30.49,yin,,0,0,0,,这样就不是自由裁量的了 它会实际进行取回\N{\fs12}That way, it won't be discretionary and it will actually do the fetch.
Dialogue: 0,0:13:30.49,0:13:32.93,yin,,0,0,0,,通过发送这个消息给你 系统在说\N{\fs12}And since the system is saying, by sending you this message,
Dialogue: 0,0:13:32.93,0:13:34.21,yin,,0,0,0,,好 现在该你取回了\N{\fs12}"Okay it's your turn to do a fetch,
Dialogue: 0,0:13:34.21,0:13:36.06,yin,,0,0,0,,我开启了所有的广播\N{\fs12}I've fired up all the radios,
Dialogue: 0,0:13:36.06,0:13:39.00,yin,,0,0,0,,我准备好进行一些网络活动 开始做吧\N{\fs12}I'm ready to do some network activity, go ahead and do it."
Dialogue: 0,0:13:39.00,0:13:43.94,yin,,0,0,0,,我上次课后发布的代码做了正确的事\N{\fs12}So the code that I posted after lecture last time is doing the right thing,
Dialogue: 0,0:13:43.94,0:13:46.31,yin,,0,0,0,,它进行了实际取回 你可以去看看\N{\fs12}it's doing actual fetch, so you can go take a look
Dialogue: 0,0:13:46.31,0:13:50.22,yin,,0,0,0,,iOS发送的后台取回消息\N{\fs12}at the background fetch message that gets sent by iOS
Dialogue: 0,0:13:50.22,0:13:52.20,yin,,0,0,0,,你会看到我做的是实际的临时取回\N{\fs12}and you'll see that I'm doing an actual ephemeral fetch,
Dialogue: 0,0:13:52.20,0:13:53.49,yin,,0,0,0,,我没调用startFLickrFetch\N{\fs12}I'm not calling start FLickr fetch.
Dialogue: 0,0:13:53.49,0:13:56.26,yin,,0,0,0,,我只是想说清楚 为什么代码发生了变化\N{\fs12}I just want to make it clear why that code was different there.
Dialogue: 0,0:13:56.26,0:13:56.94,yin,,0,0,0,,有问题\N{\fs12}Question?
Dialogue: 0,0:14:08.37,0:14:10.05,yin,,0,0,0,,问得很好\N{\fs12}Great. Great question.
Dialogue: 0,0:14:10.05,0:14:13.84,yin,,0,0,0,,问题是 有些事情在发生\N{\fs12}Okay, so the question is something's happening and I'm
Dialogue: 0,0:14:13.84,0:14:16.05,yin,,0,0,0,,我在后台 我的UI需要更新\N{\fs12}in the background, and my UI needs to get updated.
Dialogue: 0,0:14:16.05,0:14:19.22,yin,,0,0,0,,例如 URL返回 或是我得到机会进行后台取回\N{\fs12}Like, a URL comes back or I get offered to do a background fetch,
Dialogue: 0,0:14:19.22,0:14:20.34,yin,,0,0,0,,我在做所有的事\N{\fs12}I'm doing all these things,
Dialogue: 0,0:14:20.34,0:14:22.37,yin,,0,0,0,,这里难道不会有问题吗\N{\fs12}and isn't there a problem there
Dialogue: 0,0:14:22.37,0:14:25.03,yin,,0,0,0,,毕竟我需要在主队列处理所有UI\N{\fs12}because I need to do all my UI in the main queue?
Dialogue: 0,0:14:25.03,0:14:26.73,yin,,0,0,0,,这是一个很好的问题\N{\fs12}That's the question, and that's a great question.
Dialogue: 0,0:14:26.73,0:14:29.96,yin,,0,0,0,,答案是 当你在后台运行时\N{\fs12}But the answer is, when you're running in the background,
Dialogue: 0,0:14:29.96,0:14:31.57,yin,,0,0,0,,你并不在别的队列上\N{\fs12}you're not on a different queue.
Dialogue: 0,0:14:31.57,0:14:36.71,yin,,0,0,0,,后台意味着 你不是用户正在看的app\N{\fs12}That background just means that you are not the app that the people are looking at.
Dialogue: 0,0:14:36.71,0:14:39.90,yin,,0,0,0,,不过其它方面 它和在前台运行无异\N{\fs12}But every otherwise, it's just like you're running in the foreground.
Dialogue: 0,0:14:39.90,0:14:41.61,yin,,0,0,0,,你可以绘制 你可以做任何事\N{\fs12}You can draw, you can do everything.
Dialogue: 0,0:14:41.61,0:14:43.52,yin,,0,0,0,,你的主队列在运行\N{\fs12}Your main queue is running.
Dialogue: 0,0:14:43.52,0:14:45.60,yin,,0,0,0,,当你有这样运行的机会时\N{\fs12}When you get the opportunity to run like this,
Dialogue: 0,0:14:45.60,0:14:48.39,yin,,0,0,0,,运行的是你的主队列 你可以进行图像处理\N{\fs12}it's your main queue that's running, so you can do graphics,
Dialogue: 0,0:14:48.41,0:14:50.61,yin,,0,0,0,,你可以绘图 做什么都行\N{\fs12}you can do drawing, anything you want, right?
Dialogue: 0,0:14:50.61,0:14:52.33,yin,,0,0,0,,前台和后台之间的差别\N{\fs12}So the difference between foreground
Dialogue: 0,0:14:52.33,0:14:55.07,yin,,0,0,0,,并不是主队列和非主队列之间的差别\N{\fs12}and background is not main queue/some other queue,
Dialogue: 0,0:14:55.07,0:14:57.97,yin,,0,0,0,,而是app活动与非活动之间的差别\N{\fs12}it's am I the active app? Am I not the active app?
Dialogue: 0,0:14:57.97,0:14:59.69,yin,,0,0,0,,这就是前台和后台之间的差别\N{\fs12}That's the difference between foreground and background.
Dialogue: 0,0:14:59.69,0:15:02.54,yin,,0,0,0,,通常在后台时 你不会运行\N{\fs12}Normally, when you're in the background, you don't get to run.
Dialogue: 0,0:15:02.54,0:15:06.25,yin,,0,0,0,,你的主队列没有任何周期 你的app没有任何周期\N{\fs12}Your main queue gets no cycles, because none of your app gets any cycles,
Dialogue: 0,0:15:06.25,0:15:07.67,yin,,0,0,0,,一般都是如此\N{\fs12}okay, normally,
Dialogue: 0,0:15:07.67,0:15:09.70,yin,,0,0,0,,不过偶尔 你会得到后台取回\N{\fs12}but then occasionally you'll get the background fetch
Dialogue: 0,0:15:09.70,0:15:12.94,yin,,0,0,0,,或是URL会返回 或者你是一个location的东西\N{\fs12}or URL will come back, or if you're a location thing,
Dialogue: 0,0:15:12.94,0:15:14.22,yin,,0,0,0,,就像我们今天要讲的\N{\fs12}like I was saying we were talking about today,
Dialogue: 0,0:15:14.22,0:15:18.15,yin,,0,0,0,,你可以得到消息说 嘿 手机移动到了新位置\N{\fs12}you can get messages that "Hey the phone has moved to a new location,"
Dialogue: 0,0:15:18.16,0:15:21.52,yin,,0,0,0,,你得到了一个我刚说的推送通知\N{\fs12}um, you get a push notification that I was talking about earlier.
Dialogue: 0,0:15:21.52,0:15:22.85,yin,,0,0,0,,Facebook发了个消息给你\N{\fs12}You know, Facebook sent you a message.
Dialogue: 0,0:15:22.85,0:15:24.41,yin,,0,0,0,,这些都会把你从后台中唤醒\N{\fs12}Those things will wake you up in the background,
Dialogue: 0,0:15:24.41,0:15:26.24,yin,,0,0,0,,你会有一点时间来处理\N{\fs12}and you can get a little time to process.
Dialogue: 0,0:15:26.24,0:15:29.15,yin,,0,0,0,,每次你得到机会在后台运行时\N{\fs12}Any time you're given an opportunity to run in the background a little,
Dialogue: 0,0:15:29.15,0:15:30.97,yin,,0,0,0,,你都只有一点时间\N{\fs12}you only get a little bit of time.
Dialogue: 0,0:15:30.97,0:15:31.87,yin,,0,0,0,,很好理解\N{\fs12}Understandably.
Dialogue: 0,0:15:31.87,0:15:33.99,yin,,0,0,0,,你不能在那运行十分钟\N{\fs12}You can't sit there and run for ten minutes.
Dialogue: 0,0:15:33.99,0:15:37.80,yin,,0,0,0,,这是为了让用户没用你的程序时\N{\fs12}The whole point is to kind of keep you when you're not the app the user is using,
Dialogue: 0,0:15:37.80,0:15:42.38,yin,,0,0,0,,你不会用太多资源 免得浪费电量\N{\fs12}we want to keep you not using a lot of resources so the battery doesn't drain.
Dialogue: 0,0:15:43.38,0:15:45.02,yin,,0,0,0,,问得很好 请讲\N{\fs12}So good question. Yeah?
Dialogue: 0,0:15:52.36,0:15:55.17,yin,,0,0,0,,问题是 如果我获得了机会\N{\fs12}So the question is, what if I get an opportunity to run
Dialogue: 0,0:15:55.17,0:15:57.80,yin,,0,0,0,,在后台运行这些机制\N{\fs12}in the background here from one of these many mechanisms,
Dialogue: 0,0:15:57.80,0:16:00.05,yin,,0,0,0,,而且我确实要花十分钟\N{\fs12}and I do start doing something that takes ten minutes.
Dialogue: 0,0:16:00.05,0:16:01.33,yin,,0,0,0,,这时会发生什么\N{\fs12}What's going to happen?
Dialogue: 0,0:16:01.33,0:16:03.89,yin,,0,0,0,,答案是 系统会让你停止\N{\fs12}And the answer is, the system is going to just stop you,
Dialogue: 0,0:16:03.89,0:16:06.05,yin,,0,0,0,,你的过程会停止\N{\fs12}your process is going to stop,
Dialogue: 0,0:16:06.05,0:16:07.96,yin,,0,0,0,,你将无法完成\N{\fs12}you're not going to get to finish,
Dialogue: 0,0:16:07.96,0:16:10.42,yin,,0,0,0,,而且这会导致很多糟糕事情发生\N{\fs12}and that will create all kinds of bad things,
Dialogue: 0,0:16:10.42,0:16:12.15,yin,,0,0,0,,你的用户会说 怎么回事\N{\fs12}your user will be like "what's going on?"
Dialogue: 0,0:16:12.15,0:16:14.79,yin,,0,0,0,,这对你也很糟糕 时间会超时\N{\fs12}you know? And that's bad for you if things will timeout,
Dialogue: 0,0:16:14.79,0:16:18.55,yin,,0,0,0,,如果你在访问网络 各种糟糕事情会发生\N{\fs12}if you're accessing the network, all kinds of bad things,
Dialogue: 0,0:16:18.55,0:16:21.82,yin,,0,0,0,,答案是 别那样做\N{\fs12}so the answer is you don't want to do that, and the answer is,
Dialogue: 0,0:16:21.82,0:16:24.12,yin,,0,0,0,,系统不会让你这样\N{\fs12}the system will not let you do it.
Dialogue: 0,0:16:24.12,0:16:25.36,yin,,0,0,0,,问得很好\N{\fs12}Good question.
Dialogue: 0,0:16:25.36,0:16:26.43,yin,,0,0,0,,还有吗\N{\fs12}Alright, anything else?
Dialogue: 0,0:16:26.43,0:16:28.68,yin,,0,0,0,,问得很好 这里的幻灯片很好\N{\fs12}Great question, this is a great slide, because we basically got
Dialogue: 0,0:16:28.68,0:16:31.52,yin,,0,0,0,,这里我们基本是在考虑多任务处理\N{\fs12}to talk about multi-tasking here.
Dialogue: 0,0:16:31.52,0:16:36.76,yin,,0,0,0,,下面 我们来继续Photomania演示demo\N{\fs12}Alright, so let's talk about, continuing our Photo Mania demo here,
Dialogue: 0,0:16:36.76,0:16:40.51,yin,,0,0,0,,我说了 我要把它做成iPad程序\N{\fs12}and like I said, I'm going to make it into an iPad app, actually I'm going
Dialogue: 0,0:16:40.51,0:16:42.63,yin,,0,0,0,,我要把它做成通用程序\N{\fs12}to make it a universal app.
Dialogue: 0,0:16:42.63,0:16:45.38,yin,,0,0,0,,这将是一个很短的demo\N{\fs12}Believe it or not, and this is going to be a fairly short demo.
Dialogue: 0,0:16:45.38,0:16:49.67,yin,,0,0,0,,我们这里创建了很多可再利用的部分\N{\fs12}And we've kind of built so much reusable parts here
Dialogue: 0,0:16:49.67,0:16:51.44,yin,,0,0,0,,我们也有了很多知识\N{\fs12}and so much knowledge that you have
Dialogue: 0,0:16:51.44,0:16:56.04,yin,,0,0,0,,我们现在可以很快用这些来做更复杂的事\N{\fs12}that we can really quickly now make these apps do much more sophisticated things,
Dialogue: 0,0:16:56.04,0:16:59.31,yin,,0,0,0,,然后我还要演示一个你们没看过的东西\N{\fs12}and then I'm going to demo a new thing that you've never seen before,
Dialogue: 0,0:16:59.31,0:17:02.15,yin,,0,0,0,,也就是如何创建弹窗segue\N{\fs12}which is how to make a popover segue.
Dialogue: 0,0:17:02.15,0:17:06.73,yin,,0,0,0,,这是一类新的segue 几堂课前我们在课堂上讲过\N{\fs12}This is a new kind of segue, we talked about it in lecture, a few lectures ago,
Dialogue: 0,0:17:06.73,0:17:10.46,yin,,0,0,0,,不过我没要求你们在作业中做过 也没进行过demo演示\N{\fs12}but I never asked you to do it on homework, and I never demoed it,
Dialogue: 0,0:17:10.46,0:17:12.83,yin,,0,0,0,,现在就让我来demo演示一下\N{\fs12}so I'm going to demo it here.
Dialogue: 0,0:17:12.83,0:17:17.50,yin,,0,0,0,,好 退出这个\N{\fs12}Oh yes, okay, let's quit that.
Dialogue: 0,0:17:17.50,0:17:20.68,yin,,0,0,0,,让我们来运行Photomania\N{\fs12}Alright, so, let's go run Photo Mania.
Dialogue: 0,0:17:20.68,0:17:24.57,yin,,0,0,0,,这就是我发布时的样子\N{\fs12}This is exactly the way it was when I posted it.
Dialogue: 0,0:17:24.57,0:17:27.56,yin,,0,0,0,,看这里 这就是执行取回\N{\fs12}So this is the posting, and you can see here, this is the perform fetch,
Dialogue: 0,0:17:27.56,0:17:31.37,yin,,0,0,0,,这里我做的是一个常规的临时URL取回\N{\fs12}and you can see how I'm just doing a normal ephemeral URL
Dialogue: 0,0:17:31.37,0:17:34.56,yin,,0,0,0,,我们没有调用startFlickrFetch\N{\fs12}fetch, I'm not calling start FLickr fetch here.
Dialogue: 0,0:17:34.56,0:17:37.55,yin,,0,0,0,,这个东西在跳动\N{\fs12}And this guy is not...how, okay, I know how it is,
Dialogue: 0,0:17:37.55,0:17:41.02,yin,,0,0,0,,到时候我们会处理iTunes的\N{\fs12}okay we'll deal with iTunes when we get there.
Dialogue: 0,0:17:41.02,0:17:42.95,yin,,0,0,0,,无论如何\N{\fs12}Alright, so um, so anyway,
Dialogue: 0,0:17:42.95,0:17:45.56,yin,,0,0,0,,这就是我上周发布的东西\N{\fs12}so this is exactly what I posted last week.
Dialogue: 0,0:17:45.56,0:17:47.61,yin,,0,0,0,,上周四\N{\fs12}Last Thursday or whatever.
Dialogue: 0,0:17:47.61,0:17:48.91,yin,,0,0,0,,这个做了什么呢\N{\fs12}So what did this do?
Dialogue: 0,0:17:48.91,0:17:52.88,yin,,0,0,0,,我们运行一下 回顾一下Photomania是干嘛的\N{\fs12}Let's run this, just so we can remind ourselves what Photo Mania does,
Dialogue: 0,0:17:52.88,0:17:55.25,yin,,0,0,0,,它已经有半个星期久远了\N{\fs12}it's been more than half a week, and there it is,
Dialogue: 0,0:17:55.25,0:17:57.56,yin,,0,0,0,,它在后台中进行取回\N{\fs12}it just fetches in the background,
Dialogue: 0,0:17:57.56,0:18:03.52,yin,,0,0,0,,还有在启动时 取回了一系列最新的照片\N{\fs12}and also when it launches, kind of a bunch of recent photos
Dialogue: 0,0:18:03.52,0:18:05.14,yin,,0,0,0,,从Flickr\N{\fs12}from Flickr,
Dialogue: 0,0:18:05.14,0:18:08.16,yin,,0,0,0,,然后它给了一张表\N{\fs12}then it basically makes a table
Dialogue: 0,0:18:08.16,0:18:12.17,yin,,0,0,0,,表中有很多拍照者\N{\fs12}of all the photographers who took the photos,
Dialogue: 0,0:18:12.17,0:18:15.19,yin,,0,0,0,,这些都是拍照者 不是照片 而是拍照者\N{\fs12}so these are all photographers, not photos, photographers.
Dialogue: 0,0:18:15.19,0:18:17.28,yin,,0,0,0,,不过我们希望能够点这些\N{\fs12}But we'd love to be able to click on these
Dialogue: 0,0:18:17.28,0:18:19.93,yin,,0,0,0,,并看到某个拍照者的照片\N{\fs12}and see the photos by that photographer, right?
Dialogue: 0,0:18:19.93,0:18:22.05,yin,,0,0,0,,但这里还不行 因为还没有segue\N{\fs12}But we can't because we never put any segues in here,
Dialogue: 0,0:18:22.05,0:18:23.19,yin,,0,0,0,,我们什么都没做\N{\fs12}we never did anything,
Dialogue: 0,0:18:23.20,0:18:26.74,yin,,0,0,0,,而且 我们的app在iPad上什么都做不了\N{\fs12}and plus our app doesn't work at all on iPad,
Dialogue: 0,0:18:26.74,0:18:29.19,yin,,0,0,0,,让我们看看iPad故事板\N{\fs12}in fact, let's go look at our iPad storyboard,
Dialogue: 0,0:18:29.19,0:18:31.70,yin,,0,0,0,,可以在这里看到 它只是这个空白屏幕\N{\fs12}you can see it right here, it's just this big blank screen.
Dialogue: 0,0:18:31.70,0:18:34.27,yin,,0,0,0,,如果在iPad上运行 它将是一大块白屏\N{\fs12}So if I ran this on the iPad, it would be a big, blank screen.
Dialogue: 0,0:18:34.27,0:18:35.71,yin,,0,0,0,,我们删掉这个\N{\fs12}So let's get rid of that.
Dialogue: 0,0:18:35.71,0:18:38.12,yin,,0,0,0,,我想在这里创建我的iPad UI\N{\fs12}Now, I want to build my iPad UI here,
Dialogue: 0,0:18:38.12,0:18:40.90,yin,,0,0,0,,做法我之前跟大家展示过\N{\fs12}but I'm going to do it in a way that I showed you a little bit before,
Dialogue: 0,0:18:40.90,0:18:45.56,yin,,0,0,0,,这个很强大 我要复制粘贴自另一个app\N{\fs12}but it's really powerful, which I'm just going to copy and paste it from another app,
Dialogue: 0,0:18:45.56,0:18:51.23,yin,,0,0,0,,记得吧 Shutterbug有一个iPad上很类似的UI\N{\fs12}because Shutterbug, if you remember, had a UI on the iPad that's very similar
Dialogue: 0,0:18:51.23,0:18:53.70,yin,,0,0,0,,我们可以将它用到Photomania 来到Shutterbug\N{\fs12}to what we want in Photo Mania, so I'm going to go over to Shutterbug.
Dialogue: 0,0:18:53.70,0:18:55.63,yin,,0,0,0,,这是最后编辑的Shutterbug\N{\fs12}This is Shutterbug as we last left it.
Dialogue: 0,0:18:55.63,0:19:02.28,yin,,0,0,0,,看Shutterbug的iPad UI 这基本上就是我们要的了\N{\fs12}And if you look at Shutterbug's iPad UI, this, it's kind of almost what we want.
Dialogue: 0,0:19:02.28,0:19:04.70,yin,,0,0,0,,Shutterbug展示的是照片列表\N{\fs12}Shutterbug just shows the list of photos here,
Dialogue: 0,0:19:04.70,0:19:08.24,yin,,0,0,0,,如果我们能把拍照者列表插入到这中间\N{\fs12}if we could just insert the list of photographers here in the middle,
Dialogue: 0,0:19:08.24,0:19:10.60,yin,,0,0,0,,我们几乎就得到了iPad上我们要的一切\N{\fs12}we'd have pretty much what we want on the iPad,
Dialogue: 0,0:19:10.60,0:19:13.88,yin,,0,0,0,,下面我要复制所有这些\N{\fs12}so I'm just going to copy all of this.
Dialogue: 0,0:19:13.88,0:19:16.19,yin,,0,0,0,,回到Photomania这里\N{\fs12}Go back over here to Photo Mania,
Dialogue: 0,0:19:16.19,0:19:19.73,yin,,0,0,0,,我在我的iPad故事板中 粘贴\N{\fs12}and I'm in my iPad storyboard here, and paste.
Dialogue: 0,0:19:19.73,0:19:21.95,yin,,0,0,0,,我需要全选这些\N{\fs12}Oops, I guess maybe select all over here?
Dialogue: 0,0:19:21.95,0:19:27.61,yin,,0,0,0,,全选 复制 到这里 粘贴\N{\fs12}Okay, select all, copy, over here, and paste.
Dialogue: 0,0:19:27.61,0:19:29.57,yin,,0,0,0,,放到了这里\N{\fs12}So put it in here.
Dialogue: 0,0:19:29.57,0:19:34.68,yin,,0,0,0,,还是一样 我们需要找一下 哦 就在这里\N{\fs12}As usual it's a little bit of a search party to find anything, oh, there it is!
Dialogue: 0,0:19:34.68,0:19:40.75,yin,,0,0,0,,这就是那个Shutterbug iPad UI\N{\fs12}So here is that Shutterbug iPad UI.
Dialogue: 0,0:19:40.77,0:19:43.35,yin,,0,0,0,,我说了 我想要往其中插入\N{\fs12}And like I said, basically I want to insert
Dialogue: 0,0:19:43.35,0:19:45.41,yin,,0,0,0,,一个照片列表\N{\fs12}in between the list of photos
Dialogue: 0,0:19:45.41,0:19:48.10,yin,,0,0,0,,放到这里 让我能选拍照者\N{\fs12}a thing here where I can choose the photographer.
Dialogue: 0,0:19:48.10,0:19:51.83,yin,,0,0,0,,也就是我刚在Photomania中展示的东西\N{\fs12}The same thing, the thing I just showed you, that we were running in Photo Mania.
Dialogue: 0,0:19:51.83,0:19:55.36,yin,,0,0,0,,既然在Shutterbug中 就让我来抓取图像视图控制器吧\N{\fs12}While I'm here in Shutterbug, let's grab the image view controller.
Dialogue: 0,0:19:55.36,0:19:56.63,yin,,0,0,0,,我们显然需要这个\N{\fs12}We're going to need that obviously,
Dialogue: 0,0:19:56.63,0:19:59.60,yin,,0,0,0,,故事板需要用到它 把它放到这里\N{\fs12}our storyboard uses that, so we'll put that over here.
Dialogue: 0,0:19:59.60,0:20:00.48,yin,,0,0,0,,复制进来\N{\fs12}Copy that in.
Dialogue: 0,0:20:00.48,0:20:03.11,yin,,0,0,0,,这就是Shutterbug中我们需要的一切\N{\fs12}And that's all we need from Shutterbug. So
Dialogue: 0,0:20:03.13,0:20:08.88,yin,,0,0,0,,这个故事板基本上就是我们要的了\N{\fs12}this storyboard is pretty much exactly what we want,
Dialogue: 0,0:20:08.88,0:20:11.61,yin,,0,0,0,,只有少量东西需要修正\N{\fs12}there's a couple of minor things we need to fix here.
Dialogue: 0,0:20:11.61,0:20:15.14,yin,,0,0,0,,一是 我们不想要这个照片列表\N{\fs12}One thing is we don't want this list of photos
Dialogue: 0,0:20:15.14,0:20:18.38,yin,,0,0,0,,为我们的拆分视图的根视图控制器\N{\fs12}to be the root view controller of our split view,
Dialogue: 0,0:20:18.38,0:20:21.39,yin,,0,0,0,,我们希望这里是拍照者\N{\fs12}we want the photographer thing to be that.
Dialogue: 0,0:20:21.39,0:20:23.26,yin,,0,0,0,,在哪获得拍照者的表格呢\N{\fs12}So where can we get our photographer's table?
Dialogue: 0,0:20:23.26,0:20:26.98,yin,,0,0,0,,这个我们也有 在iPhone的故事板中\N{\fs12}Well, we actually have that too, that's here in our iPhone storyboard.
Dialogue: 0,0:20:26.98,0:20:28.89,yin,,0,0,0,,这就是我刚运行展示的\N{\fs12}That's what I just ran and showed you, right?
Dialogue: 0,0:20:28.89,0:20:30.71,yin,,0,0,0,,这是列表 这张表\N{\fs12}This is the list, this table
Dialogue: 0,0:20:30.71,0:20:32.96,yin,,0,0,0,,到检查器中看\N{\fs12}if you inspect its identity
Dialogue: 0,0:20:32.96,0:20:35.69,yin,,0,0,0,,这是拍照者的Core Data表格视图控制器\N{\fs12}is this photographer's core data table view controller.
Dialogue: 0,0:20:35.69,0:20:38.03,yin,,0,0,0,,这里展示的是拍照者的列表\N{\fs12}So this is showing that list of photographers.
Dialogue: 0,0:20:38.03,0:20:40.19,yin,,0,0,0,,我们只需要复制这个\N{\fs12}So let's just copy this.
Dialogue: 0,0:20:40.19,0:20:44.75,yin,,0,0,0,,把这个放到我们的… 哦 到哪去了\N{\fs12}Put this in our...oops, and where did it go?
Dialogue: 0,0:20:46.96,0:20:50.95,yin,,0,0,0,,抱歉 有时很难找 在这里\N{\fs12}Sorry. Sometimes hard to find all this, there it is.
Dialogue: 0,0:20:50.95,0:20:52.88,yin,,0,0,0,,注意到 它看起来很大\N{\fs12}Notice that it looks really big.
Dialogue: 0,0:20:52.88,0:20:55.71,yin,,0,0,0,,这是因为我还没有segue到它 它还不知道\N{\fs12}That's because I haven't segued to it yet, so it doesn't know
Dialogue: 0,0:20:55.71,0:20:59.69,yin,,0,0,0,,它会处在一个拆分视频的master中\N{\fs12}that it's going to be in a master of a split view
Dialogue: 0,0:20:59.69,0:21:06.05,yin,,0,0,0,,并处在一个这样的导航控制器中\N{\fs12}and be inside of a navigation controller like that.
Dialogue: 0,0:21:06.05,0:21:08.79,yin,,0,0,0,,让我们把那个根视图控制器放到这里\N{\fs12}So let's go ahead and put that root view controller in there.
Dialogue: 0,0:21:08.79,0:21:09.22,yin,,0,0,0,,在哪\N{\fs12}Where is it?
Dialogue: 0,0:21:09.22,0:21:11.67,yin,,0,0,0,,这是我们的导航控制器的根\N{\fs12}Okay so here's the root of our navigation controller.
Dialogue: 0,0:21:11.67,0:21:14.10,yin,,0,0,0,,这个或许也叫作Shutterbug\N{\fs12}This thing is also probably called Shutterbug,
Dialogue: 0,0:21:14.10,0:21:18.01,yin,,0,0,0,,把这个改成Photomania或是Photographers\N{\fs12}let's change this to Photo Mania or maybe photographers,
Dialogue: 0,0:21:18.01,0:21:21.00,yin,,0,0,0,,因为出现在我们根视图控制器中的就是这个\N{\fs12}because that's what's going to show up in our root view controller.
Dialogue: 0,0:21:21.00,0:21:25.16,yin,,0,0,0,,我要control拖动到拍照者那个\N{\fs12}So I'm just going to control drag to the photographer's one,
Dialogue: 0,0:21:25.16,0:21:28.14,yin,,0,0,0,,并把这个重设为根视图控制器\N{\fs12}and reset that to be the root view controller.
Dialogue: 0,0:21:28.14,0:21:31.48,yin,,0,0,0,,下面… 这里腾点空间出来\N{\fs12}So now, let's get more space here.
Dialogue: 0,0:21:33.88,0:21:42.56,yin,,0,0,0,,现在我们的UI就更接近于我们想要的了\N{\fs12}So now our API or our UI is a little more what we want.
Dialogue: 0,0:21:42.56,0:21:46.73,yin,,0,0,0,,我们这里有这个拍照者的东西 我们希望\N{\fs12}We have this photographer's thing here, and now we want,
Dialogue: 0,0:21:46.73,0:21:49.84,yin,,0,0,0,,每次点击拍照者其中一行时\N{\fs12}if each time we click on a photographer, one of these rows,
Dialogue: 0,0:21:49.84,0:21:53.12,yin,,0,0,0,,都会跳到一个照片列表\N{\fs12}then we want to go to a list of photos.
Dialogue: 0,0:21:53.12,0:21:54.89,yin,,0,0,0,,让我们来做这个\N{\fs12}Alright? So let's do that.
Dialogue: 0,0:21:54.91,0:21:57.52,yin,,0,0,0,,从这里control拖动到这里\N{\fs12}I'm just going to control drag from here to here.
Dialogue: 0,0:21:57.52,0:22:00.80,yin,,0,0,0,,这处在导航控制器中 我要选push\N{\fs12}And this is inside our navigation control, so I'm going to push.
Dialogue: 0,0:22:00.80,0:22:04.12,yin,,0,0,0,,现在就很接近于我们要的了\N{\fs12}Now we're really getting close to what we want.
Dialogue: 0,0:22:04.12,0:22:06.63,yin,,0,0,0,,这是Shutterbug 不过这没问题\N{\fs12}This is Shutterbug, but that's okay, that's going
Dialogue: 0,0:22:06.63,0:22:09.60,yin,,0,0,0,,这是标题 我们会重置标题\N{\fs12}to be the title, we're going to reset that title anyway.
Dialogue: 0,0:22:09.60,0:22:11.71,yin,,0,0,0,,这个UI的问题是什么\N{\fs12}And what is the problem with this UI?
Dialogue: 0,0:22:11.71,0:22:15.80,yin,,0,0,0,,这个UI几乎就是我们要的了 除了一点\N{\fs12}This UI is actually exactly what we want except for one thing,
Dialogue: 0,0:22:15.80,0:22:21.18,yin,,0,0,0,,也就是 到检查器中看这个\N{\fs12}which is that if we inspect this guy right here,
Dialogue: 0,0:22:21.18,0:22:24.99,yin,,0,0,0,,它是一个JustPostedFlickrPhotoCDTVC\N{\fs12}it is a just posted Flickr photo CDTVC, right?
Dialogue: 0,0:22:24.99,0:22:26.20,yin,,0,0,0,,因为这是从Shutterbug复制来的\N{\fs12}Because I copied it from Shutterbug,
Dialogue: 0,0:22:26.20,0:22:27.76,yin,,0,0,0,,Shutterbug显示的就是这个\N{\fs12}and that's what Shutterbug shows, right?
Dialogue: 0,0:22:27.76,0:22:29.37,yin,,0,0,0,,刚发布的照片\N{\fs12}The just posted photos.
Dialogue: 0,0:22:29.37,0:22:35.02,yin,,0,0,0,,而这里 我们希望它是PhotosByPhotographerCDTVC\N{\fs12}So really we want this to be something like photos by photographer CDTVC, right?
Dialogue: 0,0:22:35.02,0:22:37.09,yin,,0,0,0,,因为我们会点击这里的拍照者\N{\fs12}Because we're going to click on a photographer here,
Dialogue: 0,0:22:37.09,0:22:39.55,yin,,0,0,0,,我们希望显示的是他拍的照片\N{\fs12}and we want this to show the photos by that photographer.
Dialogue: 0,0:22:39.55,0:22:42.07,yin,,0,0,0,,大家都理解我说的话了吗\N{\fs12}Does everybody understand why I'm saying that?
Dialogue: 0,0:22:42.07,0:22:43.83,yin,,0,0,0,,让我们把它设置为这个\N{\fs12}So let's just set it to be that, and
Dialogue: 0,0:22:43.83,0:22:47.84,yin,,0,0,0,,我们将要创建这个视图控制器 让我们来做这个\N{\fs12}we're going to have to create this view controller right here, so let's just do that.
Dialogue: 0,0:22:47.84,0:22:51.66,yin,,0,0,0,,文件 新文件 类\N{\fs12}File, new file, the class,
Dialogue: 0,0:22:51.66,0:22:54.47,yin,,0,0,0,,这就是一个CoreDataTableViewController\N{\fs12}it's going to be a core data table view controller.
Dialogue: 0,0:22:54.49,0:22:59.87,yin,,0,0,0,,我们将称其为PhotosByPhotographerCDTVC\N{\fs12}We're going to call it photos by photographer CDTVC,
Dialogue: 0,0:22:59.87,0:23:02.06,yin,,0,0,0,,我们需要确保这个等于这个\N{\fs12}we've got to make sure this equals this, because
Dialogue: 0,0:23:02.06,0:23:05.45,yin,,0,0,0,,因为我刚把那个设置为了这里的类\N{\fs12}I just set that to be the class in here.
Dialogue: 0,0:23:05.45,0:23:12.34,yin,,0,0,0,,把这个放到Photomania中\N{\fs12}So let's put this -- I'll bring that, let's put this in Photo Mania.
Dialogue: 0,0:23:12.34,0:23:16.31,yin,,0,0,0,,有点怪 好 放到这里\N{\fs12}Huh, that's kind of weird, okay...alright put in there.
Dialogue: 0,0:23:16.31,0:23:22.01,yin,,0,0,0,,好 这是我们的新PhotosByPhotographerCDTVC\N{\fs12}Alright. So here's our new photos by photographer core data table view controller.
Dialogue: 0,0:23:22.01,0:23:27.01,yin,,0,0,0,,我不想被这些垃圾弄得分心 删掉它们\N{\fs12}I'm going to not have you distracted by all this junk, let's get rid of all that.
Dialogue: 0,0:23:27.01,0:23:30.21,yin,,0,0,0,,创建了新的视图控制器后再怎么做呢\N{\fs12}When we create a new view controller, what do we do?
Dialogue: 0,0:23:30.21,0:23:33.64,yin,,0,0,0,,我们总需要想 这个东西的API是什么\N{\fs12}We always kind of think of what is this thing's API?
Dialogue: 0,0:23:33.64,0:23:35.58,yin,,0,0,0,,它的公共接口是什么\N{\fs12}What's its public interface?
Dialogue: 0,0:23:35.58,0:23:38.87,yin,,0,0,0,,我们来看PhotosByPhotographer的公共接口\N{\fs12}So let's look at the public interface of photos by photographer,
Dialogue: 0,0:23:38.87,0:23:41.49,yin,,0,0,0,,也许你们有些人会想到\N{\fs12}and probably some of you are imagining
Dialogue: 0,0:23:41.49,0:23:45.51,yin,,0,0,0,,这个很简单 它为非原子 强\N{\fs12}that what this is, it's really simple, it's just going to be non-atomic strong.
Dialogue: 0,0:23:45.51,0:23:50.32,yin,,0,0,0,,我们需要传入我们要显示的照片的拍照者\N{\fs12}We need to pass the photographer in that we want to show the photos of.
Dialogue: 0,0:23:50.32,0:23:52.86,yin,,0,0,0,,因此 我需要导入\N{\fs12}So I'd better import,
Dialogue: 0,0:23:53.69,0:23:59.69,yin,,0,0,0,,导入Photographer 然后我可以有一个拍照者\N{\fs12}import photographer, and then I can have a photographer.
Dialogue: 0,0:24:02.00,0:24:05.60,yin,,0,0,0,,这就是我们的公共模型 这就是我们的模型\N{\fs12}Okay so this is basically our public model, this is our model
Dialogue: 0,0:24:05.60,0:24:09.29,yin,,0,0,0,,它是公共的 如果有人设置了这个拍照者\N{\fs12}and it's public, so if someone sets this photographer,
Dialogue: 0,0:24:09.29,0:24:12.45,yin,,0,0,0,,我们需要显示这个拍照者的照片\N{\fs12}we'd better show the photos by that photographer.
Dialogue: 0,0:24:12.45,0:24:14.47,yin,,0,0,0,,这是一张显示照片的表格\N{\fs12}So this is a table that shows photos,
Dialogue: 0,0:24:14.47,0:24:18.24,yin,,0,0,0,,拍照者决定了显示哪些照片\N{\fs12}photographer determines which photos we show.
Dialogue: 0,0:24:18.24,0:24:20.49,yin,,0,0,0,,在我们实现这个之前\N{\fs12}Now before we go off and implement this,
Dialogue: 0,0:24:20.49,0:24:24.84,yin,,0,0,0,,我要先到拍照者的Core Data表格视图控制器\N{\fs12}I'm actually going to go down to our photographer's core data table view controller.
Dialogue: 0,0:24:24.84,0:24:27.40,yin,,0,0,0,,这是显示拍照者列表的东西\N{\fs12}This is the thing that shows the list of photographers.
Dialogue: 0,0:24:27.40,0:24:29.99,yin,,0,0,0,,这是我这一讲最开始展示的\N{\fs12}That I started off this lecture showing you.
Dialogue: 0,0:24:29.99,0:24:32.69,yin,,0,0,0,,但愿你们记得上周三的代码\N{\fs12}Hopefully you remember this code from last Wednesday,
Dialogue: 0,0:24:32.69,0:24:35.16,yin,,0,0,0,,它正在从拍照者中取回信息\N{\fs12}you can see that it's doing a fetch to the photographer,
Dialogue: 0,0:24:35.16,0:24:37.75,yin,,0,0,0,,按名字显示 取回所有这些\N{\fs12}showing them by name, it's fetching all of them right?
Dialogue: 0,0:24:37.75,0:24:41.94,yin,,0,0,0,,我要加入导航代码来导航\N{\fs12}I'm going to put in the navigation code to navigate
Dialogue: 0,0:24:41.94,0:24:48.04,yin,,0,0,0,,从这个照片列表…\N{\fs12}from this photos one right here, this is the list of photos,
Dialogue: 0,0:24:48.04,0:24:50.45,yin,,0,0,0,,抱歉 这是拍照者列表\N{\fs12}sorry, list of photographers.
Dialogue: 0,0:24:50.45,0:24:53.37,yin,,0,0,0,,这里这个segue\N{\fs12}This little segue right here.
Dialogue: 0,0:24:53.37,0:24:56.60,yin,,0,0,0,,给这个segue起个名字\N{\fs12}So let's give that little segue a name,
Dialogue: 0,0:24:56.60,0:25:01.37,yin,,0,0,0,,叫它Show Photos by Photographer segue\N{\fs12}we'll call it the show photos by photographer segue,
Dialogue: 0,0:25:01.37,0:25:02.97,yin,,0,0,0,,因为这就是它的作用\N{\fs12}because that's what it does, right?
Dialogue: 0,0:25:02.97,0:25:05.87,yin,,0,0,0,,点击这里的拍照者 它就会显示照片\N{\fs12}When we click on a photographer here, it's going to show the photos.
Dialogue: 0,0:25:05.87,0:25:10.29,yin,,0,0,0,,然后我要回到拍照者的Core Data表格视图控制器\N{\fs12}And then let's go back to our photographer's core data table view controller
Dialogue: 0,0:25:10.29,0:25:13.31,yin,,0,0,0,,然后做导航\N{\fs12}and let's do the navigation.
Dialogue: 0,0:25:13.31,0:25:15.31,yin,,0,0,0,,下面我要展示\N{\fs12}Now, I'm going to show you something
Dialogue: 0,0:25:15.31,0:25:19.50,yin,,0,0,0,,你们在开发过程中可能要用的东西\N{\fs12}that I think you should probably do for your development process,
Dialogue: 0,0:25:19.50,0:25:21.14,yin,,0,0,0,,也就是使用代码片段\N{\fs12}which is to start use code snippets.
Dialogue: 0,0:25:21.14,0:25:24.23,yin,,0,0,0,,我们在一个周五辅导课上讲过\N{\fs12}Now we talked about this in one of the Friday sections,
Dialogue: 0,0:25:24.23,0:25:25.91,yin,,0,0,0,,我不打算重复讲它\N{\fs12}so I'm not going to go over it again,
Dialogue: 0,0:25:25.91,0:25:29.56,yin,,0,0,0,,不过这里我有一段我创建的代码片段\N{\fs12}but I have a code snippet that I've created, for example, which is a kind
Dialogue: 0,0:25:29.56,0:25:32.71,yin,,0,0,0,,这是一段通用表格视图导航代码片段\N{\fs12}of generic table view navigation code snippet.
Dialogue: 0,0:25:32.71,0:25:36.29,yin,,0,0,0,,开始键入它的名字 表格视图导航\N{\fs12}So I start typing what I called it, table view navigation,
Dialogue: 0,0:25:36.29,0:25:40.07,yin,,0,0,0,,然后点回车 这就插入了进来\N{\fs12}and I'm going to hit return, and it's going to put it in. So put this code in here
Dialogue: 0,0:25:40.07,0:25:43.59,yin,,0,0,0,,这是很通用的 它是做什么的呢\N{\fs12}for me, and this is fairly generic okay? And what does it do?
Dialogue: 0,0:25:43.59,0:25:45.81,yin,,0,0,0,,它能为segue做准备\N{\fs12}Well, it does prepare for segue
Dialogue: 0,0:25:45.83,0:25:49.80,yin,,0,0,0,,而且它还能做到didSelectRowAtIndexPath\N{\fs12}and it also does did select row at index path.
Dialogue: 0,0:25:49.80,0:25:52.93,yin,,0,0,0,,这个能为一个表格视图工作\N{\fs12}So this can work for a table view
Dialogue: 0,0:25:52.93,0:25:54.98,yin,,0,0,0,,也就是拆分视图的master\N{\fs12}that is the master of a split view,
Dialogue: 0,0:25:54.98,0:25:56.66,yin,,0,0,0,,它还会为如下情况工作\N{\fs12}and it will also work for something
Dialogue: 0,0:25:56.67,0:26:00.28,yin,,0,0,0,,也就是通过导航控制来segue\N{\fs12}that it's just going to segue via navigation control or whatever.
Dialogue: 0,0:26:00.28,0:26:01.67,yin,,0,0,0,,它是如何工作的呢\N{\fs12}So how does it work?
Dialogue: 0,0:26:01.67,0:26:03.26,yin,,0,0,0,,如果我们prepareForSegue\N{\fs12}Well if we prepare for segue,
Dialogue: 0,0:26:03.26,0:26:05.63,yin,,0,0,0,,它会从sender获得索引路径\N{\fs12}it just gets the index path from the sender,
Dialogue: 0,0:26:05.63,0:26:07.48,yin,,0,0,0,,这是一个UITableViewCell\N{\fs12}which is a UI table view cell.
Dialogue: 0,0:26:07.48,0:26:10.13,yin,,0,0,0,,你们见过这个 没有什么新东西\N{\fs12}You've already seen this code before, so it's nothing new.
Dialogue: 0,0:26:10.13,0:26:12.45,yin,,0,0,0,,然后它会调用这个准备\N{\fs12}And then it calls this prepare up here, and we'll talk
Dialogue: 0,0:26:12.45,0:26:14.28,yin,,0,0,0,,马上我们会讲到这个\N{\fs12}about what the prepare does in a second.
Dialogue: 0,0:26:14.28,0:26:16.81,yin,,0,0,0,,然后didSelectRowAtIndexPath\N{\fs12}And then the did select row at index path, it does the trick
Dialogue: 0,0:26:16.81,0:26:20.15,yin,,0,0,0,,能够观察拆分视图的detail控制\N{\fs12}where it's looking at the detail control of the split view,
Dialogue: 0,0:26:20.15,0:26:21.79,yin,,0,0,0,,如果是导航控制器\N{\fs12}if it's a navigation controller
Dialogue: 0,0:26:21.79,0:26:26.17,yin,,0,0,0,,它会到里面找根视图控制器 然后做好准备\N{\fs12}it looks inside for its root view controller, and then is preparing that.
Dialogue: 0,0:26:26.17,0:26:30.50,yin,,0,0,0,,大家都理解这两个方法是做什么的了吗\N{\fs12}Everyone understand what these two methods do?
Dialogue: 0,0:26:30.50,0:26:32.97,yin,,0,0,0,,下面来看这个准备\N{\fs12}Okay. So now we've got to look at this prepare,
Dialogue: 0,0:26:32.97,0:26:35.03,yin,,0,0,0,,因为这是实际做准备的东西\N{\fs12}because this is the thing that's actually doing the prepare.
Dialogue: 0,0:26:35.03,0:26:36.34,yin,,0,0,0,,这是这个\N{\fs12}So here's that.
Dialogue: 0,0:26:36.34,0:26:37.76,yin,,0,0,0,,这个的作用\N{\fs12}And what this is going to do,
Dialogue: 0,0:26:37.76,0:26:42.58,yin,,0,0,0,,是把ManagedObject放到我们正在讨论的表格的行中\N{\fs12}it's going to get the managed object in the row on the table that we're talking about,
Dialogue: 0,0:26:42.58,0:26:48.75,yin,,0,0,0,,它会检查我们segue到的视图控制器的类\N{\fs12}okay, and then it's going to check the class of the view controller we're segueing to,
Dialogue: 0,0:26:48.75,0:26:52.40,yin,,0,0,0,,也许还会检查segue标识符\N{\fs12}maybe it's going to check the segue identifiers as well, that's not going to be--
Dialogue: 0,0:26:52.40,0:26:54.61,yin,,0,0,0,,didSelectRowAtIndexPath并不是一个segue\N{\fs12}you know, did select row at index path is not a segue,
Dialogue: 0,0:26:54.61,0:26:56.51,yin,,0,0,0,,因此这里并不适用\N{\fs12}so it's not going to be applicable there,
Dialogue: 0,0:26:56.51,0:26:59.69,yin,,0,0,0,,不过我在这里检查 看是否有segue标识符\N{\fs12}but I check here and see if there is a segue identifier,
Dialogue: 0,0:26:59.69,0:27:01.51,yin,,0,0,0,,如果没有 我就忽视这一部分\N{\fs12}and if there's not, then I'd ignore this part.
Dialogue: 0,0:27:01.51,0:27:05.02,yin,,0,0,0,,然后我要准备那个视图控制器 用于被segue到\N{\fs12}And then I'd prepare that view controller for being segued to
Dialogue: 0,0:27:05.02,0:27:07.80,yin,,0,0,0,,或者说 如果它是拆分控制器的detail\N{\fs12}or if it's the detail of the split view controller.
Dialogue: 0,0:27:07.80,0:27:11.63,yin,,0,0,0,,这里 我们有拍照者segue到照片\N{\fs12}So this case, we have photographers segueing
Dialogue: 0,0:27:11.63,0:27:13.28,yin,,0,0,0,,看看这是怎样的\N{\fs12}to photos, so let's see what this looks like.
Dialogue: 0,0:27:13.28,0:27:15.95,yin,,0,0,0,,这里我们要找的NSManagedObject\N{\fs12}Well, the NS managed object we have here that we're going
Dialogue: 0,0:27:15.95,0:27:17.70,yin,,0,0,0,,是一个拍照者\N{\fs12}to be looking for is a photographer,
Dialogue: 0,0:27:17.70,0:27:21.20,yin,,0,0,0,,因此我要把这个换成Photographer\N{\fs12}so I'm just going to replace this with photographer.
Dialogue: 0,0:27:21.20,0:27:22.67,yin,,0,0,0,,photographer\N{\fs12}Photographer.
Dialogue: 0,0:27:22.67,0:27:27.17,yin,,0,0,0,,从取回结果控制器中 将对象获得到索引路径中\N{\fs12}Just getting my object in index path out of my fetched results controller,
Dialogue: 0,0:27:27.17,0:27:28.35,yin,,0,0,0,,你们知道这是什么\N{\fs12}you know what that is,
Dialogue: 0,0:27:28.35,0:27:31.89,yin,,0,0,0,,然后我们segue到的是哪类视图控制器呢\N{\fs12}and then what kind of view controller are we segueing to?
Dialogue: 0,0:27:31.89,0:27:33.68,yin,,0,0,0,,我们将segue到这里的一个\N{\fs12}Well, we're going to be segueing to one of these
Dialogue: 0,0:27:33.69,0:27:37.69,yin,,0,0,0,,我们刚创建的PhotosByPhotographerCDTVC\N{\fs12}photos by photographer core data view controllers that we just created.
Dialogue: 0,0:27:37.69,0:27:39.19,yin,,0,0,0,,这个的实现我们还没做\N{\fs12}We haven't done the implementation of this yet,
Dialogue: 0,0:27:39.19,0:27:42.86,yin,,0,0,0,,不过我们知道要设置拍照者 它的公共API是什么\N{\fs12}but we know what its public API is, to set the photographer,
Dialogue: 0,0:27:42.86,0:27:44.81,yin,,0,0,0,,同我们想的一样\N{\fs12}which is exactly what we would want.
Dialogue: 0,0:27:44.81,0:27:47.79,yin,,0,0,0,,让我们导入这个\N{\fs12}So let's go ahead and import that.
Dialogue: 0,0:27:47.79,0:27:54.20,yin,,0,0,0,,导入 PhotosByPhotographer\N{\fs12}Import, m, import photos by photographer,
Dialogue: 0,0:27:54.20,0:27:56.73,yin,,0,0,0,,然后到下面这里\N{\fs12}and then let's go down here and
Dialogue: 0,0:27:56.73,0:27:59.72,yin,,0,0,0,,检查这就是那个类 PhotosByPhotographer\N{\fs12}check that that's the class, photos by photographer.
Dialogue: 0,0:27:59.72,0:28:03.24,yin,,0,0,0,,现在我们知道 这就是我们要的类\N{\fs12}Okay, so now we know that that's the class that we want.
Dialogue: 0,0:28:03.24,0:28:06.51,yin,,0,0,0,,这里 这个segue标识符 我们可以在这里检验\N{\fs12}Here, this segue identifier we can check that here,
Dialogue: 0,0:28:06.51,0:28:11.35,yin,,0,0,0,,记得吧 我把它设为了Show Photos by Photographer\N{\fs12}and if you remember, I set it to be show photos by photographer, right?
Dialogue: 0,0:28:11.35,0:28:13.48,yin,,0,0,0,,大家都知道这是什么\N{\fs12}That's, everyone know what that is, right?
Dialogue: 0,0:28:13.48,0:28:16.39,yin,,0,0,0,,也就是这里这个\N{\fs12}That is this thing right here.
Dialogue: 0,0:28:16.39,0:28:18.19,yin,,0,0,0,,这个小segue\N{\fs12}This little segue.
Dialogue: 0,0:28:18.19,0:28:20.75,yin,,0,0,0,,它的标识符是这个\N{\fs12}Okay. Its identifier is this.
Dialogue: 0,0:28:20.75,0:28:23.94,yin,,0,0,0,,这需要匹配我们这里所做的事情\N{\fs12}That's got to match what we're doing in here.
Dialogue: 0,0:28:23.94,0:28:26.35,yin,,0,0,0,,好 我们检验这个\N{\fs12}Alright, so we're checking that, and again,
Dialogue: 0,0:28:26.35,0:28:29.22,yin,,0,0,0,,如果我们考虑didSelectRowAtIndexPath的情形\N{\fs12}if we're doing the did select row at index path case
Dialogue: 0,0:28:29.22,0:28:30.34,yin,,0,0,0,,这里只是detail视图\N{\fs12}where it's just the detail view,
Dialogue: 0,0:28:30.34,0:28:34.59,yin,,0,0,0,,那么 segue标识符就是nil 其长度将为nil\N{\fs12}then the segue identifiers can be nil, so its length is going to be nil,
Dialogue: 0,0:28:34.59,0:28:37.33,yin,,0,0,0,,这里我用长度是为了\N{\fs12}and so I use length there just in case to check
Dialogue: 0,0:28:37.33,0:28:40.18,yin,,0,0,0,,同等地检查空字符串和nil\N{\fs12}for empty string and nil equally, either of them,
Dialogue: 0,0:28:40.18,0:28:43.63,yin,,0,0,0,,我用了非 如果没有segue标识符\N{\fs12}and I'm doing not, so if there's no segue identifier,
Dialogue: 0,0:28:43.63,0:28:49.19,yin,,0,0,0,,那么只要我们要到PhotosByPhotographerCDTVC\N{\fs12}then as long as we're going to a photos by photographer CDTVC,
Dialogue: 0,0:28:49.21,0:28:51.76,yin,,0,0,0,,我们就知道我们要怎么做\N{\fs12}then we know we're going to, what we're going to do.
Dialogue: 0,0:28:51.76,0:28:55.12,yin,,0,0,0,,有些人会认为 检查这个segue标识符\N{\fs12}Now, some people would argue the checking this segue identifier
Dialogue: 0,0:28:55.12,0:28:57.76,yin,,0,0,0,,根本就不应该做\N{\fs12}that you should almost never do that.
Dialogue: 0,0:28:57.76,0:29:02.36,yin,,0,0,0,,如果你要segue到PhotosByPhotographerCDTVC\N{\fs12}Because if you're segueing to photos by photographer CDTVC
Dialogue: 0,0:29:02.36,0:29:05.65,yin,,0,0,0,,从一个拍照者的CDTVC 你知道你在做什么\N{\fs12}from a photographer's CDTVC, you know what you're doing,
Dialogue: 0,0:29:05.65,0:29:07.83,yin,,0,0,0,,你不需要一个segue标识符告诉你 你在做什么\N{\fs12}you don't need a segue identifier to tell you what you're doing.
Dialogue: 0,0:29:07.83,0:29:09.30,yin,,0,0,0,,有些人会这样说\N{\fs12}That's what some people would say.
Dialogue: 0,0:29:09.30,0:29:11.88,yin,,0,0,0,,我认为这种说法并不错\N{\fs12}And I see that argument, it's not a bad argument,
Dialogue: 0,0:29:11.88,0:29:16.10,yin,,0,0,0,,我甚至赞同其观点 检查segue标识符\N{\fs12}I even buy that argument that really you only when you segue identifiers
Dialogue: 0,0:29:16.10,0:29:18.60,yin,,0,0,0,,只应该用到有两个不同segue的情况下\N{\fs12}if for some reason you had two different segues,
Dialogue: 0,0:29:18.60,0:29:20.94,yin,,0,0,0,,demo后面将有一个例子\N{\fs12}and we'll talk a little bit later in this demo an example
Dialogue: 0,0:29:20.94,0:29:22.97,yin,,0,0,0,,你会碰到这种情况\N{\fs12}of where you might actually have that.
Dialogue: 0,0:29:22.97,0:29:25.39,yin,,0,0,0,,你可以说 删掉这个\N{\fs12}So one could argue just delete that, okay,
Dialogue: 0,0:29:25.39,0:29:27.85,yin,,0,0,0,,把这个完全删掉 不要检查\N{\fs12}just get rid of that entirely, don't even check that.
Dialogue: 0,0:29:27.85,0:29:32.65,yin,,0,0,0,,这里我们知道 如果它是PhotosByPhotographerCDTVC\N{\fs12}And here we know that this is a, if it's photos by photographer CDTVC,
Dialogue: 0,0:29:32.65,0:29:35.49,yin,,0,0,0,,pbpcdtvc =\N{\fs12}photos by photographer CDTVC equals
Dialogue: 0,0:29:35.49,0:29:40.81,yin,,0,0,0,,(PhotosByPhotographerCDTVC *)vc\N{\fs12}PhotosByPhotographerCDTVC by photographer CDTVC, star, VC,
Dialogue: 0,0:29:40.81,0:29:42.15,yin,,0,0,0,,我们有了这个\N{\fs12}alright, so we have that.
Dialogue: 0,0:29:42.15,0:29:44.98,yin,,0,0,0,,下面我们将要准备视图控制器\N{\fs12}So now we're going to prepare this view controller.
Dialogue: 0,0:29:44.98,0:29:48.08,yin,,0,0,0,,pbpcdtvc.photographer =\N{\fs12}Photos by photographer dot photographer equals the
Dialogue: 0,0:29:48.08,0:29:51.46,yin,,0,0,0,,我们在行中选择的拍照者\N{\fs12}photographer that was selected in our row.
Dialogue: 0,0:29:56.53,0:29:58.44,yin,,0,0,0,,我们会讲到这个\N{\fs12}Uh, yeah, we'll talk about that.
Dialogue: 0,0:29:58.44,0:29:59.58,yin,,0,0,0,,问题是\N{\fs12}So the question is,
Dialogue: 0,0:29:59.58,0:30:04.00,yin,,0,0,0,,我不需要将context传给这个新控制器吗\N{\fs12}don't I have to pass the context to this new controller?
Dialogue: 0,0:30:04.00,0:30:08.99,yin,,0,0,0,,答案是需要 我在这行代码中这样做了\N{\fs12}And the answer is yes, and I'm doing that in this line of code right here.
Dialogue: 0,0:30:08.99,0:30:12.46,yin,,0,0,0,,我们来看看PhotosByPhotographer\N{\fs12}So let's go look at photos by photographer.
Dialogue: 0,0:30:12.46,0:30:15.27,yin,,0,0,0,,PhotosByPhotographer会获得这个拍照者\N{\fs12}So photos by photographer, it's going to get this photographer.
Dialogue: 0,0:30:15.27,0:30:17.03,yin,,0,0,0,,我们在PhotosByPhotographer中需要做什么\N{\fs12}What do we need to do in photos by photographer.
Dialogue: 0,0:30:17.03,0:30:18.49,yin,,0,0,0,,我们主要要做的\N{\fs12}Well, really the main thing we need
Dialogue: 0,0:30:18.49,0:30:20.96,yin,,0,0,0,,是取回该拍照者拍摄的照片\N{\fs12}to do is fetch the photos by that photographer.
Dialogue: 0,0:30:20.96,0:30:24.11,yin,,0,0,0,,我们来看看这个\N{\fs12}So let's go ahead and look at that.
Dialogue: 0,0:30:24.11,0:30:29.21,yin,,0,0,0,,每次我设置拍照者 顺便说下 你们会注意到\N{\fs12}Every time I set the photographer, and you're noticing, by the way,
Dialogue: 0,0:30:29.21,0:30:31.85,yin,,0,0,0,,每次设置公共模型时\N{\fs12}any time you have a public model set, you almost always are going
Dialogue: 0,0:30:31.85,0:30:37.27,yin,,0,0,0,,你几乎总需要setter来更新你的视图\N{\fs12}to use the setter to update your view when someone sets your model.
Dialogue: 0,0:30:37.27,0:30:38.87,yin,,0,0,0,,这是很显然的\N{\fs12}That's kind of an obvious thing.
Dialogue: 0,0:30:38.87,0:30:43.67,yin,,0,0,0,,这里我还要将标题设置为拍照者的名字\N{\fs12}One thing I might do here, by the way, is set my title to be the photographer's name.
Dialogue: 0,0:30:43.67,0:30:45.36,yin,,0,0,0,,这是一个很好的做法\N{\fs12}That would be a good thing, right?
Dialogue: 0,0:30:45.36,0:30:48.52,yin,,0,0,0,,我是一个控制器 显示一系列该拍照者拍的照片\N{\fs12}I'm a controller that's showing a bunch of photos by photographer,
Dialogue: 0,0:30:48.52,0:30:50.40,yin,,0,0,0,,我的标题显然应该是这个\N{\fs12}so my title might want to be that.
Dialogue: 0,0:30:50.40,0:30:52.71,yin,,0,0,0,,不过这里我真正需要做的是 .\N{\fs12}But the real thing I need to do here is
Dialogue: 0,0:30:52.71,0:30:55.97,yin,,0,0,0,,setupFetchedResultsController\N{\fs12}set up my fetched results controller.
Dialogue: 0,0:30:55.97,0:30:59.63,yin,,0,0,0,,这是CDTVC需要做的主要事情\N{\fs12}That's the main thing that CDTVCs need to do,
Dialogue: 0,0:30:59.63,0:31:01.72,yin,,0,0,0,,setupFetchedResultsController\N{\fs12}is set up their fetched results controller,
Dialogue: 0,0:31:01.72,0:31:03.74,yin,,0,0,0,,然后这个会自动工作\N{\fs12}and then they just kind of work automatically right?
Dialogue: 0,0:31:03.74,0:31:08.85,yin,,0,0,0,,为了节省时间 我提前准备好了 它是这样的\N{\fs12}So to save some time, I have that ready to go here, this is what it looks like.
Dialogue: 0,0:31:08.85,0:31:12.34,yin,,0,0,0,,我会一行行讲 别担心\N{\fs12}Let me, I'm going to go through every line of this, don't worry.
Dialogue: 0,0:31:12.34,0:31:15.46,yin,,0,0,0,,首先 回答你的问题 我如何得到context\N{\fs12}So first is answering your question, how do I get my context?
Dialogue: 0,0:31:15.46,0:31:18.02,yin,,0,0,0,,我需要context 没有context就无法取回\N{\fs12}I need a context, I can't fetch without a context.
Dialogue: 0,0:31:18.02,0:31:22.54,yin,,0,0,0,,答案是 我会问拍照者 你处在什么context中\N{\fs12}And the answer is, I'm just going to ask the photographer what context it's in.
Dialogue: 0,0:31:22.54,0:31:24.93,yin,,0,0,0,,有人给了我一个拍照者\N{\fs12}Someone gave me a photographer, and I'm going
Dialogue: 0,0:31:24.93,0:31:27.15,yin,,0,0,0,,我要弄清它来自什么context\N{\fs12}to go find out what the context is from it.
Dialogue: 0,0:31:27.15,0:31:28.72,yin,,0,0,0,,这个拍照者来自某个数据库\N{\fs12}That photographer came from some database,
Dialogue: 0,0:31:28.72,0:31:30.88,yin,,0,0,0,,我希望从相同数据库中获得照片\N{\fs12}I want to get the photos in the same database.
Dialogue: 0,0:31:30.88,0:31:33.40,yin,,0,0,0,,我不需要单独传递context\N{\fs12}So I don't need to pass the context separately,
Dialogue: 0,0:31:33.40,0:31:35.25,yin,,0,0,0,,它会和拍照者一同过来\N{\fs12}it comes along with the photographer.
Dialogue: 0,0:31:35.25,0:31:38.71,yin,,0,0,0,,如果context为nil 要么拍照者为nil\N{\fs12}If the context is nil, so either the photographer is nil,
Dialogue: 0,0:31:38.71,0:31:42.24,yin,,0,0,0,,要么拍照者不来自这个context 这是不可能的\N{\fs12}or for some weird reason the photographer didn't come from a context, that's impossible,
Dialogue: 0,0:31:42.24,0:31:44.92,yin,,0,0,0,,大多数时候 拍照者为nil\N{\fs12}but mostly this will be the photographer is nil,
Dialogue: 0,0:31:44.92,0:31:47.56,yin,,0,0,0,,这时 我会将FetchedResultsController设为nil\N{\fs12}then I'm going to set my fetch controller results to nil, that
Dialogue: 0,0:31:47.56,0:31:48.86,yin,,0,0,0,,我的表格会为空\N{\fs12}blanks out my table.
Dialogue: 0,0:31:48.86,0:31:51.84,yin,,0,0,0,,FetchedResultsController为nil 表格就会是空的\N{\fs12}If you set your FetchedResultsController to nil, then your table's going to be blank.
Dialogue: 0,0:31:51.84,0:31:54.09,yin,,0,0,0,,这就是我要的 你给我一个拍照者\N{\fs12}Which I want in this case, if someone gives me a photographer
Dialogue: 0,0:31:54.09,0:31:56.94,yin,,0,0,0,,没有context 或是给我nil拍照者\N{\fs12}with no context, or gives me nil photographer.
Dialogue: 0,0:31:56.94,0:32:01.76,yin,,0,0,0,,不过其它情况下 我会为所有照片设置取回请求\N{\fs12}But otherwise, I'm going to set up a fetch request for all the photos
Dialogue: 0,0:32:01.76,0:32:07.68,yin,,0,0,0,,我的谓词是 whoTook = 那个拍照者\N{\fs12}where my predicate is who took equals that photographer.
Dialogue: 0,0:32:07.69,0:32:10.32,yin,,0,0,0,,大家应该懂这一行代码吧\N{\fs12}Everyone understand that line of code, hopefully?
Dialogue: 0,0:32:10.32,0:32:12.52,yin,,0,0,0,,如果你开始了作业 你肯定能懂\N{\fs12}If you started on your homework, then you understand it.
Dialogue: 0,0:32:12.52,0:32:17.17,yin,,0,0,0,,然后我将通过照片标题对照片进行排序\N{\fs12}And then I'm going to show sort the photos by the photos title.
Dialogue: 0,0:32:17.17,0:32:19.64,yin,,0,0,0,,也就是通过照片的字典序来排序\N{\fs12}So they're going to be in alphabetical order by the title of the photo.
Dialogue: 0,0:32:19.64,0:32:24.00,yin,,0,0,0,,这是照片上的一个属性 我们会用这个排序\N{\fs12}So this is a property on photo, if you'll recall, and we're going to sort by that.
Dialogue: 0,0:32:24.00,0:32:28.10,yin,,0,0,0,,使用这种类似于finder中的排序\N{\fs12}Use this kind of finder like sorting order, and then that's it.
Dialogue: 0,0:32:28.10,0:32:30.99,yin,,0,0,0,,我创建了这个self.fetchedResultsController\N{\fs12}I just create this fetch, self dot fetch results controller,
Dialogue: 0,0:32:30.99,0:32:33.66,yin,,0,0,0,,它有这个我刚创建的请求\N{\fs12}it's got the request right here that I just created,
Dialogue: 0,0:32:33.66,0:32:35.83,yin,,0,0,0,,这是我从拍照者得到的context\N{\fs12}and the context, which I got from the photographer,
Dialogue: 0,0:32:35.83,0:32:38.77,yin,,0,0,0,,我没有做section那些 这里也没有缓存\N{\fs12}and I'm not doing any sections, and there's no cache.
Dialogue: 0,0:32:40.14,0:32:41.44,yin,,0,0,0,,这里有问题吗\N{\fs12}Any questions about that?
Dialogue: 0,0:32:41.44,0:32:44.28,yin,,0,0,0,,根据上次讲的 但愿大家都理解这个\N{\fs12}Hopefully everyone understands that from last time.
Dialogue: 0,0:32:44.28,0:32:47.89,yin,,0,0,0,,这个PhotosByPhotographer表格还需要做什么\N{\fs12}Now, what else does this photos by photographer table need to do?
Dialogue: 0,0:32:47.89,0:32:49.25,yin,,0,0,0,,没有太多东西了\N{\fs12}Well, not much else, okay,
Dialogue: 0,0:32:49.25,0:32:50.70,yin,,0,0,0,,通过发送FetchedResultsController\N{\fs12}by sending the fetch results controller,
Dialogue: 0,0:32:50.70,0:32:53.91,yin,,0,0,0,,它获得了结果 但它还需要显示这些结果\N{\fs12}it's getting the results, but it has to display those results,
Dialogue: 0,0:32:53.91,0:32:56.08,yin,,0,0,0,,因此它还需要做cellForRowAtIndexPath\N{\fs12}so it has to do cell for row at index path.
Dialogue: 0,0:32:56.08,0:32:59.81,yin,,0,0,0,,这是Core Data表格视图控制器能为你做的一件事\N{\fs12}That's the one thing that core data table view controller cannot do for you,
Dialogue: 0,0:32:59.81,0:33:01.65,yin,,0,0,0,,因为它不知道对象的什么属性\N{\fs12}because it doesn't know what attributes
Dialogue: 0,0:33:01.65,0:33:04.74,yin,,0,0,0,,你想显示在行中 我们需要这样做\N{\fs12}of the object you want to show in the row, so we've got to do that.
Dialogue: 0,0:33:04.76,0:33:07.55,yin,,0,0,0,,它需要做的另外一件事是导航\N{\fs12}The other thing it needs to do is navigation.
Dialogue: 0,0:33:07.55,0:33:09.51,yin,,0,0,0,,因为当我点击一张照片时\N{\fs12}Because when I click on a photo, I want to have
Dialogue: 0,0:33:09.51,0:33:12.13,yin,,0,0,0,,我希望图像视图控制器显示它的图像\N{\fs12}that image view controller show its image, right?
Dialogue: 0,0:33:12.13,0:33:13.41,yin,,0,0,0,,它需要做这两件事\N{\fs12}So it needs to do those two things.
Dialogue: 0,0:33:13.41,0:33:17.14,yin,,0,0,0,,但我不打算把那些放到这个类中\N{\fs12}But I'm not going to put those in this class.
Dialogue: 0,0:33:17.14,0:33:18.61,yin,,0,0,0,,为什么呢\N{\fs12}Why am I not going to put these in the class?
Dialogue: 0,0:33:18.61,0:33:21.86,yin,,0,0,0,,因为这两件事是每个显示照片的\N{\fs12}Because those two things every core data table view controller
Dialogue: 0,0:33:21.86,0:33:25.24,yin,,0,0,0,,Core Data表格视图控制器都想做的\N{\fs12}that shows photos wants to do. Every single one of them.
Dialogue: 0,0:33:25.24,0:33:27.23,yin,,0,0,0,,因此 我要创建一个通用的\N{\fs12}So I'm going to create a generic
Dialogue: 0,0:33:27.23,0:33:31.64,yin,,0,0,0,,照片Core Data表格视图控制器 它知道怎么做\N{\fs12}photos core data table view controller that knows how to do that.
Dialogue: 0,0:33:31.64,0:33:34.46,yin,,0,0,0,,然后我打算让这个类继承它\N{\fs12}Alright? And then I'm going to have this class inherit from it.
Dialogue: 0,0:33:34.46,0:33:36.66,yin,,0,0,0,,我需要强调这个\N{\fs12}So I'm doing this to really emphasize because a couple
Dialogue: 0,0:33:36.66,0:33:39.01,yin,,0,0,0,,因为有些人还不擅于\N{\fs12}of you, a few of you, are still struggling a little bit
Dialogue: 0,0:33:39.01,0:33:43.63,yin,,0,0,0,,使用面向对象的设计方式来创建控制器\N{\fs12}with this concept of using object oriented design to build your controllers.
Dialogue: 0,0:33:43.63,0:33:45.37,yin,,0,0,0,,因此我这里重复了一下\N{\fs12}Okay, so we're going to do it again right here.
Dialogue: 0,0:33:45.37,0:33:49.96,yin,,0,0,0,,我要创建一个新控制器\N{\fs12}So I'm going to create a new controller.
Dialogue: 0,0:33:49.96,0:33:53.10,yin,,0,0,0,,这将是一个新的Core Data视图控制器\N{\fs12}It's going to be a new core data view control,
Dialogue: 0,0:33:53.10,0:33:57.23,yin,,0,0,0,,名字叫PhotosCDTVC\N{\fs12}it's going to be called photos, core data table view controller,
Dialogue: 0,0:33:57.23,0:34:01.33,yin,,0,0,0,,它的全部作用就是显示一些照片\N{\fs12}and its job in life is to show a bunch of photos.
Dialogue: 0,0:34:01.33,0:34:03.93,yin,,0,0,0,,让我们这样做\N{\fs12}So let's do that.
Dialogue: 0,0:34:03.93,0:34:07.87,yin,,0,0,0,,我们来看看它的公共API是怎样的 这里\N{\fs12}Let's find out what its public API is, okay, here's its public API.
Dialogue: 0,0:34:07.87,0:34:11.61,yin,,0,0,0,,这个其实没有公共API 原因在于\N{\fs12}This turns out to have no public API because all you need to do
Dialogue: 0,0:34:11.61,0:34:17.93,yin,,0,0,0,,它只需要关联fetchedResultsController\N{\fs12}to make this thing work is hook up fetched results controller
Dialogue: 0,0:34:17.93,0:34:21.69,yin,,0,0,0,,到任何照片取回请求\N{\fs12}to any photo fetch request.
Dialogue: 0,0:34:21.69,0:34:24.89,yin,,0,0,0,,这是一个Core Data视图控制器\N{\fs12}This thing is a core data table view controller,
Dialogue: 0,0:34:24.89,0:34:27.36,yin,,0,0,0,,因此它有这个fetchedResultsController的东西\N{\fs12}so it has this fetched results controller thing.
Dialogue: 0,0:34:27.36,0:34:29.66,yin,,0,0,0,,只要你将这个fetchedResultsController\N{\fs12}As long as you set that fetch results controller
Dialogue: 0,0:34:29.66,0:34:34.02,yin,,0,0,0,,设置到任何照片取回请求 那么这个类就会\N{\fs12}to any photo request, then the job of this class is going to be
Dialogue: 0,0:34:34.02,0:34:37.06,yin,,0,0,0,,显示它并让你从它开始进行导航\N{\fs12}to display it and let you navigate from it as well.
Dialogue: 0,0:34:37.06,0:34:38.14,yin,,0,0,0,,通用\N{\fs12}Generic.
Dialogue: 0,0:34:38.14,0:34:41.95,yin,,0,0,0,,对于任何照片都适用 你什么都不需要设置\N{\fs12}Work for any photos, you don't even have to set anything except
Dialogue: 0,0:34:41.95,0:34:44.29,yin,,0,0,0,,除了fetchedResultsController\N{\fs12}for the fetch results controller.
Dialogue: 0,0:34:44.29,0:34:48.64,yin,,0,0,0,,好 来看看这个的实现 很简单\N{\fs12}Alright, so let's look at this guy's implementation, pretty straightforward here.
Dialogue: 0,0:34:48.64,0:34:50.62,yin,,0,0,0,,这些都不需要\N{\fs12}Don't need any of this,
Dialogue: 0,0:34:51.86,0:34:55.81,yin,,0,0,0,,这里 我们只需要实现两个东西\N{\fs12}so here we got to just implement those two things,
Dialogue: 0,0:34:55.81,0:34:57.73,yin,,0,0,0,,cellForRowAtIndexPath和导航\N{\fs12}cellForRowAtIndexPath and navigation.
Dialogue: 0,0:34:57.73,0:35:01.91,yin,,0,0,0,,我们来看cellForRowAtIndexPath\N{\fs12}So let's look at cellForRowAtIndexPath.
Dialogue: 0,0:35:01.91,0:35:05.42,yin,,0,0,0,,像这样 表格视图 cellForRowAtIndexPath\N{\fs12}Looks like this, table view, cellForRowAtIndexPath,
Dialogue: 0,0:35:05.42,0:35:08.27,yin,,0,0,0,,当然 我们只需要获取单元格\N{\fs12}and of course, we'll just get the cell.
Dialogue: 0,0:35:08.27,0:35:10.91,yin,,0,0,0,,这段代码 你们应该非常熟悉了\N{\fs12}Okay this code should be very, very familiar to you.
Dialogue: 0,0:35:10.91,0:35:13.80,yin,,0,0,0,,到表格视图 dequeue…\N{\fs12}Go to the table view, we dequeue, okay,
Dialogue: 0,0:35:13.82,0:35:16.67,yin,,0,0,0,,这个我叫作Photo Cell\N{\fs12}I'm going to call this photo cell.
Dialogue: 0,0:35:16.67,0:35:19.51,yin,,0,0,0,,很有趣 这是一个通用类\N{\fs12}Now it's interesting, this is a generic class,
Dialogue: 0,0:35:19.51,0:35:23.02,yin,,0,0,0,,它使用Photo Cell来再利用\N{\fs12}and it's using photo cell as it's reuse thing,
Dialogue: 0,0:35:23.02,0:35:26.98,yin,,0,0,0,,我需要将这个信息放入到它的公共头文件\N{\fs12}so I probably want to put that information into its public header file.
Dialogue: 0,0:35:26.98,0:35:28.72,yin,,0,0,0,,这里我说\N{\fs12}So I'm probably here going to say
Dialogue: 0,0:35:28.73,0:35:36.86,yin,,0,0,0,,使用Photo Cell作为表格视图单元格再利用id\N{\fs12}use photo cell as your table view cells reuse ID.
Dialogue: 0,0:35:36.86,0:35:38.95,yin,,0,0,0,,这样任何使用这个类的人\N{\fs12}That way anyone who is using my class
Dialogue: 0,0:35:38.96,0:35:40.63,yin,,0,0,0,,就无需看它的实现\N{\fs12}doesn't have to go look at its implementation,
Dialogue: 0,0:35:40.63,0:35:43.41,yin,,0,0,0,,他们可以从头文件获得这个信息\N{\fs12}they can just get this information from the header file and do it.
Dialogue: 0,0:35:43.41,0:35:44.88,yin,,0,0,0,,确保我们做了这个\N{\fs12}So let's make sure we do that.
Dialogue: 0,0:35:44.88,0:35:49.16,yin,,0,0,0,,回到这里 这是我们的PhotosByPhotographer单元格\N{\fs12}Let's go back here, here's our photos by photographer cell.
Dialogue: 0,0:35:49.16,0:35:53.28,yin,,0,0,0,,我们看看它的单元格再利用标识符是什么\N{\fs12}Let's see what its cells reuse identifier is,
Dialogue: 0,0:35:53.28,0:35:56.04,yin,,0,0,0,,答案是 哦 Flickr Photo Cell\N{\fs12}and the answer is, oooh, Flickr photo cell.
Dialogue: 0,0:35:56.04,0:35:59.10,yin,,0,0,0,,因为这是从Shutterbug借用的 那里是Flickr\N{\fs12}Because we stole this from Shutterbug, and Shutterbug is a Flickr thing,
Dialogue: 0,0:35:59.10,0:36:00.46,yin,,0,0,0,,我们这里是Core Data数据库\N{\fs12}whereas we are a core database thing.
Dialogue: 0,0:36:00.46,0:36:02.90,yin,,0,0,0,,把Flickr这个词删掉\N{\fs12}So I'm going to get rid of that word Flickr, and make sure
Dialogue: 0,0:36:02.90,0:36:06.43,yin,,0,0,0,,这就行了 Photo Cell\N{\fs12}that this is what it's supposed to be, photo cell.
Dialogue: 0,0:36:06.43,0:36:09.65,yin,,0,0,0,,大家都理解了吗\N{\fs12}Everyone understand that?
Dialogue: 0,0:36:09.65,0:36:10.52,yin,,0,0,0,,回到这里\N{\fs12}So back to here.
Dialogue: 0,0:36:10.52,0:36:15.55,yin,,0,0,0,,有了这个Photo Cell 然后怎么做呢\N{\fs12}So now I've got this photo cell, okay, what am I going to do with it?
Dialogue: 0,0:36:15.55,0:36:19.94,yin,,0,0,0,,我需要获得这个单元格中显示的照片\N{\fs12}Well, I need to get the photo that I'm supposed to show in this cell.
Dialogue: 0,0:36:19.94,0:36:26.97,yin,,0,0,0,,这是Photo * 显然 我们需要导入Photo\N{\fs12}So that's photo star and of course we need to import photo.
Dialogue: 0,0:36:26.97,0:36:30.27,yin,,0,0,0,,photo = [self.fetchedResultsController\N{\fs12}Photo equals self dot fetch results controller,
Dialogue: 0,0:36:30.27,0:36:34.10,yin,,0,0,0,,objectAtIndexPath:indexPath]\N{\fs12}object at index path, the index path.
Dialogue: 0,0:36:34.10,0:36:35.71,yin,,0,0,0,,也就是这个参数\N{\fs12}This argument right here.
Dialogue: 0,0:36:35.71,0:36:39.34,yin,,0,0,0,,你们应该能够完全理解这个\N{\fs12}This, hopefully, is completely you understand this.
Dialogue: 0,0:36:39.34,0:36:41.80,yin,,0,0,0,,然后我需要设置textLabel\N{\fs12}Now, I just need to set the text label.
Dialogue: 0,0:36:41.80,0:36:45.02,yin,,0,0,0,,其文本设为照片的标题\N{\fs12}I'm going to set it's text to be the photo's title,
Dialogue: 0,0:36:45.02,0:36:50.85,yin,,0,0,0,,然后设置detail 设为照片的副标题\N{\fs12}and let's set the detail, the subtext, the subtitle thing, to the photo's subtitle.
Dialogue: 0,0:36:50.85,0:36:52.46,yin,,0,0,0,,然后返回单元格\N{\fs12}And return the cell.
Dialogue: 0,0:36:52.46,0:36:55.54,yin,,0,0,0,,可见 写cellForRowAtIndexPath\N{\fs12}So you can see that writing cell for row index path
Dialogue: 0,0:36:55.54,0:36:57.86,yin,,0,0,0,,在Core Data表格视图单元格中很简单\N{\fs12}is pretty easy when it's a core data table view cell,
Dialogue: 0,0:36:57.86,0:37:02.07,yin,,0,0,0,,因为通常对于行中的对象 你可以得到一行代码\N{\fs12}because usually the object in the row which you can get one line of code
Dialogue: 0,0:37:02.07,0:37:04.32,yin,,0,0,0,,里面有你要的 你只需要展示它\N{\fs12}has what you want, you just display it.
Dialogue: 0,0:37:04.32,0:37:07.03,yin,,0,0,0,,下面 我们来讨论导航\N{\fs12}Now, let's talk about the navigation.
Dialogue: 0,0:37:07.03,0:37:10.29,yin,,0,0,0,,我说了我有这个通用表格视图导航的东西\N{\fs12}I told you I have this generic table view navigation thing,
Dialogue: 0,0:37:10.29,0:37:12.23,yin,,0,0,0,,这里我重新使用了它\N{\fs12}I'm going to use it again right here.
Dialogue: 0,0:37:12.25,0:37:15.31,yin,,0,0,0,,同之前那个里面完全相同\N{\fs12}So it's the exact same thing that I put in the other
Dialogue: 0,0:37:15.31,0:37:19.02,yin,,0,0,0,,我只需要确保 这个同我们这里相匹配\N{\fs12}one, I just have to make sure this is appropriate to what we're doing here.
Dialogue: 0,0:37:19.02,0:37:23.98,yin,,0,0,0,,这是照片 ManagedObject还是Photo *photo\N{\fs12}So this is photos, again, so the managed objects are going to be photo star photo, okay,
Dialogue: 0,0:37:23.98,0:37:25.88,yin,,0,0,0,,这样我就从行中得到了照片\N{\fs12}so now I got the photo out of the row.
Dialogue: 0,0:37:25.88,0:37:28.12,yin,,0,0,0,,这个在导航中做了什么\N{\fs12}What does this thing do in terms of navigation?
Dialogue: 0,0:37:28.12,0:37:29.50,yin,,0,0,0,,它会导航\N{\fs12}Well, it will navigate
Dialogue: 0,0:37:29.50,0:37:32.47,yin,,0,0,0,,到一个图像视图控制器 并展示照片\N{\fs12}to an image view controller and show the image.
Dialogue: 0,0:37:32.47,0:37:35.61,yin,,0,0,0,,让我们导入ImageViewController\N{\fs12}Alright? So let's import image view controller,
Dialogue: 0,0:37:35.61,0:37:38.42,yin,,0,0,0,,因为这就是我们要导航到的\N{\fs12}because that's what we're going to be navigating to.
Dialogue: 0,0:37:38.42,0:37:42.32,yin,,0,0,0,,到下面这里 isKindOfClass ImageViewController\N{\fs12}Get down here, kind of class image view controller,
Dialogue: 0,0:37:42.32,0:37:44.68,yin,,0,0,0,,还是一样 这里我可以跳过segue这些\N{\fs12}again I could probably skip the segue thing here,
Dialogue: 0,0:37:44.68,0:37:47.01,yin,,0,0,0,,因为如果我要导航到一个ImageViewController\N{\fs12}because if I'm navigating to an image view controller
Dialogue: 0,0:37:47.01,0:37:48.52,yin,,0,0,0,,从这个照片的视图控制器\N{\fs12}from this photos view controller,
Dialogue: 0,0:37:48.52,0:37:50.41,yin,,0,0,0,,我显然需要展示我的图像\N{\fs12}I almost certainly want to show my image.
Dialogue: 0,0:37:50.41,0:37:52.27,yin,,0,0,0,,这就是我要做的\N{\fs12}There's really nothing else I might want to do.
Dialogue: 0,0:37:52.27,0:37:53.68,yin,,0,0,0,,我来做这个\N{\fs12}So we'll just do that.
Dialogue: 0,0:37:53.68,0:37:56.24,yin,,0,0,0,,ImageViewController *ivc =\N{\fs12}So image view controller IVC equals
Dialogue: 0,0:37:56.24,0:37:59.18,yin,,0,0,0,,(ImageViewController *)vc\N{\fs12}image view controller VC,
Dialogue: 0,0:37:59.19,0:38:03.73,yin,,0,0,0,,然后我们只需要设置ivc的imageURL\N{\fs12}and we just need to set the IVC's image URL
Dialogue: 0,0:38:03.73,0:38:06.24,yin,,0,0,0,,等于一个NSURL\N{\fs12}equal to an NSURL
Dialogue: 0,0:38:06.24,0:38:09.68,yin,,0,0,0,,使用photo.imageURL\N{\fs12}with the photos image URL.
Dialogue: 0,0:38:09.68,0:38:11.23,yin,,0,0,0,,我这样做显然是因为\N{\fs12}The reason I have to do this, of course,
Dialogue: 0,0:38:11.23,0:38:13.99,yin,,0,0,0,,图像URL无法存储在数据库中\N{\fs12}is because you can't store an image URL in the database,
Dialogue: 0,0:38:13.99,0:38:15.74,yin,,0,0,0,,它只能以字符串形式存储\N{\fs12}we stored it as a string,
Dialogue: 0,0:38:15.75,0:38:17.91,yin,,0,0,0,,这会将它转化为URL\N{\fs12}so this converts it into a URL
Dialogue: 0,0:38:17.91,0:38:21.66,yin,,0,0,0,,因为图像视图控制器公共API用的是URL\N{\fs12}because image view controller takes a URL as it's public API.
Dialogue: 0,0:38:21.66,0:38:26.90,yin,,0,0,0,,我这里还可以写 title等于照片标题\N{\fs12}I could also do something here, title equals the photo's title.
Dialogue: 0,0:38:26.90,0:38:31.24,yin,,0,0,0,,因为图像视图控制器只有一个imageURL\N{\fs12}Because really the image view controller, since it only has an image URL,
Dialogue: 0,0:38:31.24,0:38:32.58,yin,,0,0,0,,它没有足够信息\N{\fs12}it doesn't have enough information
Dialogue: 0,0:38:32.58,0:38:36.60,yin,,0,0,0,,设置自身标题 同另一个一样 也就是拍照者\N{\fs12}to set its own title, like the other one did, the photographer,
Dialogue: 0,0:38:36.60,0:38:41.43,yin,,0,0,0,,我们创建的这个的子类\N{\fs12}this one-- this guy's subclass that we created,
Dialogue: 0,0:38:41.43,0:38:45.60,yin,,0,0,0,,这个无法做到 因此我们帮它设置标题\N{\fs12}it knew how to do it, but this one really can't so we'll help it out and set its title.
Dialogue: 0,0:38:45.60,0:38:48.18,yin,,0,0,0,,大家都理解了吗\N{\fs12}Everyone understand that?
Dialogue: 0,0:38:48.18,0:38:51.55,yin,,0,0,0,,现在我们有了这个很好的通用照片显示\N{\fs12}So now we have this nice generic photos showing thing.
Dialogue: 0,0:38:51.55,0:38:57.24,yin,,0,0,0,,下面再让PhotosByPhotographer继承它\N{\fs12}Let's go ahead and make our photos by photographer inherit from it, instead.
Dialogue: 0,0:38:57.24,0:39:03.33,yin,,0,0,0,,PhotosCDTVC PhotosCDTVC\N{\fs12}Photos CDTVC, photos CDTVC.
Dialogue: 0,0:39:03.33,0:39:08.34,yin,,0,0,0,,它会继承cellForRowAtIndexPath和导航的能力\N{\fs12}So now it just inherited the ability to do cellForRowAtIndexPath and navigation.
Dialogue: 0,0:39:08.34,0:39:11.61,yin,,0,0,0,,而且它仍然会自己去进行取回\N{\fs12}Okay, and it still does the fetch itself.
Dialogue: 0,0:39:11.61,0:39:14.14,yin,,0,0,0,,它决定了显示什么照片\N{\fs12}So it's the one determining what photos show up,
Dialogue: 0,0:39:14.14,0:39:16.50,yin,,0,0,0,,它的超类则将它们放到行中\N{\fs12}it super classes the one, putting them in the rows.
Dialogue: 0,0:39:16.50,0:39:19.13,yin,,0,0,0,,都理解了这里是在做什么吗\N{\fs12}Everyone understand what I'm doing there?
Dialogue: 0,0:39:20.30,0:39:22.38,yin,,0,0,0,,好 这很棒\N{\fs12}Okay, so that's awesome.
Dialogue: 0,0:39:22.38,0:39:26.46,yin,,0,0,0,,大家都知道如何导航 都知道\N{\fs12}Everybody kind of knows how to navigate, everyone knows how
Dialogue: 0,0:39:26.46,0:39:30.72,yin,,0,0,0,,如何加载自身 也许我们就只需要做这么多了\N{\fs12}to load themselves up, and might be that's all we need to do?
Dialogue: 0,0:39:30.72,0:39:32.27,yin,,0,0,0,,看看还有没有别的什么\N{\fs12}Let's see if I can remember anything else.
Dialogue: 0,0:39:32.27,0:39:34.34,yin,,0,0,0,,应该就这些了 看看能否工作\N{\fs12}I think that's it. So let's go see if we're working.
Dialogue: 0,0:39:34.34,0:39:38.18,yin,,0,0,0,,我们在iPad上试试 在真正的iPad上试\N{\fs12}Let's try this on the iPad, because we just built...whoops, let's do it on the real iPad.
Dialogue: 0,0:39:38.18,0:39:43.32,yin,,0,0,0,,我们刚创建了这个 让我们来试试\N{\fs12}We just built this, so let's go ahead and do that and see
Dialogue: 0,0:39:43.32,0:39:46.76,yin,,0,0,0,,看有没有bug 能否正常工作\N{\fs12}if we have any bugs, things not working.
Dialogue: 0,0:39:46.76,0:39:51.58,yin,,0,0,0,,或许我们忘记了什么 或许有些segue没设对\N{\fs12}Maybe we didn't forget, we didn't set some of our segues right or something like that,
Dialogue: 0,0:39:51.58,0:39:53.33,yin,,0,0,0,,看看结果怎样\N{\fs12}so we can see what's going on here.
Dialogue: 0,0:39:53.33,0:39:55.42,yin,,0,0,0,,这是Photomania\N{\fs12}So here it's Photo Mania,
Dialogue: 0,0:39:55.42,0:39:59.61,yin,,0,0,0,,但愿它在从Flickr取回数据并放入到拍照者表格\N{\fs12}so hopefully it's fetching from Flickr right now into this photographer table,
Dialogue: 0,0:39:59.61,0:40:01.13,yin,,0,0,0,,它这样做了 很好\N{\fs12}and it is, that's very good.
Dialogue: 0,0:40:01.13,0:40:02.91,yin,,0,0,0,,这里 我们得到了拍照者\N{\fs12}So here, we have photographers, right?
Dialogue: 0,0:40:02.91,0:40:04.64,yin,,0,0,0,,这就是Photomania的作用\N{\fs12}That's what Photo Mania does.
Dialogue: 0,0:40:04.64,0:40:07.32,yin,,0,0,0,,Shutterbug取回的是照片 显示的是照片标题\N{\fs12}Shutterbug fetched the photos and showed you the photos titles,
Dialogue: 0,0:40:07.32,0:40:10.75,yin,,0,0,0,,而Photomania取回照片 显示的则是拍照者\N{\fs12}Photo Mania fetches the photos and then shows you the photographer.
Dialogue: 0,0:40:10.75,0:40:12.23,yin,,0,0,0,,我们可以看\N{\fs12}And we can look and see, some
Dialogue: 0,0:40:12.23,0:40:14.72,yin,,0,0,0,,有些拍照者有三张照片 有些有九张\N{\fs12}of our photographers have three photos, some nine,
Dialogue: 0,0:40:14.72,0:40:16.78,yin,,0,0,0,,让我们来选这个九张的\N{\fs12}so let's pick this guy, he has nine.
Dialogue: 0,0:40:16.78,0:40:18.74,yin,,0,0,0,,再选这个拍了三张的\N{\fs12}Let's pick this guy, he has three.
Dialogue: 0,0:40:18.74,0:40:20.32,yin,,0,0,0,,我们可以点选其中一张\N{\fs12}And we can click on one of these.
Dialogue: 0,0:40:20.32,0:40:24.21,yin,,0,0,0,,但愿没什么… 这是里约热内卢 或许我们该选点别的\N{\fs12}Again, hopefully nothing, this is Rio De Janeiro, maybe we'll pick somewhere else.
Dialogue: 0,0:40:24.21,0:40:26.38,yin,,0,0,0,,这里没有标题\N{\fs12}No, there's no titles.
Dialogue: 0,0:40:26.38,0:40:27.37,yin,,0,0,0,,这个呢\N{\fs12}Uh, how about this one?
Dialogue: 0,0:40:27.37,0:40:28.78,yin,,0,0,0,,也没有标题\N{\fs12}Nah, there's no titles.
Dialogue: 0,0:40:28.78,0:40:30.14,yin,,0,0,0,,还是来看里约\N{\fs12}Okay, we'll do Rio.
Dialogue: 0,0:40:30.14,0:40:32.35,yin,,0,0,0,,但愿里约没有什么糟糕的东西\N{\fs12}Hopefully Rio is not going to do anything bad.
Dialogue: 0,0:40:32.35,0:40:33.61,yin,,0,0,0,,就点它吧\N{\fs12}Here we go.
Dialogue: 0,0:40:33.61,0:40:35.80,yin,,0,0,0,,这是里约 很棒嘛\N{\fs12}There's Rio. Oh, good! Not bad.
Dialogue: 0,0:40:35.80,0:40:39.30,yin,,0,0,0,,这就是我们的图像视图控制器 它工作得很好\N{\fs12}Okay, so there's our image view controller, so this all worked great.
Dialogue: 0,0:40:39.30,0:40:42.83,yin,,0,0,0,,但愿在竖屏模式下也能正常工作\N{\fs12}So hopefully it works here in portrait mode too
Dialogue: 0,0:40:42.83,0:40:44.84,yin,,0,0,0,,好像也能正常工作\N{\fs12}and it does seem to be working there too.
Dialogue: 0,0:40:46.98,0:40:51.46,yin,,0,0,0,,好 这是这个\N{\fs12}Okay, There we go. So that's that.
Dialogue: 0,0:40:51.48,0:40:54.56,yin,,0,0,0,,你们都了解了 它工作得很好\N{\fs12}You guys all got that? It worked perfectly.
Dialogue: 0,0:40:54.56,0:40:58.32,yin,,0,0,0,,下面我们就可以进入到下一个内容了\N{\fs12}So now we can quickly move on to the next thing we're going to show,
Dialogue: 0,0:40:58.32,0:41:03.77,yin,,0,0,0,,下面我们要展示的是…\N{\fs12}which is we're going to show how to put a little--
Dialogue: 0,0:41:03.78,0:41:07.45,yin,,0,0,0,,这里用横屏模式\N{\fs12}put it in landscape mode just to show here--
Dialogue: 0,0:41:07.45,0:41:10.81,yin,,0,0,0,,在这只鸭子的鼻子上面\N{\fs12}so right above where this duck's nose is, okay,
Dialogue: 0,0:41:10.81,0:41:14.32,yin,,0,0,0,,我想放一个小按钮 叫URL 点击它时\N{\fs12}I'm going to put a little button called URL, and when I click
Dialogue: 0,0:41:14.32,0:41:16.96,yin,,0,0,0,,它会弹窗 然后在弹窗中\N{\fs12}on it, it's going to do a popover, and in that popover,
Dialogue: 0,0:41:16.96,0:41:19.79,yin,,0,0,0,,它会展示这里显示的URL\N{\fs12}it's going to show me the URL that's showing here,
Dialogue: 0,0:41:19.79,0:41:22.25,yin,,0,0,0,,文本 也就是http://那些\N{\fs12}the text of it, you know, http slash something.
Dialogue: 0,0:41:22.25,0:41:25.55,yin,,0,0,0,,这里主要是要给你们演示如何弹窗\N{\fs12}Okay, so this is mostly to show you how to do popovers.
Dialogue: 0,0:41:25.55,0:41:28.84,yin,,0,0,0,,回头看看怎么做这个\N{\fs12}So let's go back and see how we would do that.
Dialogue: 0,0:41:28.84,0:41:31.94,yin,,0,0,0,,其实很简单\N{\fs12}This turns out to be quite straightforward.
Dialogue: 0,0:41:31.94,0:41:35.62,yin,,0,0,0,,这是我们的UI 我们希望做的是\N{\fs12}So here we are, here's our UI, and what we want
Dialogue: 0,0:41:35.62,0:41:39.98,yin,,0,0,0,,在这里加一个小按钮 显示URL\N{\fs12}to do is add a little button here that does URL.
Dialogue: 0,0:41:40.00,0:41:43.92,yin,,0,0,0,,我只需要把这个栏按钮项目拖到栏上这里\N{\fs12}Okay. So we're going to drag this bar button item into the bar here,
Dialogue: 0,0:41:43.92,0:41:45.55,yin,,0,0,0,,我把它称作URL\N{\fs12}and we're going to call it URL.
Dialogue: 0,0:41:45.55,0:41:47.48,yin,,0,0,0,,这将是一个栏按钮项目\N{\fs12}Okay, so this is going to be a bar button item
Dialogue: 0,0:41:47.48,0:41:51.74,yin,,0,0,0,,点击它时会出现一个弹窗在这里\N{\fs12}that when you click on it, it's going to bring up a popover here,
Dialogue: 0,0:41:51.74,0:41:54.27,yin,,0,0,0,,一个小的视图控制器会出现\N{\fs12}a little view or view controller that's going
Dialogue: 0,0:41:54.27,0:41:56.62,yin,,0,0,0,,覆盖到其它东西之上\N{\fs12}to appear, overlapping everything else.
Dialogue: 0,0:41:56.62,0:41:59.09,yin,,0,0,0,,怎么做到呢\N{\fs12}So how do we do that?
Dialogue: 0,0:41:59.09,0:42:01.09,yin,,0,0,0,,答案是这样的\N{\fs12}And the answer for that is
Dialogue: 0,0:42:01.09,0:42:05.67,yin,,0,0,0,,我们创建一个全新的视图控制器\N{\fs12}that we create an entirely new view controller.
Dialogue: 0,0:42:05.67,0:42:09.24,yin,,0,0,0,,弹窗segue是常规segue\N{\fs12}A popup, a popover segue is a normal segue.
Dialogue: 0,0:42:09.24,0:42:11.14,yin,,0,0,0,,segue到一个新的视图控制器\N{\fs12}You segue to a new view controller.
Dialogue: 0,0:42:11.14,0:42:13.31,yin,,0,0,0,,我们将创建一个新视图控制器用于显示这里的URL\N{\fs12}So we're going to create a new view controller that's going
Dialogue: 0,0:42:13.31,0:42:17.00,yin,,0,0,0,,我们将创建一个新视图控制器用于显示这里的URL\N{\fs12}to display the URL that's showing here in image view controller.
Dialogue: 0,0:42:17.00,0:42:20.50,yin,,0,0,0,,如何创建一个新视图控制器呢 你们都知道怎么做\N{\fs12}Alright? So how do we create a new view controller, you all know how to do that.
Dialogue: 0,0:42:20.50,0:42:23.28,yin,,0,0,0,,到这里 到最上面\N{\fs12}We go into here, we go up to the top,
Dialogue: 0,0:42:23.28,0:42:25.75,yin,,0,0,0,,将一个视图控制器拖出来\N{\fs12}we grab a view controller and we drag it out.
Dialogue: 0,0:42:25.75,0:42:29.09,yin,,0,0,0,,这个控制器太大了\N{\fs12}Now this view controller is quite big,
Dialogue: 0,0:42:29.09,0:42:32.06,yin,,0,0,0,,把它弄好看一些 这是我们的视图控制器\N{\fs12}let's make it so we can see a little better. So here's our view controller.
Dialogue: 0,0:42:32.06,0:42:34.23,yin,,0,0,0,,这就是弹窗的视图控制器\N{\fs12}So this is the view controller, it's going to pop over.
Dialogue: 0,0:42:34.23,0:42:39.72,yin,,0,0,0,,我们下面将通过control拖动创建一个segue\N{\fs12}And we then just create a segue by control dragging,
Dialogue: 0,0:42:39.72,0:42:42.20,yin,,0,0,0,,按住control 然后拖动\N{\fs12}so I'm holding down control, and dragging,
Dialogue: 0,0:42:42.20,0:42:46.27,yin,,0,0,0,,同其它segue一样 这将是一个弹窗segue\N{\fs12}just like any other segue, and this is going to be a popover segue.
Dialogue: 0,0:42:46.27,0:42:48.85,yin,,0,0,0,,这是我们第一次选popover\N{\fs12}So this is the first time we've ever done popover.
Dialogue: 0,0:42:48.85,0:42:54.34,yin,,0,0,0,,创建了弹窗segue之后 你就可以\N{\fs12}So now once you create a popover segue, you can now kind
Dialogue: 0,0:42:54.34,0:42:58.60,yin,,0,0,0,,以任何你想要的方式创建这个视图控制器\N{\fs12}of create this view controller how ever you want, it's a look, to pop over.
Dialogue: 0,0:42:58.60,0:43:01.65,yin,,0,0,0,,你需要设置它的大小\N{\fs12}And one of the things you might want to set it its size.
Dialogue: 0,0:43:01.65,0:43:04.97,yin,,0,0,0,,毕竟弹窗不能这么大\N{\fs12}Because if this is our popover size, that's not going
Dialogue: 0,0:43:04.97,0:43:07.73,yin,,0,0,0,,否则整个屏幕都被盖住就太糟糕了\N{\fs12}to be good. It's going to cover our whole screen, that's going to be horrendous.
Dialogue: 0,0:43:07.73,0:43:11.55,yin,,0,0,0,,显示URL只需要很小的弹窗\N{\fs12}So display URL, we only need it to be small.
Dialogue: 0,0:43:11.55,0:43:14.37,yin,,0,0,0,,一行就行了 不换行\N{\fs12}And it's nice to have URL on one line so it's not wrapping
Dialogue: 0,0:43:14.37,0:43:15.93,yin,,0,0,0,,URL有很多斜杠\N{\fs12}because URLs have all those slashes.
Dialogue: 0,0:43:15.95,0:43:19.39,yin,,0,0,0,,我们试试一个很宽的 让它能容纳在一行内\N{\fs12}So let's try to make a really wide one that will hopefully fit in one line.
Dialogue: 0,0:43:19.39,0:43:22.84,yin,,0,0,0,,如何改变视图控制器的大小呢\N{\fs12}So how do we change the size of a view controller?
Dialogue: 0,0:43:22.84,0:43:24.58,yin,,0,0,0,,一般的视图控制器\N{\fs12}Because all our other view controllers have kind
Dialogue: 0,0:43:24.58,0:43:27.99,yin,,0,0,0,,都可以用这些模拟衡量来推测大小\N{\fs12}of inferred their size using these simulated metrics right
Dialogue: 0,0:43:27.99,0:43:30.50,yin,,0,0,0,,这里看到推断大小了吗\N{\fs12}here, you see this inferred size?
Dialogue: 0,0:43:30.50,0:43:34.02,yin,,0,0,0,,但弹窗控制器很特殊\N{\fs12}But a pop up view, a popover's controller is
Dialogue: 0,0:43:34.02,0:43:36.53,yin,,0,0,0,,你可以改变它的大小\N{\fs12}special in that you can change its size,
Dialogue: 0,0:43:36.53,0:43:41.11,yin,,0,0,0,,要想这样做 Xcode必须先知道它是弹窗视图\N{\fs12}notice that you won't be able to do this until X code knows that this is a pop up view,
Dialogue: 0,0:43:41.11,0:43:42.76,yin,,0,0,0,,弹窗视图控制器 或者至少\N{\fs12}popover view controller, or at least knows
Dialogue: 0,0:43:42.76,0:43:46.08,yin,,0,0,0,,这个视图控制器处在弹窗环境中\N{\fs12}that this view controller is going to be in a popover context
Dialogue: 0,0:43:46.08,0:43:49.01,yin,,0,0,0,,因为这个弹窗segue\N{\fs12}because of this segue right here, this popover segue.
Dialogue: 0,0:43:49.01,0:43:52.84,yin,,0,0,0,,这样做之后 进入视图控制器\N{\fs12}Once you do that, if you go to your view controller
Dialogue: 0,0:43:52.84,0:43:56.71,yin,,0,0,0,,选择它的视图 self.view 你就可以到尺度这里\N{\fs12}and select its view, self dot view, then you can go dimensions
Dialogue: 0,0:43:56.71,0:43:58.80,yin,,0,0,0,,编辑这些东西\N{\fs12}and these will be editable.
Dialogue: 0,0:43:58.80,0:43:59.93,yin,,0,0,0,,宽和高\N{\fs12}The width and height.
Dialogue: 0,0:43:59.93,0:44:04.62,yin,,0,0,0,,例如这里可以设为600像素宽 40像素高\N{\fs12}So, for example, we could make this 600 wide, and maybe 40 pixels high.
Dialogue: 0,0:44:04.62,0:44:07.76,yin,,0,0,0,,或许看起来会不错\N{\fs12}Which is probably a pretty good looking thing.
Dialogue: 0,0:44:07.76,0:44:10.63,yin,,0,0,0,,这就意味着 点击URL按钮时\N{\fs12}So that means when we press this URL button it's going to pop
Dialogue: 0,0:44:10.63,0:44:13.79,yin,,0,0,0,,这个弹窗会出现 大小很合适\N{\fs12}over and be something like that, that's pretty good size,
Dialogue: 0,0:44:13.79,0:44:18.95,yin,,0,0,0,,600是弹窗最大的允许值\N{\fs12}600 is the widest they will allow you to make a popover.
Dialogue: 0,0:44:18.95,0:44:24.35,yin,,0,0,0,,如果指定数值大于600 它这里估计只会显示600\N{\fs12}So I think if you specify more than 600, it's only going to show up 600.
Dialogue: 0,0:44:24.35,0:44:26.75,yin,,0,0,0,,高度可以任意设置\N{\fs12}Alright, and you can make it any height you want,
Dialogue: 0,0:44:26.75,0:44:30.73,yin,,0,0,0,,不过显然 你不希望它太大 否则所有内容都会被覆盖\N{\fs12}although obviously you wouldn't want it too big, cover up all content underneath.
Dialogue: 0,0:44:30.73,0:44:33.58,yin,,0,0,0,,弹窗会覆盖它下面的一切东西\N{\fs12}It doesn't really make a-- a popover that would cover up everything, you would want
Dialogue: 0,0:44:33.58,0:44:36.79,yin,,0,0,0,,你也可以使用别的segue 例如modal segue\N{\fs12}to use a different kind of segue, a modal segue in that case.
Dialogue: 0,0:44:36.79,0:44:41.45,yin,,0,0,0,,我们有了这个 这是一个普通的视图控制器\N{\fs12}So we have this, and then this is just a normal view controller
Dialogue: 0,0:44:41.45,0:44:43.65,yin,,0,0,0,,我们有了这个 这是一个普通的视图控制器\N{\fs12}otherwise, this little view controller thing.
Dialogue: 0,0:44:43.65,0:44:47.87,yin,,0,0,0,,我们需要创建一个视图控制器的子类 成为它的子类\N{\fs12}So we need to create a subclass of view controller to be its subclass.
Dialogue: 0,0:44:47.87,0:44:49.92,yin,,0,0,0,,我们这样做\N{\fs12}So let's do that.
Dialogue: 0,0:44:49.92,0:44:52.68,yin,,0,0,0,,这个视图控制器做什么呢\N{\fs12}And what does this view controller do?
Dialogue: 0,0:44:52.68,0:44:56.35,yin,,0,0,0,,这是一个普通的UIViewController\N{\fs12}Well, it's a normal UI view controller.
Dialogue: 0,0:44:59.80,0:45:02.13,yin,,0,0,0,,它的作用不过是显示URL\N{\fs12}And it displays a URL,
Dialogue: 0,0:45:02.13,0:45:04.33,yin,,0,0,0,,我将称之为URLViewController\N{\fs12}that's all it does, so I'm going to call it URL view controller,
Dialogue: 0,0:45:04.33,0:45:07.04,yin,,0,0,0,,这就是它的作用 显示URL\N{\fs12}because that's what it does, displays the URL.
Dialogue: 0,0:45:07.04,0:45:09.74,yin,,0,0,0,,放到通常放的位置\N{\fs12}We'll put it in the place we usually put it.
Dialogue: 0,0:45:09.74,0:45:13.64,yin,,0,0,0,,放到下面这里 放到这附近\N{\fs12}Actually let's put it down here, eh, somewhere like here.
Dialogue: 0,0:45:13.64,0:45:15.77,yin,,0,0,0,,它的公共API是什么\N{\fs12}What's its public API?
Dialogue: 0,0:45:15.77,0:45:22.14,yin,,0,0,0,,很简单 属性 非原子 强 NSURL url\N{\fs12}Very simple, property, non-atomic strong, NSURL, URL.
Dialogue: 0,0:45:22.16,0:45:24.19,yin,,0,0,0,,这就是它要显示的URL\N{\fs12}That's the URL it's going to display.
Dialogue: 0,0:45:24.19,0:45:26.61,yin,,0,0,0,,它的实现是什么\N{\fs12}What's its implementation?
Dialogue: 0,0:45:26.61,0:45:28.97,yin,,0,0,0,,也很简单\N{\fs12}Also really, really easy.
Dialogue: 0,0:45:28.97,0:45:30.42,yin,,0,0,0,,删掉这个\N{\fs12}Let's get rid of this.
Dialogue: 0,0:45:30.42,0:45:37.27,yin,,0,0,0,,设置它的URL时 它会更新它的UI\N{\fs12}It's going, when you set its URL, it's going to update its UI,
Dialogue: 0,0:45:37.27,0:45:41.18,yin,,0,0,0,,这不是表格视图控制器 我们需要更新UI\N{\fs12}now this is not a table view controller, so we're going to have to write the update UI,
Dialogue: 0,0:45:41.18,0:45:44.79,yin,,0,0,0,,当视图确实发生加载\N{\fs12}also when it's view did load happens,
Dialogue: 0,0:45:47.79,0:45:51.26,yin,,0,0,0,,也要更新它的UI 别忘了这部分\N{\fs12}also wants to update its UI, don't forget this part.
Dialogue: 0,0:45:51.26,0:45:54.65,yin,,0,0,0,,当这是表格视图控制器时\N{\fs12}Okay, when you have non-table view, table view controllers,
Dialogue: 0,0:45:54.65,0:45:58.68,yin,,0,0,0,,这个setURL可以在outlet设置之前调用\N{\fs12}this set URL might be called before your outlets are set.
Dialogue: 0,0:45:58.68,0:46:02.42,yin,,0,0,0,,updateUI什么都不会做 因为你没有outlet\N{\fs12}So update UI might do nothing because you have no outlets.
Dialogue: 0,0:46:02.42,0:46:04.73,yin,,0,0,0,,你要再做一次 viewDidLoad\N{\fs12}So you want to do it again, view did load.
Dialogue: 0,0:46:04.73,0:46:07.46,yin,,0,0,0,,这个代价并不大 因此我打算这样做\N{\fs12}This is very inexpensive to do, so I'm just going to do it,
Dialogue: 0,0:46:07.46,0:46:09.96,yin,,0,0,0,,也许是两次 如果有人要设置这个\N{\fs12}possibly twice, if someone were to set this
Dialogue: 0,0:46:09.96,0:46:12.29,yin,,0,0,0,,而我的outlet已经设置 然后viewDidLoad发生\N{\fs12}and my outlets were set, and view did load happened
Dialogue: 0,0:46:12.29,0:46:14.57,yin,,0,0,0,,这之后 它可能发生两次\N{\fs12}after that, it might happen twice, but it's very inexpensive
Dialogue: 0,0:46:14.57,0:46:17.25,yin,,0,0,0,,但更新UI代价不大 我可以这样做\N{\fs12}to update my UI, so I can do that.
Dialogue: 0,0:46:17.25,0:46:19.65,yin,,0,0,0,,我们需要写updateUI\N{\fs12}So we need to write update UI.
Dialogue: 0,0:46:19.67,0:46:21.58,yin,,0,0,0,,要updateUI 我们需要一个UI\N{\fs12}To update UI, we need a UI,
Dialogue: 0,0:46:21.58,0:46:24.58,yin,,0,0,0,,我们回到故事板 给这个一个UI\N{\fs12}so let's go back to our storyboard and give this thing a UI.
Dialogue: 0,0:46:24.60,0:46:28.36,yin,,0,0,0,,对于这个UI 我只需要拖出一个文本视图\N{\fs12}And what I'm going to do for this UI is just drag out a text view,
Dialogue: 0,0:46:28.36,0:46:29.90,yin,,0,0,0,,到下面这里\N{\fs12}so I'm going to go down here,
Dialogue: 0,0:46:29.90,0:46:34.16,yin,,0,0,0,,找到文本视图 这里 之前我们用过\N{\fs12}find a text view right here, we saw a text view from before,
Dialogue: 0,0:46:34.16,0:46:36.32,yin,,0,0,0,,文本视图放到这里\N{\fs12}so I'm going to put the text view in here.
Dialogue: 0,0:46:36.32,0:46:38.59,yin,,0,0,0,,对齐一下\N{\fs12}I'm going to line it up,
Dialogue: 0,0:46:38.59,0:46:42.64,yin,,0,0,0,,然后让它自动布局\N{\fs12}let's go ahead and get its auto layout going,
Dialogue: 0,0:46:42.65,0:46:44.78,yin,,0,0,0,,我要重置 给出约束条件\N{\fs12}so I'm going to reset to suggest the constraints,
Dialogue: 0,0:46:44.78,0:46:47.57,yin,,0,0,0,,我要检验它有没有做好的事情\N{\fs12}I'm going to check to see if it did something good,
Dialogue: 0,0:46:47.57,0:46:48.81,yin,,0,0,0,,它显然做了\N{\fs12}which, it definitely did.
Dialogue: 0,0:46:48.81,0:46:52.56,yin,,0,0,0,,它会紧跟超视图的大小 我很喜欢这样\N{\fs12}You see that it's going to stick to the size of its super view, I like that.
Dialogue: 0,0:46:52.56,0:46:55.61,yin,,0,0,0,,我们再来检视文本视图 我不要这些代码\N{\fs12}Let's inspect the text view, I don't want all this code,
Dialogue: 0,0:46:55.61,0:47:03.48,yin,,0,0,0,,这里我只要http://www.stanford.edu\N{\fs12}I'm going to put like http slash, slash, www dot Stanford dot edu, okay, in there,
Dialogue: 0,0:47:03.48,0:47:07.61,yin,,0,0,0,,这看起来很糟 把它弄大一些\N{\fs12}that looks terrible, let's make it a little bigger.
Dialogue: 0,0:47:07.61,0:47:09.61,yin,,0,0,0,,18点 这样就更好了\N{\fs12}18 point, that looks better.
Dialogue: 0,0:47:09.61,0:47:15.64,yin,,0,0,0,,再让它居中 让它可选择\N{\fs12}Let's make it be centered, let's make it be selectable
Dialogue: 0,0:47:15.64,0:47:18.08,yin,,0,0,0,,但不可编辑 用户可以选择这个\N{\fs12}but not editable, so someone could select this and then copy
Dialogue: 0,0:47:18.08,0:47:20.71,yin,,0,0,0,,然后复制粘贴到浏览器\N{\fs12}and paste it into their browser and look at it that way,
Dialogue: 0,0:47:20.71,0:47:22.91,yin,,0,0,0,,这很好 你显然希望它能这样\N{\fs12}so that's good, we definitely like that.
Dialogue: 0,0:47:22.91,0:47:24.04,yin,,0,0,0,,这看起来很棒\N{\fs12}So that looks pretty good.
Dialogue: 0,0:47:24.04,0:47:27.87,yin,,0,0,0,,这是样子很不错的URL\N{\fs12}That's a pretty good looking view of URL,
Dialogue: 0,0:47:27.87,0:47:31.05,yin,,0,0,0,,然后再把这个和outlet关联起来\N{\fs12}and so now let's go ahead and wire this up to an outlet.
Dialogue: 0,0:47:31.05,0:47:32.57,yin,,0,0,0,,注意到我这样做时\N{\fs12}Notice that when I do that,
Dialogue: 0,0:47:32.57,0:47:35.10,yin,,0,0,0,,它会尝试UIViewController 为什么这样呢\N{\fs12}it's trying to do UI view controller, why is that?
Dialogue: 0,0:47:35.10,0:47:38.35,yin,,0,0,0,,这是因为我们需要设置这个的id\N{\fs12}That's because we need to set the identity of this thing
Dialogue: 0,0:47:38.35,0:47:41.07,yin,,0,0,0,,这是UIViewController\N{\fs12}to be a URL view controller, right?
Dialogue: 0,0:47:41.07,0:47:42.90,yin,,0,0,0,,一个普通的视图控制器\N{\fs12}This thought it was a general view controller,
Dialogue: 0,0:47:42.90,0:47:46.04,yin,,0,0,0,,这样做之后 它就理解了\N{\fs12}as soon as I do that, you can see that now it understands
Dialogue: 0,0:47:46.04,0:47:48.12,yin,,0,0,0,,这是一个URL视图控制器\N{\fs12}that this is a URL view controller.
Dialogue: 0,0:47:48.14,0:47:51.90,yin,,0,0,0,,下面我要拖动创建outlet到这个文本视图\N{\fs12}So I'm going to go ahead and drag to create an outlet to that text view.
Dialogue: 0,0:47:51.90,0:47:56.13,yin,,0,0,0,,称其为urlTextView\N{\fs12}I'll call it URL text view.
Dialogue: 0,0:47:56.13,0:47:57.14,yin,,0,0,0,,就是这个\N{\fs12}There it is.
Dialogue: 0,0:47:57.14,0:47:59.11,yin,,0,0,0,,常规IBOutlet\N{\fs12}Normal IB outlet.
Dialogue: 0,0:47:59.11,0:48:05.83,yin,,0,0,0,,下面我们采用代码全屏 像这样\N{\fs12}Let's go ahead and go full screen on the code here, like that.
Dialogue: 0,0:48:05.83,0:48:08.70,yin,,0,0,0,,然后是updateUI 也就是\N{\fs12}And now we can do our update UI, which is that,
Dialogue: 0,0:48:08.70,0:48:15.13,yin,,0,0,0,,将urlTextView设为URL\N{\fs12}let's just have our URL text view's text be the URLs,
Dialogue: 0,0:48:15.13,0:48:17.50,yin,,0,0,0,,其路径\N{\fs12}its path basically
Dialogue: 0,0:48:17.50,0:48:20.35,yin,,0,0,0,,URL中有个方法叫absoluteString\N{\fs12}and there's a method in URL called absolute string,
Dialogue: 0,0:48:20.35,0:48:24.27,yin,,0,0,0,,这会返回URL的绝对路径\N{\fs12}which will return the absolute path of that URL.
Dialogue: 0,0:48:24.27,0:48:26.36,yin,,0,0,0,,抱歉 self.url\N{\fs12}Sorry, self dot URL.
Dialogue: 0,0:48:26.36,0:48:30.62,yin,,0,0,0,,绝对路径作为字符串 这就是我们要的 文本是字符串\N{\fs12}The absolute path as a string, which is what we want, because text is a string.
Dialogue: 0,0:48:30.62,0:48:32.19,yin,,0,0,0,,我们可以做很多有趣的事\N{\fs12}And we can do a lot more fun things,
Dialogue: 0,0:48:32.19,0:48:35.20,yin,,0,0,0,,带属性文本视图 设置字体 颜色等等\N{\fs12}attribute a text view, you can set fonts, colors, whatever,
Dialogue: 0,0:48:35.20,0:48:37.65,yin,,0,0,0,,这里我们只打算写一个很简单的updateUI\N{\fs12}but we're just going to do a very, very simple update UI.
Dialogue: 0,0:48:37.65,0:48:41.59,yin,,0,0,0,,现在有了这个URL视图控制器 我们将segue到它\N{\fs12}So now we have this URL view controller, okay, that we're going to segue to.
Dialogue: 0,0:48:41.59,0:48:44.38,yin,,0,0,0,,这是一个segue 我们正在segue…\N{\fs12}Right? This is a segue. We are segueing...
Dialogue: 0,0:48:44.38,0:48:46.82,yin,,0,0,0,,汗 我应该把doc放到别处\N{\fs12}man, I should put my doc somewhere else.
Dialogue: 0,0:48:46.82,0:48:49.96,yin,,0,0,0,,我们正从这个视图控制器segue\N{\fs12}We are segueing from this view controller,
Dialogue: 0,0:48:49.96,0:48:52.98,yin,,0,0,0,,这是一个图像视图控制器\N{\fs12}which is an image view controller, right,
Dialogue: 0,0:48:52.98,0:48:56.60,yin,,0,0,0,,到这个 这是一个URL视图控制器\N{\fs12}to this which is a URL view controller,
Dialogue: 0,0:48:56.60,0:48:59.38,yin,,0,0,0,,通过这里的这个segue\N{\fs12}via this segue right here.
Dialogue: 0,0:48:59.38,0:49:04.11,yin,,0,0,0,,让我们给这个segue起个名字\N{\fs12}So let's go ahead and give that segue a name.
Dialogue: 0,0:49:04.11,0:49:07.87,yin,,0,0,0,,叫作Show URL 这个名字不错\N{\fs12}We'll call it show URL, that's probably a good name for it.
Dialogue: 0,0:49:07.87,0:49:10.76,yin,,0,0,0,,然后对它进行prepareForSegue\N{\fs12}And let's do the prepare for segue for this.
Dialogue: 0,0:49:10.76,0:49:12.21,yin,,0,0,0,,这是我们要做的最后一件事\N{\fs12}That's the last piece we have to do.
Dialogue: 0,0:49:12.21,0:49:13.71,yin,,0,0,0,,如何为这个segue做准备呢\N{\fs12}So how are we going to prepare for this segue?
Dialogue: 0,0:49:13.71,0:49:15.14,yin,,0,0,0,,这是一个普通的segue\N{\fs12}It's a normal segue.
Dialogue: 0,0:49:15.14,0:49:18.45,yin,,0,0,0,,这个图像视图控制器就是它发生的地方\N{\fs12}This image view controller is where it happens, right?
Dialogue: 0,0:49:18.45,0:49:23.55,yin,,0,0,0,,UI就在这里 因此我们需要把prepareForSegue放到这里\N{\fs12}That's where the UI is, so that's where we have to put the prepare for segue.
Dialogue: 0,0:49:23.55,0:49:27.59,yin,,0,0,0,,让我们这样做 把它放到下面这里\N{\fs12}So we're going to do that. Let's put it right down here.
Dialogue: 0,0:49:27.59,0:49:33.61,yin,,0,0,0,,这里我要放一个#pragma mark - Navigation\N{\fs12}So I'm going to put a nice pragma mark navigation,
Dialogue: 0,0:49:33.61,0:49:37.67,yin,,0,0,0,,然后我要写 (void)prepareForSegue\N{\fs12}and I'm just going to do void prepare for segue.
Dialogue: 0,0:49:37.67,0:49:39.62,yin,,0,0,0,,这里 我只打算写\N{\fs12}And so here, I'm just going to say
Dialogue: 0,0:49:39.62,0:49:43.99,yin,,0,0,0,,如果segue的目标视图控制器\N{\fs12}if the segue's destination view controller
Dialogue: 0,0:49:43.99,0:49:48.50,yin,,0,0,0,,是URLViewController这类\N{\fs12}is kind of class a URL view controller,
Dialogue: 0,0:49:52.63,0:49:57.81,yin,,0,0,0,,那么 我就将segue到它\N{\fs12}then I'm going to segue to it.
Dialogue: 0,0:49:57.81,0:50:01.29,yin,,0,0,0,,没错 我还可以说 如果标识符等于Show URL\N{\fs12}And yeah, I could also say if the identifier equals show URL,
Dialogue: 0,0:50:01.29,0:50:06.29,yin,,0,0,0,,不过为了更快一些 这里我们就不那样做了\N{\fs12}but for speed here, we're just going to go ahead and not do that.
Dialogue: 0,0:50:06.29,0:50:08.53,yin,,0,0,0,,视图 控制器 类\N{\fs12}View, controller, class.
Dialogue: 0,0:50:08.53,0:50:12.26,yin,,0,0,0,,这样我就有了URLViewController\N{\fs12}Okay. So now I have the URL view controller.
Dialogue: 0,0:50:12.26,0:50:17.65,yin,,0,0,0,,urlvc = (URLViewController *)\N{\fs12}URLVC equals URL view controller, uh,
Dialogue: 0,0:50:17.66,0:50:20.44,yin,,0,0,0,,segue.destinationViewController\N{\fs12}the segue dot destination view controller.
Dialogue: 0,0:50:20.44,0:50:22.07,yin,,0,0,0,,我有了URLViewController\N{\fs12}I've got the URL view controller,
Dialogue: 0,0:50:22.07,0:50:26.00,yin,,0,0,0,,我可以将这个URLViewController的URL\N{\fs12}and I can just set the URL view controller's image, or sorry, URL
Dialogue: 0,0:50:26.02,0:50:28.82,yin,,0,0,0,,设为我的imageURL\N{\fs12}to be my image URL.
Dialogue: 0,0:50:28.84,0:50:30.68,yin,,0,0,0,,我是一个图像视图控制器\N{\fs12}I am an image view controller,
Dialogue: 0,0:50:30.68,0:50:34.05,yin,,0,0,0,,imageURL是我的模型\N{\fs12}so image URL happens to be my model, right?
Dialogue: 0,0:50:34.05,0:50:38.87,yin,,0,0,0,,这样我就很好用它 我于是打算这样设\N{\fs12}So I have it handy dandy, and I'm just going to set that.
Dialogue: 0,0:50:38.87,0:50:42.56,yin,,0,0,0,,现在我准备好了segue到这个\N{\fs12}So now, I'm totally prepared to segue to this thing,
Dialogue: 0,0:50:42.56,0:50:47.51,yin,,0,0,0,,下面试一下这个 看它能否正常工作\N{\fs12}so let's go ahead and give this a try and see if it works.
Dialogue: 0,0:50:59.30,0:51:02.28,yin,,0,0,0,,让我们选一张照片\N{\fs12}Okay, so let's pick a photo here.
Dialogue: 0,0:51:02.28,0:51:06.35,yin,,0,0,0,,选一个更好的 回到里约热内卢\N{\fs12}Let's pick a better one than that, let's pick, okay, let's go back to Rio De Janeiro.
Dialogue: 0,0:51:06.35,0:51:06.98,yin,,0,0,0,,好\N{\fs12}Okay, there we go.
Dialogue: 0,0:51:06.98,0:51:08.83,yin,,0,0,0,,这个的URL是什么\N{\fs12}So what is the URL for this?
Dialogue: 0,0:51:08.83,0:51:10.58,yin,,0,0,0,,会是某个Flickr URL\N{\fs12}It's going to be something Flickr URL.
Dialogue: 0,0:51:10.58,0:51:13.15,yin,,0,0,0,,我们点URL 它展示的是这个\N{\fs12}So we click on URL and it shows it to us.
Dialogue: 0,0:51:13.15,0:51:15.98,yin,,0,0,0,,Flickr的某个服务器群\N{\fs12}Some farm, some server farm at Flickr.
Dialogue: 0,0:51:15.98,0:51:16.76,yin,,0,0,0,,很好\N{\fs12}Excellent.
Dialogue: 0,0:51:16.76,0:51:19.02,yin,,0,0,0,,看起来很好 一切正常运行\N{\fs12}Now, this looks like, oh, good, it's all working.
Dialogue: 0,0:51:19.02,0:51:20.60,yin,,0,0,0,,不过这里实际有个问题\N{\fs12}But actually there's a problem here.
Dialogue: 0,0:51:20.60,0:51:21.22,yin,,0,0,0,,看这个\N{\fs12}Watch this.
Dialogue: 0,0:51:21.22,0:51:23.50,yin,,0,0,0,,我打算再按一下URL按钮\N{\fs12}I'm going to press the UR button again.
Dialogue: 0,0:51:23.50,0:51:27.97,yin,,0,0,0,,里约越来越模糊 甚至有些看不到了\N{\fs12}Oh, the smog is building in Rio here, look at it, oh, it's getting so you can't even see.
Dialogue: 0,0:51:27.97,0:51:29.07,yin,,0,0,0,,这里发生了什么\N{\fs12}What's happening there?
Dialogue: 0,0:51:29.07,0:51:31.61,yin,,0,0,0,,实际上 这个segue一次又一次发生\N{\fs12}Actually, that segue is happening over and over,
Dialogue: 0,0:51:31.61,0:51:33.83,yin,,0,0,0,,弹窗越来越多\N{\fs12}it's putting up more and more popovers.
Dialogue: 0,0:51:33.83,0:51:36.61,yin,,0,0,0,,这里实际有四五个弹窗 一层层覆盖\N{\fs12}So there's actually four or five popovers over the top of each other,
Dialogue: 0,0:51:36.61,0:51:37.99,yin,,0,0,0,,于是图像越来越暗\N{\fs12}that's why it's getting darker and darker,
Dialogue: 0,0:51:37.99,0:51:40.67,yin,,0,0,0,,这是因为每次有弹窗时 屏幕其它地方都会变暗\N{\fs12}because the popover kind of darkens the rest of the screen when it puts it up.
Dialogue: 0,0:51:40.67,0:51:41.83,yin,,0,0,0,,我可以点别的地方\N{\fs12}So if I click somewhere else,
Dialogue: 0,0:51:41.83,0:51:45.78,yin,,0,0,0,,这是取消弹窗的方式 所有弹窗会慢慢消失\N{\fs12}which is how you dismiss a popover, it's slowly getting rid of them all,
Dialogue: 0,0:51:45.78,0:51:47.51,yin,,0,0,0,,直到最开始的那个\N{\fs12}all the way back to the other one.
Dialogue: 0,0:51:47.51,0:51:50.76,yin,,0,0,0,,毫无疑问 这对于用户而言不是很好的UI\N{\fs12}Needless to say, this is not a great UI, for the user,
Dialogue: 0,0:51:50.76,0:51:54.29,yin,,0,0,0,,我们不希望这样 如何避免这样呢\N{\fs12}so we don't want this. Okay, why is this? How are we going to stop this?
Dialogue: 0,0:51:54.29,0:51:56.13,yin,,0,0,0,,我们准备这样做\N{\fs12}Well, we're going to stop this when this
Dialogue: 0,0:51:56.13,0:51:59.64,yin,,0,0,0,,当有人点URL时 我们打算检查\N{\fs12}segue, when someone clicks on URL, we are going to check to see
Dialogue: 0,0:51:59.64,0:52:04.02,yin,,0,0,0,,是否已经有弹窗了 如果有 我们将不再segue\N{\fs12}if we already have a popover up, and if we do, we're not going to do that segue.
Dialogue: 0,0:52:04.30,0:52:06.28,yin,,0,0,0,,我来展示一下怎么做\N{\fs12}So let me show you how to do that.
Dialogue: 0,0:52:06.28,0:52:10.13,yin,,0,0,0,,首先 我们要跟踪这个弹窗是否已经弹出\N{\fs12}So first of all, we have to keep track of whether this popover is up.
Dialogue: 0,0:52:10.13,0:52:15.27,yin,,0,0,0,,做法是添加一个属性给我的图像视图控制器\N{\fs12}So I'm going to do that by adding a property here to my image view controller.
Dialogue: 0,0:52:15.27,0:52:18.05,yin,,0,0,0,,设为弱属性\N{\fs12}I'm going to make it weak.
Dialogue: 0,0:52:18.05,0:52:22.03,yin,,0,0,0,,除了outlet 我们很少使用弱属性\N{\fs12}Here's one of the first times we've used a weak property outside of outlets,
Dialogue: 0,0:52:22.03,0:52:24.83,yin,,0,0,0,,这里用于UIPopoverController\N{\fs12}but it's going to be UI popover controller,
Dialogue: 0,0:52:24.83,0:52:27.17,yin,,0,0,0,,urlPopoverController\N{\fs12}URL popover controller,
Dialogue: 0,0:52:27.17,0:52:31.91,yin,,0,0,0,,设为弱的原因在于 我希望使用弱的性质\N{\fs12}and the reason it's going to be weak is because I want to use the weakness
Dialogue: 0,0:52:31.91,0:52:34.82,yin,,0,0,0,,让弹窗控制器失去之后\N{\fs12}so that when the popover controller is gone,
Dialogue: 0,0:52:34.82,0:52:39.23,yin,,0,0,0,,没有其它强指针指向它 于是我的指针会被设为nil\N{\fs12}no one else will have a strong pointer to it, my pointer will get set to nil.
Dialogue: 0,0:52:40.43,0:52:42.65,yin,,0,0,0,,明白吗 现在我就总能知道\N{\fs12}Get it? So now I'm always going to know whether
Dialogue: 0,0:52:42.65,0:52:45.17,yin,,0,0,0,,弹窗控制器是否在作用\N{\fs12}that popover controller is up,
Dialogue: 0,0:52:45.17,0:52:47.37,yin,,0,0,0,,不过我需要初始设置它\N{\fs12}but I've got to set it initially, though.
Dialogue: 0,0:52:47.37,0:52:51.69,yin,,0,0,0,,segue发生时 我需要设置这个到弹窗\N{\fs12}I've got to set this thing to the popover when the segue happens.
Dialogue: 0,0:52:51.69,0:52:54.53,yin,,0,0,0,,我们来做一下 如何做到呢\N{\fs12}So let's do that. And how do we do that?
Dialogue: 0,0:52:54.53,0:52:58.55,yin,,0,0,0,,我在幻灯片中说过 但你们可能不记得了\N{\fs12}I said this in the slide, but you're probably like "what?"
Dialogue: 0,0:52:58.55,0:53:01.67,yin,,0,0,0,,现在我来讲下 也就是 这个segue\N{\fs12}but now you'll see it, which is this segue,
Dialogue: 0,0:53:01.68,0:53:03.71,yin,,0,0,0,,如果是弹窗segue\N{\fs12}if this is a popover segue,
Dialogue: 0,0:53:03.71,0:53:06.28,yin,,0,0,0,,它将是UIStoryboardSegue的子类\N{\fs12}will be a subclass of UI storyboard
Dialogue: 0,0:53:06.29,0:53:11.32,yin,,0,0,0,,也就是UIStoryboardPopoverSegue\N{\fs12}called UI storyboard popover segue.
Dialogue: 0,0:53:11.32,0:53:21.29,yin,,0,0,0,,popoverSegue = (UIStoryboardPopoverSegue *)segue\N{\fs12}Popover segue equals UI popover storyboard popover segue, segue.
Dialogue: 0,0:53:21.29,0:53:23.15,yin,,0,0,0,,我可以只这样做\N{\fs12}Now I could just do this,
Dialogue: 0,0:53:23.15,0:53:25.29,yin,,0,0,0,,不过我还可以更保险一些 我可以说\N{\fs12}but I'm going to be a little safe and say
Dialogue: 0,0:53:25.29,0:53:33.72,yin,,0,0,0,,如果我的segue是UIStoryboardPopoverSegue这一类\N{\fs12}if my segue is kind of class UI popover storyboard popover segue class,
Dialogue: 0,0:53:33.72,0:53:35.37,yin,,0,0,0,,那么我就要做所有这些\N{\fs12}then I'll get it, then I'll do this.
Dialogue: 0,0:53:35.37,0:53:39.22,yin,,0,0,0,,我喜欢在做这样的事情之前先检查一下\N{\fs12}I just don't like to do casts like that without, you know, checking first.
Dialogue: 0,0:53:39.22,0:53:43.09,yin,,0,0,0,,虽然这里很有可能是弹窗\N{\fs12}Although if I got to here, it probably is going to be a popover, but,
Dialogue: 0,0:53:43.10,0:53:45.85,yin,,0,0,0,,不过我这里还是检查一下\N{\fs12}you know, it should be a popover, but I'm going to check anyway.
Dialogue: 0,0:53:45.85,0:53:49.20,yin,,0,0,0,,然后我要将我的URL弹窗控制器设为\N{\fs12}And now I'm just going to set my URL popover controller equal
Dialogue: 0,0:53:49.20,0:53:53.38,yin,,0,0,0,,这个弹窗segue的popoverController属性\N{\fs12}to that popover segue's popover controller property.
Dialogue: 0,0:53:53.38,0:53:55.83,yin,,0,0,0,,看这个弹窗segue\N{\fs12}If you look at popover segue, here's popover segue,
Dialogue: 0,0:53:55.83,0:53:59.44,yin,,0,0,0,,去UIStoryboardPopoverSegue的说明文档\N{\fs12}I'm going to go to its documentation, okay, for UI storyboard popover,
Dialogue: 0,0:53:59.44,0:54:00.78,yin,,0,0,0,,你会看到\N{\fs12}and you'll see
Dialogue: 0,0:54:00.78,0:54:04.10,yin,,0,0,0,,UIStoryboardPopoverSegue只有一项属性\N{\fs12}that UI storyboard popover only has one property,
Dialogue: 0,0:54:04.10,0:54:06.11,yin,,0,0,0,,也就是popoverController\N{\fs12}which is the popover controller.
Dialogue: 0,0:54:06.11,0:54:11.83,yin,,0,0,0,,我们这里是从segue得到了popoverController\N{\fs12}So we're basically getting the popover controller from the segue.
Dialogue: 0,0:54:11.83,0:54:12.83,yin,,0,0,0,,很特殊\N{\fs12}It's a special kind.
Dialogue: 0,0:54:12.83,0:54:17.39,yin,,0,0,0,,但愿大家都理解了这个\N{\fs12}So it's a little-- hopefully you understand that-- everyone understand that?
Dialogue: 0,0:54:17.39,0:54:18.41,yin,,0,0,0,,有问题吗\N{\fs12}Question? No?
Dialogue: 0,0:54:20.99,0:54:25.77,yin,,0,0,0,,这不是目标视图控制器 这是segue本身\N{\fs12}Um, it's not, this is not the destination view controller, this is the segue itself.
Dialogue: 0,0:54:25.77,0:54:28.29,yin,,0,0,0,,这里我们没有说segue.destinationViewController\N{\fs12}We're not saying segue dot destination view controller here.
Dialogue: 0,0:54:29.83,0:54:31.28,yin,,0,0,0,,问得很好\N{\fs12}Okay, great question.
Dialogue: 0,0:54:31.28,0:54:33.91,yin,,0,0,0,,目标视图控制器 这个东西\N{\fs12}Is the destination view controller, this thing,
Dialogue: 0,0:54:33.92,0:54:35.30,yin,,0,0,0,,是弹窗控制器吗\N{\fs12}is that a popover controller?
Dialogue: 0,0:54:35.30,0:54:37.17,yin,,0,0,0,,答案是 不是\N{\fs12}And the answer is, it is not.
Dialogue: 0,0:54:37.17,0:54:39.51,yin,,0,0,0,,它是一个URL视图控制器\N{\fs12}It is a URL view controller.
Dialogue: 0,0:54:39.51,0:54:42.05,yin,,0,0,0,,弹窗控制器是另一个类\N{\fs12}Popover view controller is another class,
Dialogue: 0,0:54:42.05,0:54:46.71,yin,,0,0,0,,不是控制那个弹窗的UIViewController\N{\fs12}not a UI view controller, that controls that popover.
Dialogue: 0,0:54:46.71,0:54:47.55,yin,,0,0,0,,它不是\N{\fs12}So it is not.
Dialogue: 0,0:54:47.55,0:54:50.66,yin,,0,0,0,,segue是一个StoryboardPopoverSegue\N{\fs12}So the segue is a storyboard popover segue,
Dialogue: 0,0:54:50.66,0:54:53.92,yin,,0,0,0,,从这里面我们得到弹窗控制器\N{\fs12}out of which we get the popover controller,
Dialogue: 0,0:54:53.92,0:54:57.96,yin,,0,0,0,,而目标视图控制器是一个URL视图控制器\N{\fs12}and the destination view controller is a URL view controller.
Dialogue: 0,0:54:57.96,0:54:59.95,yin,,0,0,0,,大家都明白吗\N{\fs12}Everyone got all that?
Dialogue: 0,0:54:59.95,0:55:01.35,yin,,0,0,0,,好 现在我们有一个指针\N{\fs12}Alright, so now we have a pointer
Dialogue: 0,0:55:01.35,0:55:03.21,yin,,0,0,0,,指向这个URL弹窗控制器\N{\fs12}to this URL popover controller,
Dialogue: 0,0:55:03.21,0:55:06.14,yin,,0,0,0,,离开屏幕时 它会自动被设为nil\N{\fs12}and it's automatically going to get set to nil as soon as it goes off screen,
Dialogue: 0,0:55:06.14,0:55:08.18,yin,,0,0,0,,因为指向它的是弱指针\N{\fs12}because it's weak. It's a weak pointer to it.
Dialogue: 0,0:55:08.18,0:55:10.36,yin,,0,0,0,,我们还有一件事需要做\N{\fs12}There's only one other thing we need to do,
Dialogue: 0,0:55:10.36,0:55:15.32,yin,,0,0,0,,也就是如果那个在运行 就不要运行这个segue\N{\fs12}which is not do this segue if that thing is up.
Dialogue: 0,0:55:15.32,0:55:17.68,yin,,0,0,0,,我在课上讲过这个\N{\fs12}And I actually talked about this in the lecture, how we do this,
Dialogue: 0,0:55:17.68,0:55:20.32,yin,,0,0,0,,UIViewController中有一个方法叫\N{\fs12}there's a method in UI view controller called
Dialogue: 0,0:55:20.32,0:55:24.17,yin,,0,0,0,,shouldPerformSegueWithIdentifier\N{\fs12}should perform segue with identifier.
Dialogue: 0,0:55:24.17,0:55:26.80,yin,,0,0,0,,这是系统在问\N{\fs12}And this is the system asking,
Dialogue: 0,0:55:26.80,0:55:29.43,yin,,0,0,0,,用户点击了导致segue的东西\N{\fs12}someone clicked on something that's supposed to cause a segue.
Dialogue: 0,0:55:29.43,0:55:30.88,yin,,0,0,0,,我是否应该照做\N{\fs12}Should I do it?
Dialogue: 0,0:55:30.88,0:55:32.60,yin,,0,0,0,,这里我们打算这样\N{\fs12}And right here we're going to say
Dialogue: 0,0:55:32.60,0:55:38.03,yin,,0,0,0,,如果讨论中的segue的标识符\N{\fs12}if the segue in question here, its identifier,
Dialogue: 0,0:55:38.03,0:55:42.93,yin,,0,0,0,,等于字符串Show URL\N{\fs12}is equal to string show URL,
Dialogue: 0,0:55:42.93,0:55:47.83,yin,,0,0,0,,在故事板中它就叫这个\N{\fs12}which is what it is in our storyboard,
Dialogue: 0,0:55:47.83,0:55:51.76,yin,,0,0,0,,这或许就是我们这里还要检查的原因\N{\fs12}and this is the reason why maybe we want to check it here as well.
Dialogue: 0,0:55:51.76,0:55:54.26,yin,,0,0,0,,在demo模式中 我跳过那个\N{\fs12}I skipped over that demo mode, but you know,
Dialogue: 0,0:55:54.26,0:55:57.27,yin,,0,0,0,,如果这里要检查 这里我们也应该检查\N{\fs12}if we're going to check it here, we might want to check it up here as well.
Dialogue: 0,0:55:57.27,0:56:00.40,yin,,0,0,0,,无论如何 我们有了这个 这里我将要这样返回\N{\fs12}But anyway, we've got this, I'm going to return, in this case,
Dialogue: 0,0:56:00.40,0:56:05.30,yin,,0,0,0,,如果这是URL 那么如果我有URL弹窗控制器 那么NO\N{\fs12}so if it's a URL, then if I have URL popover controller, then no,
Dialogue: 0,0:56:05.30,0:56:08.83,yin,,0,0,0,,不要执行这个segue 因为已经有了一个弹窗\N{\fs12}do not perform this segue, because there's already a popover up.
Dialogue: 0,0:56:08.83,0:56:10.96,yin,,0,0,0,,否则 我可以说YES 但我打算\N{\fs12}Otherwise, I could just say yes, but actually I'm going
Dialogue: 0,0:56:10.96,0:56:13.21,yin,,0,0,0,,做点更巧妙的事 我要说\N{\fs12}to do something a little trickier, I'm going to say
Dialogue: 0,0:56:13.21,0:56:19.05,yin,,0,0,0,,如果我有一个imageURL 那么YES 否则还是NO\N{\fs12}if I have a image URL, then put it up, otherwise, also don't put it up.
Dialogue: 0,0:56:20.66,0:56:22.34,yin,,0,0,0,,看懂了吗\N{\fs12}See what I did there?
Dialogue: 0,0:56:22.34,0:56:25.81,yin,,0,0,0,,有两个理由不直接进行URL segue\N{\fs12}Two reasons not to put, do that URL segue.
Dialogue: 0,0:56:25.81,0:56:29.69,yin,,0,0,0,,一个原因是可能没有任何照片显示出来\N{\fs12}If I don't have any photo showing, then that's one reason.
Dialogue: 0,0:56:29.69,0:56:32.35,yin,,0,0,0,,另一个原因是弹窗已经在那\N{\fs12}Or if I have a popup already up.
Dialogue: 0,0:56:32.35,0:56:35.67,yin,,0,0,0,,否则 这很有趣 我有一个否则的情况\N{\fs12}Else, now this is interesting, I have an else case here, which is
Dialogue: 0,0:56:35.67,0:56:38.90,yin,,0,0,0,,也就是super shouldPerform…\N{\fs12}super should performs.
Dialogue: 0,0:56:38.90,0:56:41.85,yin,,0,0,0,,如果我没有阻止它 那么我就要\N{\fs12}So if I am not preventing it, then I'm going
Dialogue: 0,0:56:41.85,0:56:45.92,yin,,0,0,0,,让超类UIViewController来决定是否进行这个segue\N{\fs12}to let my super class UI view controller decide whether it should do this segue.
Dialogue: 0,0:56:45.94,0:56:49.33,yin,,0,0,0,,这几乎总会说YES 不过…\N{\fs12}Which it's always going to say yes, pretty much, but...okay?
Dialogue: 0,0:56:49.33,0:56:51.93,yin,,0,0,0,,这里应该是返回\N{\fs12}This should be return.
Dialogue: 0,0:56:51.93,0:56:54.82,yin,,0,0,0,,看看这能否修正所有问题\N{\fs12}So let's see if that fixes all our problems
Dialogue: 0,0:57:05.08,0:57:07.84,yin,,0,0,0,,好 回到里约\N{\fs12}Alright, so let's go back to Rio.
Dialogue: 0,0:57:07.84,0:57:12.55,yin,,0,0,0,,这是里约 点URL 很好 再点URL\N{\fs12}Here we are, in Rio, let's click URL, excellent, URL again,
Dialogue: 0,0:57:12.55,0:57:14.98,yin,,0,0,0,,不断再点 它什么都没做\N{\fs12}again, again, again, it's not doing it,
Dialogue: 0,0:57:14.98,0:57:18.24,yin,,0,0,0,,点其它地方 所有问题都修正了\N{\fs12}click away, going to fix all our problems.
Dialogue: 0,0:57:18.24,0:57:21.46,yin,,0,0,0,,不过这里还有一个很琐细的问题 出于时间考虑\N{\fs12}There is a subtle problem still here, which I'm not going
Dialogue: 0,0:57:21.46,0:57:23.61,yin,,0,0,0,,我不打算修正 毕竟我还要讲地图\N{\fs12}to fix because of time, I need to get to the maps here,
Dialogue: 0,0:57:23.61,0:57:27.53,yin,,0,0,0,,来到竖屏模式 显示URL 看看如果\N{\fs12}but if I go to portrait mode and show the URL, watch what happens
Dialogue: 0,0:57:27.53,0:57:31.22,yin,,0,0,0,,我点这里的拍照者来显示拍照者会怎样\N{\fs12}if I click photographer over here to show those photographers.
Dialogue: 0,0:57:31.22,0:57:33.73,yin,,0,0,0,,哦 URL还在那里\N{\fs12}Oh! The URL thing didn't go away.
Dialogue: 0,0:57:33.73,0:57:36.49,yin,,0,0,0,,我点其它地方 它本应该消失的\N{\fs12}I thought if I clicked away from it, it's supposed to go away.
Dialogue: 0,0:57:36.51,0:57:41.47,yin,,0,0,0,,实际上 只要你在URL所在的栏上点击\N{\fs12}And the answer is, if you click in the same bar that the URL thing is,
Dialogue: 0,0:57:41.47,0:57:43.77,yin,,0,0,0,,这个都不会消失\N{\fs12}then it does allow you to click.
Dialogue: 0,0:57:43.77,0:57:47.43,yin,,0,0,0,,我在幻灯片中讲过 这叫passthroughViews\N{\fs12}That's the thing in the slides that I talked about, called pass through views.
Dialogue: 0,0:57:47.43,0:57:50.30,yin,,0,0,0,,这整个栏都是passthroughViews的一部分\N{\fs12}So this whole bar is part of the pass through views,
Dialogue: 0,0:57:50.30,0:57:53.67,yin,,0,0,0,,最糟糕的是 就算我点别的照片\N{\fs12}and the real bad thing about this is, if I click on a different photo,
Dialogue: 0,0:57:53.67,0:57:57.39,yin,,0,0,0,,照片会变 但URL不会更新\N{\fs12}it's showing me a different photo, but it's not updating the URL.
Dialogue: 0,0:57:57.39,0:57:58.47,yin,,0,0,0,,这太糟糕了\N{\fs12}So this is really bad.
Dialogue: 0,0:57:58.47,0:58:00.15,yin,,0,0,0,,我会在后面发布的代码中修正这个\N{\fs12}So I'm going to fix this in the code I post,
Dialogue: 0,0:58:00.15,0:58:03.86,yin,,0,0,0,,算了 就现在修正吧 更容易演示\N{\fs12}actually let's just fix it right now, easier to show you.
Dialogue: 0,0:58:03.86,0:58:05.09,yin,,0,0,0,,我来做这个\N{\fs12}I'm going to do this.
Dialogue: 0,0:58:05.09,0:58:08.80,yin,,0,0,0,,当有人将图像设置为新东西时\N{\fs12}Whenever someone sets my image to something new.
Dialogue: 0,0:58:08.80,0:58:12.86,yin,,0,0,0,,在图像视图控制器中调用setImage\N{\fs12}Call set image, I'm going to, in my image view controller,
Dialogue: 0,0:58:12.86,0:58:17.86,yin,,0,0,0,,我就会解除我拥有的任何弹窗控制器\N{\fs12}I'm going to dismiss any popover controller that I have.
Dialogue: 0,0:58:18.93,0:58:22.91,yin,,0,0,0,,这样 如果有人打开右侧那个 然后点击\N{\fs12}So that way if someone brings up that thing on the right and they click,
Dialogue: 0,0:58:22.91,0:58:25.35,yin,,0,0,0,,至少我会把URL弄走\N{\fs12}at least I'll put away my URL.
Dialogue: 0,0:58:25.35,0:58:27.26,yin,,0,0,0,,我也可以用一些代码\N{\fs12}I could actually have some code here
Dialogue: 0,0:58:27.26,0:58:30.86,yin,,0,0,0,,更新URL视图控制器 让它变化\N{\fs12}that updated the URL view controller and made it change,
Dialogue: 0,0:58:30.86,0:58:33.35,yin,,0,0,0,,这不难 我只需要跟踪它\N{\fs12}that wouldn't be that hard, I'd just keep track of it.
Dialogue: 0,0:58:33.35,0:58:36.16,yin,,0,0,0,,唯一的问题是 这就会让不一致\N{\fs12}The only problem is then that would be inconsistent
Dialogue: 0,0:58:36.16,0:58:39.07,yin,,0,0,0,,出现在竖屏模式和这个模式之间\N{\fs12}between this portrait mode and this mode,
Dialogue: 0,0:58:39.07,0:58:41.55,yin,,0,0,0,,因为这里 如果上面这里有URL\N{\fs12}because here, when I'm clicking, if I had URL up here,
Dialogue: 0,0:58:41.56,0:58:44.38,yin,,0,0,0,,如果我点这里 URL会消失\N{\fs12}if I click over here, it makes the URL go away.
Dialogue: 0,0:58:44.38,0:58:49.35,yin,,0,0,0,,因为这里这个同URL不在相同的栏中\N{\fs12}Because over here is now no longer in the same bar as the URL.
Dialogue: 0,0:58:49.35,0:58:52.53,yin,,0,0,0,,我希望程序的行为相对一致\N{\fs12}So I want my behavior to be at least somewhat consistent.
Dialogue: 0,0:58:52.53,0:58:57.59,yin,,0,0,0,,因此我打算在点击新东西时 URL消失\N{\fs12}So I'll make it so that when I click on something new, it makes the URL go away.
Dialogue: 0,0:58:58.92,0:58:59.57,yin,,0,0,0,,好\N{\fs12}Okay!
Dialogue: 0,0:58:59.57,0:59:02.60,yin,,0,0,0,,一个很好很大的demo 所有这些我都会发布\N{\fs12}Nice big long demo, I will, of course, post all of this.
Dialogue: 0,0:59:02.60,0:59:05.49,yin,,0,0,0,,现在你就知道如何用弹窗控制器了 现在你们需要\N{\fs12}Now you know how to do popover controllers, you should really have a good handle
Dialogue: 0,0:59:05.49,0:59:08.36,yin,,0,0,0,,很好地掌握Core Data表格视图控制器的使用\N{\fs12}on using those core data table view controllers by now, I hope.
Dialogue: 0,0:59:08.36,0:59:13.50,yin,,0,0,0,,我还说过 我要做的是通用app 看这有多简单\N{\fs12}Oh! I promised I would do universal app, look how easy this is.
Dialogue: 0,0:59:13.50,0:59:17.76,yin,,0,0,0,,我要这样转到iPhone 这是我的iPad\N{\fs12}I'm going to do my iPhone, here's my iPad,
Dialogue: 0,0:59:17.78,0:59:22.46,yin,,0,0,0,,我复制这个 到iPhone里面\N{\fs12}I'm going to take this, copy it, go over here to my iPhone,
Dialogue: 0,0:59:22.46,0:59:25.44,yin,,0,0,0,,删除这个 粘贴\N{\fs12}get rid of this thing, paste.
Dialogue: 0,0:59:25.44,0:59:26.94,yin,,0,0,0,,回到iPad\N{\fs12}Go back to iPad,
Dialogue: 0,0:59:26.94,0:59:33.13,yin,,0,0,0,,将我要的这个图像视图控制器复制粘贴过来\N{\fs12}get this image view controller, which I need, go over here, paste it.
Dialogue: 0,0:59:33.13,0:59:36.61,yin,,0,0,0,,给它找个空间 粘贴\N{\fs12}If I can find space for it. Paste.
Dialogue: 0,0:59:37.92,0:59:41.08,yin,,0,0,0,,好了 放到上面这里\N{\fs12}Alright there it is, put it up here.
Dialogue: 0,0:59:41.08,0:59:44.46,yin,,0,0,0,,segue到它\N{\fs12}Just need to make the segue to it.
Dialogue: 0,0:59:45.12,0:59:47.17,yin,,0,0,0,,control 拖动\N{\fs12}Control, drag.
Dialogue: 0,0:59:47.17,0:59:48.54,yin,,0,0,0,,这是一个push segue\N{\fs12}It's a push segue.
Dialogue: 0,0:59:48.54,0:59:49.42,yin,,0,0,0,,搞定\N{\fs12}Boom. We're done.
Dialogue: 0,0:59:49.42,0:59:51.43,yin,,0,0,0,,现在iPhone就能工作了\N{\fs12}Now iPhone will work.
Dialogue: 0,0:59:51.43,0:59:54.22,yin,,0,0,0,,想看它工作的可以下课来\N{\fs12}You can come up after class if you want
Dialogue: 0,0:59:54.22,0:59:55.78,yin,,0,0,0,,就是这么简单\N{\fs12}to see it working, but that's all there is.
Dialogue: 0,0:59:55.78,0:59:59.16,yin,,0,0,0,,很多时候 要同时在iPhone和iPad的UI上运行\N{\fs12}So a lot of times when you're working on iPhone and iPad UIs
Dialogue: 0,0:59:59.16,1:00:02.27,yin,,0,0,0,,你只需要弄好一个 然后复制粘贴到另一个\N{\fs12}you'll get one working and then you'll just copy and paste back to the other one.
Dialogue: 0,1:00:02.27,1:00:04.34,yin,,0,0,0,,或许有一些新特性\N{\fs12}Get that one maybe working with some new feature,
Dialogue: 0,1:00:04.35,1:00:06.70,yin,,0,0,0,,复制粘贴合适的东西回来\N{\fs12}copy and paste it in the appropriate things back to the other one.
Dialogue: 0,1:00:06.70,1:00:11.85,yin,,0,0,0,,明白吗 你可以在两者之间往复 很简单\N{\fs12}See what I mean, you can kind of go back and forth between, pretty straightforward.
Dialogue: 0,1:00:11.85,1:00:13.61,yin,,0,0,0,,好 回到幻灯片\N{\fs12}Okay! Back to the slides.
Dialogue: 0,1:00:13.61,1:00:14.76,yin,,0,0,0,,好了\N{\fs12}Here we go.
Dialogue: 0,1:00:14.76,1:00:19.49,yin,,0,0,0,,第14讲 这里\N{\fs12}Lecture 14, there it is.
Dialogue: 0,1:00:19.49,1:00:22.63,yin,,0,0,0,,好 今天地图肯定是讲不完了\N{\fs12}Okay. So we're not going to get all the way through the maps stuff today,
Dialogue: 0,1:00:22.63,1:00:25.49,yin,,0,0,0,,这没关系 因为下堂课开始还有时间\N{\fs12}which is fine, because I have a little bit of time at the beginning of the next lecture,
Dialogue: 0,1:00:25.49,1:00:29.17,yin,,0,0,0,,然后我还将在下一讲做一个map的演示demo\N{\fs12}and then I'm going to be doing the map demo in the next lecture anyway,
Dialogue: 0,1:00:29.17,1:00:30.78,yin,,0,0,0,,这样大家记忆就会很鲜活\N{\fs12}so it will be kind of fresh in your mind.
Dialogue: 0,1:00:30.78,1:00:34.23,yin,,0,0,0,,关于刚才的那个大demo 大家有问题吗\N{\fs12}So any questions about all that big demo I just did?
Dialogue: 0,1:00:34.23,1:00:35.84,yin,,0,0,0,,听起来不错吗\N{\fs12}All sounds good?
Dialogue: 0,1:00:35.84,1:00:37.46,yin,,0,0,0,,理解了吗\N{\fs12}Understandable?
Dialogue: 0,1:00:37.46,1:00:39.41,yin,,0,0,0,,好\N{\fs12}Okay. Alright.
Dialogue: 0,1:00:39.41,1:00:41.62,yin,,0,0,0,,MapKit 这里我要讲MapKit\N{\fs12}Map kit. Basically I'm going to be talking about map kit here,
Dialogue: 0,1:00:41.62,1:00:44.76,yin,,0,0,0,,不过这之前 我要讲到另一个框架\N{\fs12}but before I talk about map kit, I have to talk about another framework,
Dialogue: 0,1:00:44.77,1:00:46.74,yin,,0,0,0,,这是一个非UI框架\N{\fs12}which is a non-UI framework,
Dialogue: 0,1:00:46.74,1:00:50.14,yin,,0,0,0,,这是MapKit框架的基础 叫作Core Location\N{\fs12}which kind of underlies the map kit framework, called core location.
Dialogue: 0,1:00:50.14,1:00:53.86,yin,,0,0,0,,Core Location是一个框架 有一些对象在里面\N{\fs12}So core location is a framework, has a bunch of objects in it,
Dialogue: 0,1:00:53.86,1:00:57.99,yin,,0,0,0,,关于当前设备处在于什么位置\N{\fs12}that have to do with where is this device in the universe?
Dialogue: 0,1:00:57.99,1:01:03.41,yin,,0,0,0,,就GPS而言 也就是在地球上什么地方\N{\fs12}Where on the planet, you know, where, in terms of GPS
Dialogue: 0,1:01:03.41,1:01:06.87,yin,,0,0,0,,或是根据其它因素决定 设备在哪\N{\fs12}or other factors determining where it is, where is it?
Dialogue: 0,1:01:06.87,1:01:08.23,yin,,0,0,0,,在地球的什么地方\N{\fs12}Where on earth.
Dialogue: 0,1:01:08.23,1:01:13.15,yin,,0,0,0,,它的基本对象是CLLocation\N{\fs12}So, its basic object is a CL location
Dialogue: 0,1:01:13.15,1:01:18.45,yin,,0,0,0,,其属性包括坐标 包括纬度和经度 然后还有高度\N{\fs12}that it concludes a coordinate which is, you know, latitude and longitude, altitude.
Dialogue: 0,1:01:18.45,1:01:20.01,yin,,0,0,0,,水平/竖直精度\N{\fs12}Horizontal and vertical accuracy,
Dialogue: 0,1:01:20.01,1:01:22.35,yin,,0,0,0,,我们会谈到这个的重要性 时间戳 速度\N{\fs12}we'll talk about why that's important, time stamps, speed,
Dialogue: 0,1:01:22.35,1:01:23.53,yin,,0,0,0,,路线等等这些\N{\fs12}course, things like that.
Dialogue: 0,1:01:23.53,1:01:26.63,yin,,0,0,0,,这就是CLLocation对象\N{\fs12}That's the CL location object.
Dialogue: 0,1:01:26.63,1:01:31.34,yin,,0,0,0,,这个对象有一个很重要的属性 叫坐标(coordinate)\N{\fs12}This object has this very important property called coordinate,
Dialogue: 0,1:01:31.34,1:01:34.01,yin,,0,0,0,,这是一个C struct\N{\fs12}and that is a C-struct,
Dialogue: 0,1:01:34.01,1:01:36.32,yin,,0,0,0,,CLLocationCoordinate2D\N{\fs12}CL location coordinate 2D,
Dialogue: 0,1:01:36.32,1:01:38.89,yin,,0,0,0,,其中是CLLocationDegrees\N{\fs12}and inside is just CL location degrees,
Dialogue: 0,1:01:38.89,1:01:43.10,yin,,0,0,0,,这是一个双精度纬度值 另外一个是经度值\N{\fs12}which is essentially a double, which is latitude, and another one which is longitude.
Dialogue: 0,1:01:43.10,1:01:46.65,yin,,0,0,0,,然后高度是以米计的\N{\fs12}And then the altitude is in meters.
Dialogue: 0,1:01:46.65,1:01:50.09,yin,,0,0,0,,这就是Core Location中的基本对象\N{\fs12}Okay, so this is the basic object in core location.
Dialogue: 0,1:01:50.09,1:01:52.92,yin,,0,0,0,,问题是 如何…\N{\fs12}So the question is how do...oh!
Dialogue: 0,1:01:52.92,1:01:55.47,yin,,0,0,0,,抱歉 让我讲讲精度 它很重要\N{\fs12}sorry, let me talk about accuracy, very important.
Dialogue: 0,1:01:55.47,1:01:58.29,yin,,0,0,0,,当你获得一个位置时\N{\fs12}So when you get a location,
Dialogue: 0,1:01:58.29,1:02:02.51,yin,,0,0,0,,这个位置可能会具有变化精度\N{\fs12}you got it in a certain way that might have varying accuracy.
Dialogue: 0,1:02:02.51,1:02:06.73,yin,,0,0,0,,如果位置是从GPS获得的 那就会非常准确\N{\fs12}If you got that location from GPS, it could be very accurate.
Dialogue: 0,1:02:06.73,1:02:12.29,yin,,0,0,0,,如果是通过当地电话塔得到 那就可能非常不准\N{\fs12}If you got it by looking at local cell towers, it might be pretty inaccurate.
Dialogue: 0,1:02:12.29,1:02:15.09,yin,,0,0,0,,可能会差一英里远\N{\fs12}Right? It could be a mile off, actually.
Dialogue: 0,1:02:15.09,1:02:17.92,yin,,0,0,0,,两者之间还有一些方式\N{\fs12}If you got it that way. And there's ways in between.
Dialogue: 0,1:02:17.92,1:02:22.06,yin,,0,0,0,,在斯坦福校园 你可以通过使用wifi得到\N{\fs12}On Stanford campus, you can actually get it by using wi-fi.
Dialogue: 0,1:02:22.06,1:02:27.45,yin,,0,0,0,,它会寻找周围的wifi 以此告诉你你在哪里\N{\fs12}It can look around, see what wi-fi things are near you and tell by that where you are.
Dialogue: 0,1:02:27.45,1:02:29.71,yin,,0,0,0,,听起来有些恐怖吧 它知道你在哪\N{\fs12}Kind of scary, huh? So it knows where you are.
Dialogue: 0,1:02:29.71,1:02:32.73,yin,,0,0,0,,哪怕是在室内 这个也能奏效\N{\fs12}And that works even if you're indoors or whatever, so.
Dialogue: 0,1:02:32.73,1:02:36.68,yin,,0,0,0,,现在 这只适用于公共wifi节点这些\N{\fs12}Now, it only works for public wi-fi nodes, et cetera,
Dialogue: 0,1:02:36.68,1:02:39.02,yin,,0,0,0,,不过在斯坦福 这些wifi节点都众所周知\N{\fs12}but at Stanford, these wi-fi nodes are all well-known,
Dialogue: 0,1:02:39.02,1:02:41.35,yin,,0,0,0,,因此 它知道你在哪\N{\fs12}so it knows where you are.
Dialogue: 0,1:02:41.35,1:02:43.94,yin,,0,0,0,,指定这个精度可以使用\N{\fs12}And you specify this accuracy using one
Dialogue: 0,1:02:43.94,1:02:47.23,yin,,0,0,0,,这些kCLLocationAccuracy常数\N{\fs12}of this KCL location accuracy constants,
Dialogue: 0,1:02:47.23,1:02:49.19,yin,,0,0,0,,有一个叫BestForNavigation\N{\fs12}and so there's best for navigation,
Dialogue: 0,1:02:49.20,1:02:51.19,yin,,0,0,0,,如果你想要这个精度\N{\fs12}if you want that kind of accuracy, that's going
Dialogue: 0,1:02:51.19,1:02:54.24,yin,,0,0,0,,它会消耗电量 因为它会持续通信GPS\N{\fs12}to use your battery because it's going to be constantly doing GPS.
Dialogue: 0,1:02:54.24,1:02:56.38,yin,,0,0,0,,这只在电话插入到电源时适用\N{\fs12}So that would be only if your phone was plugged in,
Dialogue: 0,1:02:56.38,1:03:00.05,yin,,0,0,0,,例如在车上 插入到点烟器或是别的什么里\N{\fs12}like you're in your car, and it's plugged into the cigarette lighter or whatever,
Dialogue: 0,1:03:00.05,1:03:03.62,yin,,0,0,0,,现在车上应该还有USB端口 无论如何\N{\fs12}or I guess they have USB ports nowadays in cars, but anyway,
Dialogue: 0,1:03:03.62,1:03:04.97,yin,,0,0,0,,你需要有电源\N{\fs12}you would want power there.
Dialogue: 0,1:03:04.97,1:03:08.56,yin,,0,0,0,,然后是Best 这也是GPS 不过不那么耗电\N{\fs12}Then there's best, which is also GPS, but not quite as power hungry,
Dialogue: 0,1:03:08.56,1:03:10.72,yin,,0,0,0,,然后一直往下 使用wifi\N{\fs12}and then all the way down using wi-fi
Dialogue: 0,1:03:10.72,1:03:13.21,yin,,0,0,0,,这些东西的精度越来越弱\N{\fs12}and these other things to less and less accuracy,
Dialogue: 0,1:03:13.21,1:03:18.49,yin,,0,0,0,,无论位置如何获得 它都会汇报使用的精度是多少\N{\fs12}but how ever the location was found, it will also report to you what accuracy it used.
Dialogue: 0,1:03:18.49,1:03:23.09,yin,,0,0,0,,无论是水平方向 还是竖直方向的高度\N{\fs12}Both in terms of horizontally and then altitude wise, vertically.
Dialogue: 0,1:03:23.09,1:03:27.30,yin,,0,0,0,,理解精度关系到电量\N{\fs12}Understand that accuracy means power.
Dialogue: 0,1:03:27.30,1:03:30.63,yin,,0,0,0,,要求越精准 所耗电量也会越大\N{\fs12}The more accuracy you ask for, the more power you're going to use.
Dialogue: 0,1:03:30.63,1:03:34.36,yin,,0,0,0,,请选择程序能工作的最小精度\N{\fs12}So ask for the least accuracy your application can deal
Dialogue: 0,1:03:34.36,1:03:37.08,yin,,0,0,0,,这样就能避免用电过度\N{\fs12}with so that you use as little power as possible.
Dialogue: 0,1:03:37.08,1:03:39.26,yin,,0,0,0,,这一点很重要\N{\fs12}Very important point.
Dialogue: 0,1:03:39.26,1:03:41.66,yin,,0,0,0,,这里还有一些属性 我不打算讲\N{\fs12}Okay, some other properties there, I'm not really going
Dialogue: 0,1:03:41.66,1:03:43.03,yin,,0,0,0,,这里我只提供幻灯片\N{\fs12}to talk about them, you have the slides for them.
Dialogue: 0,1:03:43.03,1:03:44.47,yin,,0,0,0,,很明显的东西 速度\N{\fs12}Obvious things, speed
Dialogue: 0,1:03:44.47,1:03:48.08,yin,,0,0,0,,通过看所有点如何随时间运动来计算\N{\fs12}is calculated by seeing all the points that you're moving through time,
Dialogue: 0,1:03:48.08,1:03:51.15,yin,,0,0,0,,速度可以计算 诸如此类\N{\fs12}and it can calculate your speed, things like that.
Dialogue: 0,1:03:51.15,1:03:54.19,yin,,0,0,0,,那如何获得这些Core Location对象呢\N{\fs12}So how do you get one of these core location guys?
Dialogue: 0,1:03:54.19,1:03:58.10,yin,,0,0,0,,我要获得一个Core Location对象 它会告诉我我在哪\N{\fs12}I want to get a core location object, it says where I am right now.
Dialogue: 0,1:03:58.10,1:04:01.85,yin,,0,0,0,,答案是 使用这个类 名为CLLocationManager\N{\fs12}And the answer is, you use this class called CL location manager.
Dialogue: 0,1:04:01.85,1:04:05.72,yin,,0,0,0,,你实例化一个CLLocationManager\N{\fs12}So you instantiate a core location manager, CLLocationManager
Dialogue: 0,1:04:05.74,1:04:08.00,yin,,0,0,0,,然后你进行一些设置\N{\fs12}and you're going to set some things up about it,
Dialogue: 0,1:04:08.00,1:04:11.41,yin,,0,0,0,,然后你要它开始告诉你 你在哪里\N{\fs12}and then you're going to tell it to start telling you where you are,
Dialogue: 0,1:04:11.41,1:04:12.83,yin,,0,0,0,,它有一个委托\N{\fs12}and it's got a delegate,
Dialogue: 0,1:04:12.83,1:04:14.48,yin,,0,0,0,,它会告诉委托 你在哪里\N{\fs12}and it's going to start telling that delegate where you are.
Dialogue: 0,1:04:14.48,1:04:15.63,yin,,0,0,0,,这就是它的工作方式\N{\fs12}So that's basically how it works.
Dialogue: 0,1:04:15.63,1:04:19.21,yin,,0,0,0,,在调试器中 你可以模拟你的位置\N{\fs12}Now, you can simulate where you are, by the way, in the debugger.
Dialogue: 0,1:04:19.21,1:04:23.23,yin,,0,0,0,,使用调试栏的这个下拉菜单\N{\fs12}With this little thing down by the debug bar,
Dialogue: 0,1:04:23.23,1:04:26.52,yin,,0,0,0,,这里有一些位置 你可以模拟\N{\fs12}place where the pause and all that, you can just simulate where you are,
Dialogue: 0,1:04:26.52,1:04:28.36,yin,,0,0,0,,你还可以往其中添加地点\N{\fs12}you can even add places that you are,
Dialogue: 0,1:04:28.36,1:04:31.13,yin,,0,0,0,,你可以在这里有很多位置\N{\fs12}if you want to like have a whole series of locations
Dialogue: 0,1:04:31.13,1:04:34.43,yin,,0,0,0,,用于检查你的应用程序是否能够正常工作\N{\fs12}that you want to check running through to see if your application is working.
Dialogue: 0,1:04:34.43,1:04:38.99,yin,,0,0,0,,这是一个模拟位置的很酷的方式\N{\fs12}So this is a really cool way to simulate being somewhere.
Dialogue: 0,1:04:38.99,1:04:40.75,yin,,0,0,0,,好 CLLocationManager\N{\fs12}Alright, so CL location manager,
Dialogue: 0,1:04:40.75,1:04:43.46,yin,,0,0,0,,如何使用这个来得到我们的位置呢\N{\fs12}how do we use this thing to get our location?
Dialogue: 0,1:04:43.46,1:04:46.53,yin,,0,0,0,,你创建它 然后检查你的硬件\N{\fs12}You create it, you check to see what hardware you have,
Dialogue: 0,1:04:46.53,1:04:52.09,yin,,0,0,0,,因为不同的设备iPhone4 iPhone5 iPad\N{\fs12}because every different device, iPhone 4, iPhone 5, iPads,
Dialogue: 0,1:04:52.09,1:04:55.82,yin,,0,0,0,,都有不同的硬件 用于确定位置\N{\fs12}have different hardware in them for figuring out where they are,
Dialogue: 0,1:04:55.82,1:04:58.81,yin,,0,0,0,,因此 你要检查硬件\N{\fs12}and so you're going to check to see what's available.
Dialogue: 0,1:04:58.81,1:05:02.28,yin,,0,0,0,,然后 你要设定这个委托\N{\fs12}Then you're going to add, set this delegate
Dialogue: 0,1:05:02.28,1:05:04.40,yin,,0,0,0,,为你想要的任意对象\N{\fs12}to be any object you want, and then you're going
Dialogue: 0,1:05:04.40,1:05:08.33,yin,,0,0,0,,然后你要配置 你要怎样的更新 精度这些\N{\fs12}to configure it for what kind of location updates you want, accuracy, things like that,
Dialogue: 0,1:05:08.33,1:05:09.78,yin,,0,0,0,,然后让它运行\N{\fs12}and then you're going to start it running.
Dialogue: 0,1:05:09.78,1:05:13.66,yin,,0,0,0,,它这就会向你汇报 你在哪里\N{\fs12}And it's going to start reporting to you where you are.
Dialogue: 0,1:05:13.66,1:05:16.77,yin,,0,0,0,,那么 有哪些位置监控可用呢\N{\fs12}So what kinds of location monitoring are available?
Dialogue: 0,1:05:16.77,1:05:20.27,yin,,0,0,0,,有基于精度的汇报\N{\fs12}There is accuracy based reporting.
Dialogue: 0,1:05:20.29,1:05:25.29,yin,,0,0,0,,你指定一个精度 它在精度范围内告诉你你在哪\N{\fs12}So you specify an accuracy and it will tell you to that accuracy where you are.
Dialogue: 0,1:05:25.29,1:05:28.25,yin,,0,0,0,,你还可以得到更新\N{\fs12}There's updates that you can get
Dialogue: 0,1:05:28.25,1:05:32.91,yin,,0,0,0,,它只在重大位置变化时才会发消息给你\N{\fs12}where it will send you a message only when a significant change in position has happened.
Dialogue: 0,1:05:32.91,1:05:36.89,yin,,0,0,0,,假想这里使用的是电话塔这之类\N{\fs12}Imagine maybe it's using cell towers or something there,
Dialogue: 0,1:05:36.89,1:05:40.63,yin,,0,0,0,,也有可能使用的是wifi\N{\fs12}or if wi-fi is fired up for other reasons, it might be able to be using wi-fi, right?
Dialogue: 0,1:05:40.63,1:05:42.99,yin,,0,0,0,,估计不会是GPS\N{\fs12}But it's probably not going to use GPS.
Dialogue: 0,1:05:42.99,1:05:45.42,yin,,0,0,0,,只在重大变化发生时告诉你\N{\fs12}Only when significant changes occur.
Dialogue: 0,1:05:45.42,1:05:47.25,yin,,0,0,0,,然后还有基于区域的更新\N{\fs12}You also have region based updates.
Dialogue: 0,1:05:47.25,1:05:49.75,yin,,0,0,0,,在干洗店周围设一个圈\N{\fs12}Put a little circle around the dry cleaners,
Dialogue: 0,1:05:49.75,1:05:54.58,yin,,0,0,0,,你经过时 它会告诉你 你正在干洗店附近\N{\fs12}when you walk by or drive by, it will tell you, "Oh, you're by the dry cleaner."
Dialogue: 0,1:05:54.58,1:05:55.40,yin,,0,0,0,,这是区域\N{\fs12}So that's region.
Dialogue: 0,1:05:55.40,1:05:58.95,yin,,0,0,0,,你可以设定一个小的圆形或信标区域 我会谈到这些\N{\fs12}So you can set up a little region, circular regions, beacons, we'll talk about those.
Dialogue: 0,1:05:58.95,1:06:01.59,yin,,0,0,0,,然后你还可以监控你的前进方向\N{\fs12}And then you can also monitor your heading.
Dialogue: 0,1:06:01.59,1:06:03.77,yin,,0,0,0,,我正朝哪个方向走\N{\fs12}So which way am I walking?
Dialogue: 0,1:06:03.77,1:06:07.10,yin,,0,0,0,,这可能会用到罗盘 可能会用到GPS\N{\fs12}Okay, so that might be using a compass, might be using GPS,
Dialogue: 0,1:06:07.10,1:06:08.94,yin,,0,0,0,,取决于设备有什么\N{\fs12}just depends on what the device has.
Dialogue: 0,1:06:08.94,1:06:12.24,yin,,0,0,0,,我说了 你首先应该检查能力\N{\fs12}So the first thing I said was, you've got to check the capabilities.
Dialogue: 0,1:06:12.24,1:06:15.25,yin,,0,0,0,,这里有一些方法 出于时间考虑 我不会都讲\N{\fs12}So here's a whole bunch of methods, I'm not going to go through them for time reasons,
Dialogue: 0,1:06:15.25,1:06:17.28,yin,,0,0,0,,不过你需要检查这些\N{\fs12}but you need to check these.
Dialogue: 0,1:06:17.28,1:06:22.03,yin,,0,0,0,,例如 用户可能会对你关闭定位服务\N{\fs12}Because, for example, the user might have turned off location services for you.
Dialogue: 0,1:06:22.03,1:06:24.14,yin,,0,0,0,,你需要知道 你需要作出应对\N{\fs12}So you've got to know, you've got to deal with that,
Dialogue: 0,1:06:24.14,1:06:25.83,yin,,0,0,0,,你可以要他们重新打开\N{\fs12}either ask them to turn it back on, okay,
Dialogue: 0,1:06:25.83,1:06:29.32,yin,,0,0,0,,这里也可能有受限的情况\N{\fs12}there's this restricted thing for this too.
Dialogue: 0,1:06:29.32,1:06:32.19,yin,,0,0,0,,你也可能在app中做些别的什么\N{\fs12}Or whatever you want to do, or do some different thing in your app,
Dialogue: 0,1:06:32.19,1:06:34.90,yin,,0,0,0,,你可能处在没有这些位置更新的设备\N{\fs12}if you work with all those location updates or whatever,
Dialogue: 0,1:06:34.90,1:06:38.00,yin,,0,0,0,,程序所在的设备甚至有可能没有你想要的硬件\N{\fs12}you might be on a device that doesn't have the hardware you need to do what you want,
Dialogue: 0,1:06:38.00,1:06:42.88,yin,,0,0,0,,最开始创建LocationManager时 你需要检查所有这些\N{\fs12}so you need to all check all this when you first create your location manager.
Dialogue: 0,1:06:42.88,1:06:47.39,yin,,0,0,0,,获得信息后 你可以问LocationManager\N{\fs12}So then getting it, you can ask a location manager,
Dialogue: 0,1:06:47.39,1:06:52.28,yin,,0,0,0,,我现在在哪 但我们从不这样做 我们会用委托\N{\fs12}"where am I right now?" Kind of poll it? We never do that. We use this delegate thing.
Dialogue: 0,1:06:52.28,1:06:53.74,yin,,0,0,0,,下面我来讲讲委托这些\N{\fs12}So let's talk about how the delegate thing works.
Dialogue: 0,1:06:53.74,1:06:56.03,yin,,0,0,0,,首先 你要指定想要的精度\N{\fs12}First, you specify the accuracy.
Dialogue: 0,1:06:56.03,1:07:00.32,yin,,0,0,0,,这是一个LocationManager属性 desiredAccuracy\N{\fs12}This is location manager property, desired accuracy,
Dialogue: 0,1:07:00.32,1:07:01.80,yin,,0,0,0,,之前我讲了精度\N{\fs12}I showed you the accuracies before.
Dialogue: 0,1:07:01.80,1:07:02.96,yin,,0,0,0,,指定这个\N{\fs12}Specify that.
Dialogue: 0,1:07:02.96,1:07:05.42,yin,,0,0,0,,你还要指定一个距离过滤器(distanceFilter)\N{\fs12}And also you can specify a distance filter, in other words,
Dialogue: 0,1:07:05.42,1:07:09.61,yin,,0,0,0,,在用户移动这么远之前 不要告诉我\N{\fs12}until the user moves at least this far, don't even tell me.
Dialogue: 0,1:07:09.61,1:07:15.01,yin,,0,0,0,,如果用户没移动一百米或是一千米 不要跟我讲\N{\fs12}So if they don't go at least 100 meters, or a kilometer, don't tell me about it,
Dialogue: 0,1:07:15.01,1:07:16.58,yin,,0,0,0,,这也能省电\N{\fs12}so that saves battery too.
Dialogue: 0,1:07:16.58,1:07:21.02,yin,,0,0,0,,这些设备中的GPS芯片 特别是最新的那些 都非常棒\N{\fs12}The chip, the GPS chip in these devices, especially newer ones, really awesome.
Dialogue: 0,1:07:21.02,1:07:24.55,yin,,0,0,0,,这里指定的很多东西可以被加载到芯片中\N{\fs12}A lot of this stuff that you specify here gets loaded into the chip,
Dialogue: 0,1:07:24.55,1:07:27.25,yin,,0,0,0,,然后芯片会亲自计算你在哪\N{\fs12}and the chip by itself is calculating where you are
Dialogue: 0,1:07:27.25,1:07:29.04,yin,,0,0,0,,你是否移动了足够远 等等\N{\fs12}and whether you went far enough and all that stuff,
Dialogue: 0,1:07:29.04,1:07:30.27,yin,,0,0,0,,然后重新唤醒手机\N{\fs12}and then waking the phone back up.
Dialogue: 0,1:07:30.27,1:07:33.68,yin,,0,0,0,,整个手机在睡眠 但GPS却在监视\N{\fs12}The whole phone can sleep and the GPS is still watching,
Dialogue: 0,1:07:33.68,1:07:36.69,yin,,0,0,0,,如果你能让这些最好地协作\N{\fs12}and so if you can tune these to be as minimal as possible,
Dialogue: 0,1:07:36.69,1:07:39.67,yin,,0,0,0,,设备的电量会节省很多\N{\fs12}you will save a ton of battery in the device, because only
Dialogue: 0,1:07:39.67,1:07:43.48,yin,,0,0,0,,因为只有GPS芯片在监控\N{\fs12}that GPS chip will be watching, you know, what's going on.
Dialogue: 0,1:07:43.48,1:07:46.96,yin,,0,0,0,,然后更新的获取需要调用方法\N{\fs12}Okay so then you start getting the updates
Dialogue: 0,1:07:46.96,1:07:48.98,yin,,0,0,0,,startUpdatingLocation\N{\fs12}by just calling start updating location,
Dialogue: 0,1:07:48.98,1:07:53.90,yin,,0,0,0,,你的委托会基于你指定的精度和距离过滤器\N{\fs12}and your delegate will start getting sent messages based on the accuracy and the filter
Dialogue: 0,1:07:53.90,1:07:56.35,yin,,0,0,0,,开始得到消息\N{\fs12}that you specify for distance.
Dialogue: 0,1:07:56.35,1:07:58.66,yin,,0,0,0,,这个委托方法是怎样的呢\N{\fs12}What does that delegate method look like?
Dialogue: 0,1:07:58.66,1:08:02.45,yin,,0,0,0,,locationManager didUpdateLocation是其中之一\N{\fs12}Location manager did update to location from location, is one of the ones.
Dialogue: 0,1:08:02.45,1:08:04.37,yin,,0,0,0,,其实还有其它一些\N{\fs12}There's actually some other ones that you could get sent,
Dialogue: 0,1:08:04.37,1:08:06.78,yin,,0,0,0,,你可以检查一下这个的说明文档\N{\fs12}so you want to check the documentation on this one,
Dialogue: 0,1:08:06.78,1:08:09.44,yin,,0,0,0,,不过这个最基本 它说 好\N{\fs12}but this is the basic one, where it's saying "Okay,
Dialogue: 0,1:08:09.44,1:08:12.70,yin,,0,0,0,,我得到了一个新位置 在这里\N{\fs12}I got a new location, here it is," that location
Dialogue: 0,1:08:12.70,1:08:16.59,yin,,0,0,0,,这个位置显然有精度 时间戳等所有这些\N{\fs12}of course will have accuracy and time stamp, all these other things in there,
Dialogue: 0,1:08:16.59,1:08:20.66,yin,,0,0,0,,它会给你一个位置 便于你来使用\N{\fs12}and it just gives you the fun location just for your own convenience,
Dialogue: 0,1:08:20.66,1:08:24.88,yin,,0,0,0,,如果你只想看差异 你就不需要跟踪\N{\fs12}so you don't have to keep it if you just want to see the difference.
Dialogue: 0,1:08:24.88,1:08:27.97,yin,,0,0,0,,这是这个 LocationManager在我看来非常简单\N{\fs12}So that's it. It's quite simple, actually to use this location manager.
Dialogue: 0,1:08:27.97,1:08:31.60,yin,,0,0,0,,不过要在一小时内耗完用户的电量也很容易\N{\fs12}It's also quite simple to drain the user's battery in about an hour,
Dialogue: 0,1:08:31.60,1:08:34.26,yin,,0,0,0,,务必小心 务必知道自己在做什么\N{\fs12}okay, so be careful and know what you're doing here.
Dialogue: 0,1:08:34.26,1:08:38.70,yin,,0,0,0,,跟踪前进方向也有一个类似的API\N{\fs12}There's a similar API for heading, for tracking the heading.
Dialogue: 0,1:08:38.70,1:08:41.17,yin,,0,0,0,,委托可以汇报错误\N{\fs12}The delegate can report errors, and this is one case.
Dialogue: 0,1:08:41.17,1:08:44.76,yin,,0,0,0,,很多时候 我在demo中都对NSError说nil\N{\fs12}A lot of times you see me in my demos, I just say nil for the NS error,
Dialogue: 0,1:08:44.76,1:08:46.21,yin,,0,0,0,,我忽略了错误\N{\fs12}and I ignore errors,
Dialogue: 0,1:08:46.21,1:08:48.66,yin,,0,0,0,,有时 这样做没问题 例如Flickr取回时\N{\fs12}and sometimes that's okay, like if I'm doing a Flickr fetch
Dialogue: 0,1:08:48.66,1:08:50.62,yin,,0,0,0,,失败了也没关系 因为我知道\N{\fs12}and if it fails, I just don't care because I know I'm going
Dialogue: 0,1:08:50.62,1:08:52.72,yin,,0,0,0,,二十分钟内我还会再次取回\N{\fs12}to be doing another fetch in 20 minutes,
Dialogue: 0,1:08:52.72,1:08:55.18,yin,,0,0,0,,于是我就让它失败 其实哪怕那里\N{\fs12}so I'll just let it fail, although even there,
Dialogue: 0,1:08:55.18,1:08:57.61,yin,,0,0,0,,我也应该检查 如果它持续失败\N{\fs12}I probably want to check it, and if it keeps failing over and over,
Dialogue: 0,1:08:57.61,1:09:00.43,yin,,0,0,0,,或许我就应该让用户参与进来\N{\fs12}then I need to maybe get the user involved.
Dialogue: 0,1:09:00.43,1:09:02.25,yin,,0,0,0,,不过这里 你需要检查错误\N{\fs12}But here, you really want to check the errors.
Dialogue: 0,1:09:02.25,1:09:04.85,yin,,0,0,0,,还是出于时间考虑 我只能\N{\fs12}Okay, and again for time reasons, I don't have time to go
Dialogue: 0,1:09:04.85,1:09:07.52,yin,,0,0,0,,细到说这些错误有可能出现\N{\fs12}through the details more than just that these errors can occur,
Dialogue: 0,1:09:07.52,1:09:10.03,yin,,0,0,0,,不过面对特定错误 你需要做特定的事情\N{\fs12}but there are certain things you need to do in certain errors
Dialogue: 0,1:09:10.03,1:09:16.04,yin,,0,0,0,,这样才能写出优秀的Core Location获取app\N{\fs12}if you really want to be a good core location getting app.
Dialogue: 0,1:09:16.04,1:09:19.30,yin,,0,0,0,,后台 这些位置更新能否在后台获得\N{\fs12}Um, background, can you get these location updates in the background?
Dialogue: 0,1:09:19.30,1:09:22.25,yin,,0,0,0,,我保证我会讲这个 而且还有一张幻灯片\N{\fs12}Okay, I promised I was going to talk about this, and I even have a slide about it.
Dialogue: 0,1:09:22.25,1:09:24.41,yin,,0,0,0,,答案是 能\N{\fs12}And the answer is, you can.
Dialogue: 0,1:09:24.41,1:09:27.66,yin,,0,0,0,,你甚至可以让app\N{\fs12}You can even sign up to be the kind of app
Dialogue: 0,1:09:27.66,1:09:33.97,yin,,0,0,0,,一般只在后台运行位置管理器\N{\fs12}that gets the location manager will just run in the background normally.
Dialogue: 0,1:09:33.97,1:09:35.38,yin,,0,0,0,,这是相同位置 记得吗\N{\fs12}It's the same place, remember when we went
Dialogue: 0,1:09:35.38,1:09:37.25,yin,,0,0,0,,我在讲后台取回时讲过\N{\fs12}and did the background fetches, we had to go
Dialogue: 0,1:09:37.25,1:09:39.59,yin,,0,0,0,,有项目设定可以选\N{\fs12}to our project settings, and we clicked that switch?
Dialogue: 0,1:09:39.59,1:09:41.91,yin,,0,0,0,,位置也有一个开关\N{\fs12}There's another switch there that's just location,
Dialogue: 0,1:09:41.91,1:09:44.48,yin,,0,0,0,,开启后 你就会得到这个\N{\fs12}and when you do that, you'll start getting this.
Dialogue: 0,1:09:44.48,1:09:48.66,yin,,0,0,0,,不过这只适用于健身app\N{\fs12}But that's really for apps like, you know, a fitness app
Dialogue: 0,1:09:48.66,1:09:51.32,yin,,0,0,0,,你把手机放口袋里跑步\N{\fs12}where you're going off to do a mile run and your phone is
Dialogue: 0,1:09:51.32,1:09:53.94,yin,,0,0,0,,手机在后台记录你的进度\N{\fs12}in the pocket and it's tracking your progress,
Dialogue: 0,1:09:53.94,1:09:56.59,yin,,0,0,0,,你把手机调好\N{\fs12}and you've tuned it to, you know,
Dialogue: 0,1:09:56.59,1:10:00.30,yin,,0,0,0,,让它进行联合 记录轨迹 并向你汇报\N{\fs12}coalesce things and to keep track of it and report it to you.
Dialogue: 0,1:10:00.30,1:10:03.31,yin,,0,0,0,,如果你做健身app 你可能会很快耗光电量\N{\fs12}You know, when you do a fitness app, you can really drain the battery fast.
Dialogue: 0,1:10:03.31,1:10:06.11,yin,,0,0,0,,顺便说下 期末项目不要做健身app\N{\fs12}So if you're doing a fitness app, by the way, which don't do
Dialogue: 0,1:10:06.11,1:10:07.82,yin,,0,0,0,,顺便说下 期末项目不要做健身app\N{\fs12}that for your final project, but,
Dialogue: 0,1:10:07.82,1:10:11.76,yin,,0,0,0,,不过如果你以后真的要做健身app\N{\fs12}if you're doing a fitness app, for the real, for real,
Dialogue: 0,1:10:11.76,1:10:14.65,yin,,0,0,0,,那么你就需要很清楚自己在做什么\N{\fs12}then you really got to know what you're doing. So really investigate that
Dialogue: 0,1:10:14.66,1:10:17.91,yin,,0,0,0,,否则电量会受不了 不过你还是可以做很多很酷的事\N{\fs12}because you really want to be low power, but you can still do lots of cool things
Dialogue: 0,1:10:17.91,1:10:20.94,yin,,0,0,0,,这在跟踪用户跑步时是可以做到的\N{\fs12}when it comes to tracking where the user's running.
Dialogue: 0,1:10:20.94,1:10:24.04,yin,,0,0,0,,无论如何 像这样在后台运行\N{\fs12}However, running in the background like that,
Dialogue: 0,1:10:24.04,1:10:26.85,yin,,0,0,0,,由于会用掉很多电量\N{\fs12}since it uses a lot of battery, is generally only for very,
Dialogue: 0,1:10:26.85,1:10:29.28,yin,,0,0,0,,只用于极少量的app\N{\fs12}very, very, very small number of apps.
Dialogue: 0,1:10:29.28,1:10:33.68,yin,,0,0,0,,不过有两种方式可以获得关于你在哪的后台通知\N{\fs12}But there are two ways to get background notifications about where you are, okay,
Dialogue: 0,1:10:33.68,1:10:35.70,yin,,0,0,0,,且只消耗很少电量\N{\fs12}that are very low power,
Dialogue: 0,1:10:35.70,1:10:38.04,yin,,0,0,0,,但它们都非常粗略\N{\fs12}and they're a little coarser granularity, they're not going
Dialogue: 0,1:10:38.04,1:10:41.35,yin,,0,0,0,,它们不能准确知道你在什么地方\N{\fs12}to be running down the trail telling me exactly where I went on the trail,
Dialogue: 0,1:10:41.35,1:10:44.35,yin,,0,0,0,,不过它们能大致告诉你 你在哪\N{\fs12}but they are telling you kind of where you are
Dialogue: 0,1:10:44.35,1:10:46.12,yin,,0,0,0,,这对很多app都很有用\N{\fs12}and are really useful for a lot of apps.
Dialogue: 0,1:10:46.12,1:10:48.28,yin,,0,0,0,,我来讲讲这两种方式 你可以得到通知\N{\fs12}So let's talk about the two ways that you can get notified
Dialogue: 0,1:10:48.28,1:10:50.62,yin,,0,0,0,,后台和前台都行\N{\fs12}in the background and in the foreground.
Dialogue: 0,1:10:50.62,1:10:53.15,yin,,0,0,0,,只要能在后台得到通知\N{\fs12}If you can get notified in the background, then you're going
Dialogue: 0,1:10:53.15,1:10:55.59,yin,,0,0,0,,你当然也会自动在前台得到通知\N{\fs12}to get notified in the foreground automatically.
Dialogue: 0,1:10:55.59,1:10:58.33,yin,,0,0,0,,这就是一种后台和前台都得到通知的方式\N{\fs12}Here's a way that background and foreground, you can get notified.
Dialogue: 0,1:10:58.33,1:11:02.92,yin,,0,0,0,,第一种方法是显著位置变化监控\N{\fs12}The first one is called significant location change monitoring,
Dialogue: 0,1:11:02.92,1:11:05.12,yin,,0,0,0,,你只是获得一个CLLocationManager\N{\fs12}and you just get a CL location manager
Dialogue: 0,1:11:05.12,1:11:08.48,yin,,0,0,0,,然后你说startMonitoringSignificantLocationChanges\N{\fs12}and you can say start monitoring significant location changes,
Dialogue: 0,1:11:08.48,1:11:12.00,yin,,0,0,0,,然后 当用户移动了显著距离时\N{\fs12}and then when the user moves a significant amount of distance,
Dialogue: 0,1:11:12.00,1:11:14.94,yin,,0,0,0,,你就能通过委托得到通知\N{\fs12}you will get notified via your delegate.
Dialogue: 0,1:11:14.94,1:11:16.72,yin,,0,0,0,,就这么简单\N{\fs12}It's as simple as that.
Dialogue: 0,1:11:16.72,1:11:19.15,yin,,0,0,0,,哪怕是在后台 这也能工作\N{\fs12}And this works even if you're in the background.
Dialogue: 0,1:11:19.15,1:11:22.28,yin,,0,0,0,,哪怕在应用没有运行的时候\N{\fs12}Even if your application is not running.
Dialogue: 0,1:11:22.28,1:11:27.47,yin,,0,0,0,,应用也会得到启动 告诉用户移动到了新地方\N{\fs12}You will get launched to be told that the person moved to a new space.
Dialogue: 0,1:11:27.47,1:11:31.24,yin,,0,0,0,,这是一个很妙的API 非常节能高效\N{\fs12}This is an awesome API, okay, very power efficient
Dialogue: 0,1:11:31.24,1:11:33.98,yin,,0,0,0,,因为它知道如何管理跟踪位置\N{\fs12}because it knows how to manage tracking where you are
Dialogue: 0,1:11:33.98,1:11:37.14,yin,,0,0,0,,以一种高效的方式 同时超级有用\N{\fs12}in an efficient way and still super useful for you.
Dialogue: 0,1:11:37.14,1:11:41.70,yin,,0,0,0,,它唯一的缺点就是要求显著距离变化\N{\fs12}The only downside of it is significant distance. You have to be going significant distance.
Dialogue: 0,1:11:41.70,1:11:42.27,yin,,0,0,0,,有问题\N{\fs12}Question?
Dialogue: 0,1:11:44.80,1:11:47.39,yin,,0,0,0,,问题是 我们对显著的定义有没有控制\N{\fs12}The question is do we have any control of the definition of significant,
Dialogue: 0,1:11:47.39,1:11:48.88,yin,,0,0,0,,答案是没有\N{\fs12}the answer is no.
Dialogue: 0,1:11:50.24,1:11:52.35,yin,,0,0,0,,当你的程序没有运行\N{\fs12}So yeah, so when you get launched in the background,
Dialogue: 0,1:11:52.35,1:11:54.13,yin,,0,0,0,,然后在后台被启动时\N{\fs12}if you get launched, like you're not running,
Dialogue: 0,1:11:54.13,1:11:58.26,yin,,0,0,0,,application didFinishLaunchingWithOptions会被发送\N{\fs12}you'll get your application did finish launching with options thing will be sent,
Dialogue: 0,1:11:58.26,1:12:00.36,yin,,0,0,0,,不过这里会有一个字典\N{\fs12}but there will be a dictionary there, and one of the things
Dialogue: 0,1:12:00.36,1:12:03.87,yin,,0,0,0,,字典中会有UIApplicationLaunchOptionsLocationKey\N{\fs12}in the dictionary will be UI application launch options location key,
Dialogue: 0,1:12:03.87,1:12:06.63,yin,,0,0,0,,如果里面有这个键 这意味着你被启动了\N{\fs12}and if that key is in there, that means you got launched
Dialogue: 0,1:12:06.63,1:12:10.59,yin,,0,0,0,,因为有显著变化发生 你就是这样知道 哦\N{\fs12}because a significant change happened, so that's how you know, "Oh,
Dialogue: 0,1:12:10.59,1:12:12.01,yin,,0,0,0,,因此我被启动了\N{\fs12}that's why I got launched," okay?
Dialogue: 0,1:12:12.01,1:12:13.51,yin,,0,0,0,,因为这个键\N{\fs12}Because of that key.
Dialogue: 0,1:12:13.51,1:12:22.39,yin,,0,0,0,,另外一种在后台定位的方式是基于区域的监控 非常类似\N{\fs12}Another way to find out in the background is region based monitoring, very similar,
Dialogue: 0,1:12:22.39,1:12:26.07,yin,,0,0,0,,只是这里 你指定的是一个圆形区域\N{\fs12}except for here you actually specify either a circular region
Dialogue: 0,1:12:26.07,1:12:28.81,yin,,0,0,0,,或是一个信标区域\N{\fs12}or you can also specify a beacon.
Dialogue: 0,1:12:28.81,1:12:30.35,yin,,0,0,0,,等下我会讲到这个\N{\fs12}And I'll talk about that in a second.
Dialogue: 0,1:12:30.35,1:12:33.12,yin,,0,0,0,,你可以指定地球上的一个圆形区域\N{\fs12}So you specify circular region on the planet, you know,
Dialogue: 0,1:12:33.12,1:12:35.13,yin,,0,0,0,,一个坐标 以及周围的半径\N{\fs12}coordinate, and then a radius around it,
Dialogue: 0,1:12:35.13,1:12:38.88,yin,,0,0,0,,只要用户进入这个区域 你就会得到通知\N{\fs12}and if the user goes into that region, you'll get notified,
Dialogue: 0,1:12:38.88,1:12:42.68,yin,,0,0,0,,你的委托会发送消息 有必要时你还会被启动\N{\fs12}your delegate will send a message, or you'll get launched if necessary,
Dialogue: 0,1:12:42.70,1:12:44.02,yin,,0,0,0,,这样你就能知道\N{\fs12}and you'll find out.
Dialogue: 0,1:12:44.02,1:12:46.01,yin,,0,0,0,,没错 这个能有多少是受限制的\N{\fs12}Now, yes, there's a limit to how many of these you can have,
Dialogue: 0,1:12:46.01,1:12:49.96,yin,,0,0,0,,具体多少我不知道 可能是40个左右吧 你的app\N{\fs12}I don't know what it is, 40 or something like that, your app,
Dialogue: 0,1:12:49.96,1:12:52.64,yin,,0,0,0,,不过 这个也非常高效\N{\fs12}and but this is also incredibly efficient.
Dialogue: 0,1:12:52.64,1:12:56.59,yin,,0,0,0,,这个也作用于低能耗高效率的基础上\N{\fs12}So this is happening at a very lower, power-efficient level as well.
Dialogue: 0,1:12:56.59,1:13:03.35,yin,,0,0,0,,圆形区域很明显 你创建一个CLCircularRegion\N{\fs12}The circular region is obvious to create, you just create a CL circular region.
Dialogue: 0,1:13:03.35,1:13:05.40,yin,,0,0,0,,信标更有趣一些\N{\fs12}The beacon is a little more interesting,
Dialogue: 0,1:13:05.40,1:13:07.85,yin,,0,0,0,,我没有太多时间讲信标\N{\fs12}and I don't really have time to talk about the beacon,
Dialogue: 0,1:13:07.85,1:13:13.45,yin,,0,0,0,,信标针对的不是地球上的位置 而是另一个设备\N{\fs12}but a beacon is basically not a place on earth, but it's another device.
Dialogue: 0,1:13:13.45,1:13:17.52,yin,,0,0,0,,你可以写个程序 让设备成为信标\N{\fs12}It's possible to write an application that essentially is a beacon,
Dialogue: 0,1:13:17.52,1:13:19.43,yin,,0,0,0,,它会一直广播出去\N{\fs12}and it's broadcasting all the time,
Dialogue: 0,1:13:19.43,1:13:23.52,yin,,0,0,0,,如果你的app离它很近 你会被唤醒 设备会告诉你\N{\fs12}and if your app comes close to it, you'll get woken up and told
Dialogue: 0,1:13:23.52,1:13:26.41,yin,,0,0,0,,你进入到了广播设备附近的区域内\N{\fs12}that you went into the region of that broadcasting device.
Dialogue: 0,1:13:26.41,1:13:28.47,yin,,0,0,0,,这是iOS7的新特性 棒极了\N{\fs12}This is new for iOS 7, incredible.
Dialogue: 0,1:13:28.47,1:13:31.87,yin,,0,0,0,,我很想看看 人们会用这个特性做些什么\N{\fs12}Okay, I'm really interested to see what people come up with this technology.
Dialogue: 0,1:13:31.87,1:13:35.80,yin,,0,0,0,,成为一个信标… 这里 顺便说下\N{\fs12}Becoming a beacon is, here, by the way,
Dialogue: 0,1:13:35.80,1:13:39.46,yin,,0,0,0,,是一个委托方法 didEnterRegion\N{\fs12}is the delegate method you get, did enter region
Dialogue: 0,1:13:39.46,1:13:43.14,yin,,0,0,0,,还有didExitRegion 你会被启动\N{\fs12}and did exit region, and you'll get launched.
Dialogue: 0,1:13:43.14,1:13:50.17,yin,,0,0,0,,信标 成为一个… 抱歉 这里我有点快进了…\N{\fs12}The beacon is becoming a-- sorry, I'm fast forwarding here--
Dialogue: 0,1:13:50.17,1:13:52.88,yin,,0,0,0,,区域是按名称跟踪的 这是因为\N{\fs12}uh, yeah, regions are tracked by name, that's because they have
Dialogue: 0,1:13:52.88,1:13:55.36,yin,,0,0,0,,它们在你没有启动时需要退出\N{\fs12}to exist when you're not launching,
Dialogue: 0,1:13:55.36,1:13:58.38,yin,,0,0,0,,还有最大监控距离\N{\fs12}there are maximum monitoring distances.
Dialogue: 0,1:13:58.38,1:13:59.69,yin,,0,0,0,,好 信标\N{\fs12}Uh, okay so beacons.
Dialogue: 0,1:13:59.69,1:14:04.61,yin,,0,0,0,,要成为一个信标 你需要使用Core Bluetooth库\N{\fs12}To become a beacon, you need to use the core bluetooth library,
Dialogue: 0,1:14:04.61,1:14:08.42,yin,,0,0,0,,这不属于Core Location\N{\fs12}it's not part of CL core location library.
Dialogue: 0,1:14:08.42,1:14:12.81,yin,,0,0,0,,你可以查阅CBPeripheralManager\N{\fs12}So you want to look up CB, core bluetooth, peripheral manager,
Dialogue: 0,1:14:12.81,1:14:15.11,yin,,0,0,0,,看看如何成为一个信标\N{\fs12}and find out if you want to become a beacon.
Dialogue: 0,1:14:15.11,1:14:17.37,yin,,0,0,0,,你想成为信标 而不是探测信标\N{\fs12}Like you want to be the beacon, not detect a beacon,
Dialogue: 0,1:14:17.37,1:14:19.20,yin,,0,0,0,,探测信标用这个\N{\fs12}but if you want to detect a beacon, you use this.
Dialogue: 0,1:14:19.20,1:14:23.47,yin,,0,0,0,,你创建一个信标区域 CLBeaconRegion\N{\fs12}You create a region, which is a beacon region, CL beacon region,
Dialogue: 0,1:14:23.47,1:14:27.58,yin,,0,0,0,,你指定信标的特殊标识符\N{\fs12}and you specify its special identifier that identifies
Dialogue: 0,1:14:27.58,1:14:29.77,yin,,0,0,0,,靠近时它就会告诉你\N{\fs12}that beacon, and it just tells you when you get close,
Dialogue: 0,1:14:29.77,1:14:32.49,yin,,0,0,0,,它甚至可以告诉你 你离信标有多近\N{\fs12}it will even tell you how close you are to the beacon.
Dialogue: 0,1:14:32.49,1:14:36.80,yin,,0,0,0,,你离它是远是近 还是正在它上面\N{\fs12}Are you near it, or far, or right on top of it.
Dialogue: 0,1:14:36.80,1:14:38.09,yin,,0,0,0,,这非常酷\N{\fs12}So it's pretty darn cool.
Dialogue: 0,1:14:38.09,1:14:39.90,yin,,0,0,0,,这就是区域 区域监控\N{\fs12}So that's regions. Region monitoring.
Dialogue: 0,1:14:39.90,1:14:44.13,yin,,0,0,0,,区域和显著变化都能在后台通知你\N{\fs12}So both region and significant changes will notify you in the background.
Dialogue: 0,1:14:44.13,1:14:46.61,yin,,0,0,0,,MapKit留给下一讲吧\N{\fs12}So map kit, I'm going to talk about next time.
Dialogue: 0,1:14:46.61,1:14:49.16,yin,,0,0,0,,它是一个用户界面\N{\fs12}And it is basically a user interface
Dialogue: 0,1:14:49.16,1:14:51.54,yin,,0,0,0,,显示这些美丽的地图\N{\fs12}for putting these beautiful maps,
Dialogue: 0,1:14:51.54,1:14:54.46,yin,,0,0,0,,不过显然 我们需要这些Core Location的东西\N{\fs12}but obviously we needed that core location stuff to know
Dialogue: 0,1:14:54.46,1:14:58.23,yin,,0,0,0,,来知道我们在哪 东西在哪 这之类\N{\fs12}about how to find out about where we are, and where things are, and stuff like that.
Dialogue: 0,1:14:58.23,1:15:03.06,yin,,0,0,0,,周三再接着讲 到时见\N{\fs12}So we'll pick that up on Wednesday, and I will see you then.
Dialogue: 0,1:15:05.35,1:15:08.93,yin,,0,0,0,,更多内容 请访问我校官网stanford.edu\N{\fs12}> For more, please visit us at Stanford.edu.
