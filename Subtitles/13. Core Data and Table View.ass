[Script Info]
; Script generated by Aegisub 3.2.0
; http://www.aegisub.org/
Title: Default Aegisub file
ScriptType: v4.00+
WrapStyle: 0
ScaledBorderAndShadow: yes
YCbCr Matrix: None

[Aegisub Project Garbage]
Active Line: 3

[V4+ Styles]
Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding
Style: Default,Arial,20,&H00FFFFFF,&H000000FF,&H00000000,&H00000000,0,0,0,0,100,100,0,0,1,2,2,2,10,10,10,1
Style: yin,冬青黑体简体中文 W3,20,&H00FFFFFF,&HF0000000,&H00000000,&H32000000,0,0,0,0,100,100,0,0,1,1,0,2,5,5,5,134

[Events]
Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text
Dialogue: 0,0:00:04.61,0:00:08.05,yin,,0,0,0,,斯坦福大学\N{\fs12}Stanford University
Dialogue: 0,0:00:10.75,0:00:17.96,yin,,0,0,0,,欢迎来到CS193P课程 2013-14秋季第13讲\N{\fs12}Welcome to number 13 of Stanford CS193p, the fall of 2013-14,
Dialogue: 0,0:00:17.96,0:00:21.47,yin,,0,0,0,,今天 我打算讲下期末项目的要求\N{\fs12}and today, I'm going to go over the requirements for your final project,
Dialogue: 0,0:00:21.47,0:00:24.20,yin,,0,0,0,,然后我将再用几张幻灯片\N{\fs12}and then I'm going to talk a little more, a few more slides
Dialogue: 0,0:00:24.20,0:00:25.65,yin,,0,0,0,,讲解Core Data\N{\fs12}about Core Data,
Dialogue: 0,0:00:25.65,0:00:28.15,yin,,0,0,0,,以及它如何同UITableView关联在一起\N{\fs12}and how it hooks up with UI TableView,
Dialogue: 0,0:00:28.15,0:00:29.81,yin,,0,0,0,,这两者可以说是天生一对\N{\fs12}because those two are a match made in heaven,
Dialogue: 0,0:00:29.81,0:00:36.00,yin,,0,0,0,,然后将是巨大的Core Data和TableView的演示\N{\fs12}and then I'm going to do this gigantic Core Data with TableViews demo.
Dialogue: 0,0:00:36.00,0:00:38.11,yin,,0,0,0,,期末项目\N{\fs12}Alright, so you're final projects.
Dialogue: 0,0:00:38.11,0:00:42.47,yin,,0,0,0,,期末项目分两阶段 第一阶段是提交提案\N{\fs12}There's kind of two phases to your final project; one is you have to submit a proposal
Dialogue: 0,0:00:42.47,0:00:43.81,yin,,0,0,0,,我们会审核\N{\fs12}for us, which we'll review.
Dialogue: 0,0:00:43.81,0:00:45.94,yin,,0,0,0,,我们审核的主要是范围\N{\fs12}We're mostly just reviewing it for scope,
Dialogue: 0,0:00:45.94,0:00:49.90,yin,,0,0,0,,确保你选的项目没有太大或是太小\N{\fs12}to make sure you haven't picked too big a project or too small a project.
Dialogue: 0,0:00:49.90,0:00:53.85,yin,,0,0,0,,我们不会去查看你提案中的每一个细节\N{\fs12}Okay, we're not, you know, looking in detail of every single thing you're going to do.
Dialogue: 0,0:00:53.85,0:00:56.39,yin,,0,0,0,,我们只打算检查你的大方向对不对\N{\fs12}We're just trying to make sure you're headed in the right direction.
Dialogue: 0,0:00:56.39,0:00:58.56,yin,,0,0,0,,在期末项目的过程中\N{\fs12}Because over the course of the final project,
Dialogue: 0,0:00:58.56,0:01:01.68,yin,,0,0,0,,你们将和我们进行交流 向我们提问题\N{\fs12}you're going to of course talk to us, and ask us questions and interact
Dialogue: 0,0:01:01.68,0:01:05.70,yin,,0,0,0,,过程中获得一些点子 最终很好地达成目的\N{\fs12}with us to kind of get an idea of getting, you know, hitting a good target at the end.
Dialogue: 0,0:01:05.71,0:01:08.66,yin,,0,0,0,,请快速完成这一阶段\N{\fs12}So, that is really, do immediate.
Dialogue: 0,0:01:08.66,0:01:11.39,yin,,0,0,0,,想好要做什么之后\N{\fs12}We'd like you to get us your proposal. If you know what you're going to do,
Dialogue: 0,0:01:11.39,0:01:13.89,yin,,0,0,0,,请尽快把提案交给我们\N{\fs12}please submit a proposal as soon as possible.
Dialogue: 0,0:01:13.89,0:01:17.92,yin,,0,0,0,,还没想好的人要快想 并尽快提交\N{\fs12}If you don't get on it right away, and submit it as soon as possible, really though
Dialogue: 0,0:01:17.92,0:01:21.28,yin,,0,0,0,,下周三将是提交的截止日期\N{\fs12}by next Wednesday would be the latest we'd want to hear from you.
Dialogue: 0,0:01:21.28,0:01:23.89,yin,,0,0,0,,我很不想这样 不过你们很多人\N{\fs12}And, I hate to say that, because I know a lot of you wait
Dialogue: 0,0:01:23.89,0:01:27.48,yin,,0,0,0,,都喜欢把事拖到最后一天再定 我很理解\N{\fs12}until the day before deadline to do anything, and I understand
Dialogue: 0,0:01:27.48,0:01:29.65,yin,,0,0,0,,但是这个提案需要越早越好\N{\fs12}that impulse, but this is something where you want to get
Dialogue: 0,0:01:29.65,0:01:33.02,yin,,0,0,0,,这样就算出现问题 我们也有时间找你\N{\fs12}that proposal in sooner, in case we have issues, and we can get back to you,
Dialogue: 0,0:01:33.02,0:01:36.19,yin,,0,0,0,,如果这个方案不行 你可以写一个新的提案\N{\fs12}and you either write, maybe come up with a whole new proposal if what you're thinking
Dialogue: 0,0:01:36.19,0:01:38.40,yin,,0,0,0,,如果这个方案不行 你可以写一个新的提案\N{\fs12}about is just not going to work.
Dialogue: 0,0:01:38.40,0:01:40.52,yin,,0,0,0,,然后第二阶段是期末项目本身\N{\fs12}Then the second phase is the final project itself,
Dialogue: 0,0:01:40.52,0:01:43.63,yin,,0,0,0,,这个项目的代码\N{\fs12}and that project, the code for the project,
Dialogue: 0,0:01:43.63,0:01:48.18,yin,,0,0,0,,还有关于项目的两分钟主题演讲幻灯片\N{\fs12}along with the keynote, set of keynote slides for a two minute presentation about your
Dialogue: 0,0:01:48.18,0:01:51.69,yin,,0,0,0,,定在12月6日周五交\N{\fs12}project are due on Friday, December 6.
Dialogue: 0,0:01:51.69,0:01:56.41,yin,,0,0,0,,看起来挺远的 有一个月时间\N{\fs12}So, that seems like that's far away, I know, that's over a month away, right.
Dialogue: 0,0:01:56.41,0:01:59.52,yin,,0,0,0,,现在是11月6日 但这中间有感恩节\N{\fs12}It's November 6 right now, but you got Thanksgiving in there,
Dialogue: 0,0:01:59.52,0:02:04.10,yin,,0,0,0,,其实并没有多长时间 这个期末项目\N{\fs12}so it's really not that far away, and so your final project,
Dialogue: 0,0:02:04.10,0:02:05.65,yin,,0,0,0,,同其它课中的一样\N{\fs12}like a final project in any class,
Dialogue: 0,0:02:05.65,0:02:07.76,yin,,0,0,0,,你有很多周时间来做\N{\fs12}where you get multiple weeks to do it, you do not want to wait
Dialogue: 0,0:02:07.76,0:02:10.38,yin,,0,0,0,,千万别等到最后一周才开始做\N{\fs12}to the last week to get started.
Dialogue: 0,0:02:10.38,0:02:11.81,yin,,0,0,0,,请尽快开始\N{\fs12}So, get started immediately.
Dialogue: 0,0:02:11.81,0:02:15.71,yin,,0,0,0,,到现在 创建一个应用程序所需的知识你们都已经学了\N{\fs12}You have everything you need now to start building an application.
Dialogue: 0,0:02:15.71,0:02:19.62,yin,,0,0,0,,对 期末项目不允许迟交\N{\fs12}Yeah, no late days on the final project at all. Simply will not accept it late.
Dialogue: 0,0:02:19.62,0:02:22.72,yin,,0,0,0,,12月6日午夜 做成怎样都得上交\N{\fs12}Whatever you have on December 6 at midnight, submit it.
Dialogue: 0,0:02:22.72,0:02:26.11,yin,,0,0,0,,因为我只接受这之前上交的东西\N{\fs12}I don't care what it is; submit it, because that's all. I'm not going to accept anything.
Dialogue: 0,0:02:26.11,0:02:28.44,yin,,0,0,0,,因为学生太多了\N{\fs12}I just can't, because I've got a lot of students
Dialogue: 0,0:02:28.44,0:02:31.26,yin,,0,0,0,,我要给所有人评分\N{\fs12}who are taking this for a grade especially, and that's a lot
Dialogue: 0,0:02:31.26,0:02:33.72,yin,,0,0,0,,要保证公平 我需要很长时间\N{\fs12}of time I have to be fair to those people, and also,
Dialogue: 0,0:02:33.72,0:02:35.83,yin,,0,0,0,,因此 我需要尽快开始评分\N{\fs12}I have to get started grading immediately.
Dialogue: 0,0:02:35.83,0:02:38.72,yin,,0,0,0,,你们的陈述将是两分钟\N{\fs12}The presentation that you're going to do, two minutes,
Dialogue: 0,0:02:38.72,0:02:44.47,yin,,0,0,0,,你需要给我们和同学们讲解项目的要点\N{\fs12}it's really just going to be pitching your project to us, to your fellow classmates.
Dialogue: 0,0:02:44.47,0:02:48.03,yin,,0,0,0,,你要把这想成争取风投资金\N{\fs12}If you can imagine, it's like you're trying to pitch a VC
Dialogue: 0,0:02:48.03,0:02:51.17,yin,,0,0,0,,让风投投资到你的公司或你的app\N{\fs12}to invest in your company or to do the app,
Dialogue: 0,0:02:51.17,0:02:53.56,yin,,0,0,0,,或者 你要说服别人买你的东西\N{\fs12}or you're just trying to get people to buy it, or whatever.
Dialogue: 0,0:02:53.56,0:02:55.65,yin,,0,0,0,,陈述要达到这个效果 具体的你们自己看着办\N{\fs12}It's that kind of presentation. I'll leave it up to you.
Dialogue: 0,0:02:55.65,0:02:58.28,yin,,0,0,0,,如果你想 你也可以实况演示程序\N{\fs12}You can certainly do a live demo if you want.
Dialogue: 0,0:02:58.28,0:03:03.98,yin,,0,0,0,,你需要iPhone 4S及以上或iPad 2及以上的设备\N{\fs12}You'll need iPhone 4S or later, or you'll need an iPad 2 or later, in order to hook
Dialogue: 0,0:03:03.98,0:03:09.61,yin,,0,0,0,,来使用这个奇妙的投影系统 使用Apple TV Mirroring\N{\fs12}up to this wonder projection system we have using Apple TV mirroring.
Dialogue: 0,0:03:09.61,0:03:12.60,yin,,0,0,0,,不过陈述并不一定要是实况演示\N{\fs12}But, you don't have to do a live demo.
Dialogue: 0,0:03:12.60,0:03:17.76,yin,,0,0,0,,实况演示很危险 我在课上就经常出错\N{\fs12}Live demos are perilous, as you can see, what I do each lecture,
Dialogue: 0,0:03:17.76,0:03:19.73,yin,,0,0,0,,不过实况演示很高效\N{\fs12}but they also kind of can be effective,
Dialogue: 0,0:03:19.73,0:03:22.76,yin,,0,0,0,,能够很好地展示你的app 你们自己决定\N{\fs12}and a really good way to show off your app, so it's kind of up to you.
Dialogue: 0,0:03:22.76,0:03:24.85,yin,,0,0,0,,项目陈述是必须的\N{\fs12}And, that presentation is required.
Dialogue: 0,0:03:24.85,0:03:26.57,yin,,0,0,0,,我还有一个备选陈述时间\N{\fs12}I will have an alternate presentation time,
Dialogue: 0,0:03:26.57,0:03:28.71,yin,,0,0,0,,也就是季度的最后一堂课\N{\fs12}which is the last lecture of the quarter,
Dialogue: 0,0:03:28.71,0:03:32.63,yin,,0,0,0,,也就是期末考时段前的那一周\N{\fs12}which is the week before the final exam period.
Dialogue: 0,0:03:32.63,0:03:36.54,yin,,0,0,0,,这是这个\N{\fs12}So, that's that.
Dialogue: 0,0:03:36.54,0:03:40.38,yin,,0,0,0,,程序大小是三周作业那么大的工作量\N{\fs12}Yeah, the scope is basically three weeks of homework worth of work.
Dialogue: 0,0:03:40.38,0:03:43.54,yin,,0,0,0,,你们现在应该知道这大概是多少\N{\fs12}You should know by now approximately what that is.
Dialogue: 0,0:03:43.54,0:03:46.15,yin,,0,0,0,,记得原来 学生需要同时通过作业\N{\fs12}Remember in the past when the people have to pass both the homework section
Dialogue: 0,0:03:46.15,0:03:47.38,yin,,0,0,0,,和期末项目\N{\fs12}and the final project separately.
Dialogue: 0,0:03:47.38,0:03:52.12,yin,,0,0,0,,你只要一个不合格 就算另一个得A 你也过不了这门课\N{\fs12}You can't bomb one, and get an A on the other, and pass this class.
Dialogue: 0,0:03:52.12,0:03:53.89,yin,,0,0,0,,期末项目需要能在硬件上奏效\N{\fs12}Your final project has to work on hardware.
Dialogue: 0,0:03:53.89,0:03:57.12,yin,,0,0,0,,你需要证明 可以是在2分钟的demo演示中\N{\fs12}You have to show it working, either in a demo in your two minutes,
Dialogue: 0,0:03:57.12,0:04:03.13,yin,,0,0,0,,如果没有2分钟demo演示 你就需要展示给助教\N{\fs12}or if you don't show a live demo in your two minutes, you have to show your TA.
Dialogue: 0,0:04:03.13,0:04:08.07,yin,,0,0,0,,只算iOS-SDK代码 如果你的app有后台\N{\fs12}Only iOS-SD code counts, so if your app has a backend,
Dialogue: 0,0:04:08.07,0:04:10.66,yin,,0,0,0,,某处有服务器 这方面你不会额外得分\N{\fs12}some server somewhere, you get no credit for any of that really.
Dialogue: 0,0:04:10.66,0:04:14.93,yin,,0,0,0,,你只能从iOS代码得分\N{\fs12}You're only getting credit for iOS code, okay.
Dialogue: 0,0:04:14.93,0:04:17.49,yin,,0,0,0,,有后台你可以模拟\N{\fs12}So, simulate your backend if you have to,
Dialogue: 0,0:04:17.49,0:04:20.61,yin,,0,0,0,,当然 其它某处有后台 那也没问题\N{\fs12}or if you have the backend from somewhere else, that's fine,
Dialogue: 0,0:04:20.61,0:04:23.74,yin,,0,0,0,,不过 不要浪费时间写非iOS代码\N{\fs12}but don't waste time doing non-iOS code
Dialogue: 0,0:04:23.74,0:04:27.06,yin,,0,0,0,,毕竟只有三周时间 非iOS代码没有任何额外加分\N{\fs12}in this three weeks, because you're not going to get any credit for that work.
Dialogue: 0,0:04:27.06,0:04:29.74,yin,,0,0,0,,评分将基于你对SDK的适当使用\N{\fs12}And, you'll be graded on your proper use of the SDK,
Dialogue: 0,0:04:29.74,0:04:35.87,yin,,0,0,0,,还有合适的面向对象编程以及代码优雅性\N{\fs12}and also proper object-oriented programming, and your aesthetics will matter.
Dialogue: 0,0:04:35.87,0:04:43.45,yin,,0,0,0,,不要写一大堆垃圾UI 这会让程序看起来很糟糕\N{\fs12}So, don't put a big junky-looking UI that just like, really looks terrible, and yeah,
Dialogue: 0,0:04:43.45,0:04:45.70,yin,,0,0,0,,别分心去写非iOS代码\N{\fs12}don't get sidetracked on non-iOS code.
Dialogue: 0,0:04:45.70,0:04:48.09,yin,,0,0,0,,这同之前讲的重复了\N{\fs12}That's kind of a repeat of all that slide there, so.
Dialogue: 0,0:04:48.09,0:04:53.62,yin,,0,0,0,,项目陈述质量也是评价范围 不过占比很小\N{\fs12}The presentation quality matters a tiny bit. It does matter.
Dialogue: 0,0:04:53.62,0:04:57.54,yin,,0,0,0,,有效陈述是一个很重要的技能\N{\fs12}Giving your presentation, effective presentation is a very important skill to have.
Dialogue: 0,0:04:57.54,0:05:00.81,yin,,0,0,0,,斯坦福学生毕业的时候都应该擅于演讲陈述\N{\fs12}All of you at Stanford should be good at that by the time you get
Dialogue: 0,0:05:00.81,0:05:02.84,yin,,0,0,0,,这里我又提供了一个机会\N{\fs12}out of here, so here's just another chance
Dialogue: 0,0:05:02.84,0:05:05.03,yin,,0,0,0,,让你练好的演讲陈述\N{\fs12}to really practice doing a good presentation.
Dialogue: 0,0:05:05.03,0:05:07.16,yin,,0,0,0,,计下时 看你花了多久\N{\fs12}Time it; see how long it's going to take.
Dialogue: 0,0:05:07.16,0:05:09.57,yin,,0,0,0,,演讲之前务必演练几次\N{\fs12}You know, run through it a couple times practicing.
Dialogue: 0,0:05:11.55,0:05:14.27,yin,,0,0,0,,提案中需要有两部分\N{\fs12}You proposal needs to have 2 sections in it.
Dialogue: 0,0:05:14.27,0:05:18.36,yin,,0,0,0,,第一部分是关于你做了什么的总体描述\N{\fs12}Okay, the first section is kind of an overall description. What am I doing?
Dialogue: 0,0:05:18.36,0:05:21.99,yin,,0,0,0,,这个用例子来讲最好 这里就是一个例子\N{\fs12}This is best shown by example, so I have this example here,
Dialogue: 0,0:05:21.99,0:05:24.06,yin,,0,0,0,,这是一个莎士比亚导演程序\N{\fs12}which is a Shakespeare Director App,
Dialogue: 0,0:05:24.06,0:05:29.21,yin,,0,0,0,,假设你是一家戏剧公司的导演\N{\fs12}so let's say you're a director at a theater company,
Dialogue: 0,0:05:29.21,0:05:31.81,yin,,0,0,0,,你要导演莎士比亚的戏剧\N{\fs12}and you're going to be direction some Shakespeare plays,
Dialogue: 0,0:05:31.81,0:05:33.30,yin,,0,0,0,,这个程序能够帮你\N{\fs12}and this is an app to help you do that.
Dialogue: 0,0:05:33.30,0:05:39.88,yin,,0,0,0,,它能设法从Folio数据库中找出一段莎士比亚戏剧\N{\fs12}And so, it has a way to bring up a Shakespeare play from the folio database,
Dialogue: 0,0:05:39.88,0:05:41.95,yin,,0,0,0,,然后进行布局\N{\fs12}and then you can lay out the blocking,
Dialogue: 0,0:05:41.95,0:05:44.06,yin,,0,0,0,,像场景设在哪里\N{\fs12}which is like where the scene is set up,
Dialogue: 0,0:05:44.06,0:05:48.10,yin,,0,0,0,,人站在哪 所有这些东西\N{\fs12}where the people are standing and all that stuff of each scene,
Dialogue: 0,0:05:48.10,0:05:51.29,yin,,0,0,0,,同对话保持一致\N{\fs12}lined up with the dialogue.
Dialogue: 0,0:05:51.29,0:05:54.17,yin,,0,0,0,,然后 它还有一个对话学习模式\N{\fs12}And then, it's also got a dialogue learning mode
Dialogue: 0,0:05:54.17,0:05:57.54,yin,,0,0,0,,给要学习对话的人 学习他们的对白\N{\fs12}for people who want to learn the dialogue, learn their lines.
Dialogue: 0,0:05:57.54,0:06:01.68,yin,,0,0,0,,它可以说出其它部分 你则需要说出你自己的部分\N{\fs12}It will say the other parts, and then you can say your own part.
Dialogue: 0,0:06:01.68,0:06:05.56,yin,,0,0,0,,这里描述的是程序能做什么\N{\fs12}So, you can see that this is kind of a description of what it does,
Dialogue: 0,0:06:05.58,0:06:08.52,yin,,0,0,0,,而不是你怎么做\N{\fs12}as opposed to how you're going to do it.
Dialogue: 0,0:06:08.52,0:06:12.47,yin,,0,0,0,,第二部分是 你要用哪些iOS部分来实现它\N{\fs12}Section 2 is what parts of iOS are you going to use to implement it.
Dialogue: 0,0:06:12.47,0:06:14.81,yin,,0,0,0,,它有TableView 使用自定义单元格\N{\fs12}Okay, it's going to have TableView with custom cells.
Dialogue: 0,0:06:14.81,0:06:16.37,yin,,0,0,0,,会用到摄像头\N{\fs12}It's going to use the camera.
Dialogue: 0,0:06:16.37,0:06:19.10,yin,,0,0,0,,有文本字段在弹窗里面\N{\fs12}It's going; you know text fields with in popovers.
Dialogue: 0,0:06:19.10,0:06:20.45,yin,,0,0,0,,用AVFoundation\N{\fs12}It's going to use AV foundation.
Dialogue: 0,0:06:20.45,0:06:21.86,yin,,0,0,0,,有NSTimer\N{\fs12}It's going to have NS Timer.
Dialogue: 0,0:06:21.86,0:06:22.89,yin,,0,0,0,,有Core Data\N{\fs12}It's going to have Core Data,
Dialogue: 0,0:06:22.89,0:06:24.76,yin,,0,0,0,,我的实体会在这里\N{\fs12}and where there are going to be my entities.
Dialogue: 0,0:06:24.76,0:06:29.57,yin,,0,0,0,,将对话这些东西打印到打印机\N{\fs12}It's going to print out the blocking things to printer,
Dialogue: 0,0:06:29.57,0:06:32.70,yin,,0,0,0,,这是我们课上没讲的东西\N{\fs12}which is something we don't cover in class.
Dialogue: 0,0:06:32.70,0:06:37.82,yin,,0,0,0,,我们要求你使用至少一种课上没讲过的特性\N{\fs12}And, you're required to have one feature, at least, that it was not covered in lecture.
Dialogue: 0,0:06:37.82,0:06:40.09,yin,,0,0,0,,这是给你们的一个任务\N{\fs12}Okay, and so that task is on there;
Dialogue: 0,0:06:40.09,0:06:42.46,yin,,0,0,0,,让你必须自己从说明文档中去学东西\N{\fs12}not only so you have to learn something from a documentation,
Dialogue: 0,0:06:42.46,0:06:45.20,yin,,0,0,0,,而不是都由我来给你们讲\N{\fs12}instead of my kind of getting you started with it,
Dialogue: 0,0:06:45.20,0:06:48.81,yin,,0,0,0,,这还能让你仔细去看iOS里面还有些什么\N{\fs12}but also so that you peruse all of iOS and find out what's in there.
Dialogue: 0,0:06:48.81,0:06:51.50,yin,,0,0,0,,不要找我问 你能否告诉我一个\N{\fs12}So, don't come to me and say, oh, can you tell me a feature
Dialogue: 0,0:06:51.50,0:06:54.19,yin,,0,0,0,,课堂上没讲的特性用于项目\N{\fs12}to do for non-iOS not covered in lecture?
Dialogue: 0,0:06:54.19,0:06:56.06,yin,,0,0,0,,要知道 这就是你任务的一部分\N{\fs12}It's like, that's part of the task for you to go figure
Dialogue: 0,0:06:56.06,0:06:58.50,yin,,0,0,0,,去找找并选出某些特性\N{\fs12}out what's out there and pick something.
Dialogue: 0,0:06:58.52,0:07:01.85,yin,,0,0,0,,这就是提案中需要包括的两大部分\N{\fs12}So, that's what your proposal needs to have, these two sections.
Dialogue: 0,0:07:01.85,0:07:03.00,yin,,0,0,0,,你要做什么\N{\fs12}What it is you're opting to do,
Dialogue: 0,0:07:03.00,0:07:07.91,yin,,0,0,0,,你要用到哪些已经学过的iOS API\N{\fs12}and then what iOS APIs you're going to use that you know of right now to implement.
Dialogue: 0,0:07:11.53,0:07:13.04,yin,,0,0,0,,这里有一些注释\N{\fs12}And, here's some notes,
Dialogue: 0,0:07:13.04,0:07:15.60,yin,,0,0,0,,这些幻灯片 你们都可以在线下重新看\N{\fs12}again, you're going to review these slides offline to feel
Dialogue: 0,0:07:15.60,0:07:19.02,yin,,0,0,0,,看怎么写一份好的提案\N{\fs12}really get a good for what makes a good proposal,
Dialogue: 0,0:07:19.02,0:07:22.09,yin,,0,0,0,,你还可以到Piazza上要求我们进一步阐明\N{\fs12}and you can ask on Piazza for clarifications, etc.
Dialogue: 0,0:07:22.09,0:07:26.39,yin,,0,0,0,,下面我要讲的还是Core Data\N{\fs12}Okay, so, the next topic I want to talk about is Core Data still,
Dialogue: 0,0:07:26.39,0:07:30.74,yin,,0,0,0,,关于Core Data与TableView如何共同协作\N{\fs12}but its Core Data and TableView. How Core Data and TableView go together.
Dialogue: 0,0:07:30.74,0:07:33.52,yin,,0,0,0,,Core Data是一系列对象\N{\fs12}Because Core Data is a bunch of, you know, objects,
Dialogue: 0,0:07:33.52,0:07:35.11,yin,,0,0,0,,一个大的对象图\N{\fs12}a big object graph,
Dialogue: 0,0:07:35.12,0:07:40.36,yin,,0,0,0,,而TableView在遍历对象图方面很擅长\N{\fs12}and TableViews are really good for traversing through object graphs.
Dialogue: 0,0:07:40.36,0:07:41.84,yin,,0,0,0,,怎么做呢\N{\fs12}So, how do we do this?
Dialogue: 0,0:07:41.84,0:07:43.84,yin,,0,0,0,,iOS中有一个很好的类\N{\fs12}There's a great class in iOS
Dialogue: 0,0:07:43.84,0:07:46.29,yin,,0,0,0,,叫NSFetchedResultsController(取回结果控制器)\N{\fs12}called NSFetched Results Controller.
Dialogue: 0,0:07:46.29,0:07:50.49,yin,,0,0,0,,这个类的唯一作用是将一个NSFetchRequest\N{\fs12}This class' only purpose in life is to link an NSFetchRequest,
Dialogue: 0,0:07:50.49,0:07:52.85,yin,,0,0,0,,这是两天前的内容 但愿你们记得\N{\fs12}which hopefully you'll remember from two days' ago lecture
Dialogue: 0,0:07:52.85,0:07:55.93,yin,,0,0,0,,和一个UITableView关联起来\N{\fs12}with a UI TableView. That's what it does,
Dialogue: 0,0:07:55.93,0:07:59.54,yin,,0,0,0,,它的作用是将这两者关联起来 这样一来\N{\fs12}it basically bonds those two things together, so that
Dialogue: 0,0:07:59.54,0:08:02.65,yin,,0,0,0,,Fetch取回的任何东西都总会显示在TableView中\N{\fs12}the Fetch; anything that Fetch would be fetching is always showing in the TableView,
Dialogue: 0,0:08:02.65,0:08:06.02,yin,,0,0,0,,哪怕数据库在FetchRequest之下发生改变\N{\fs12}even if the database is changing underneath that FetchRequest.
Dialogue: 0,0:08:06.02,0:08:08.24,yin,,0,0,0,,它仍然会更新TableView\N{\fs12}Okay, it's still going to be updating the TableView.
Dialogue: 0,0:08:08.24,0:08:13.31,yin,,0,0,0,,工作方式方面 FetchedResultsController有两部分\N{\fs12}So, the way this works, it's really two parts for the Fetched Results Controller.
Dialogue: 0,0:08:13.31,0:08:14.43,yin,,0,0,0,,一是 它回答了\N{\fs12}One is it answers
Dialogue: 0,0:08:14.43,0:08:17.40,yin,,0,0,0,,UITableViewDataSource协议中的所有问题\N{\fs12}all the questions in the UI-TableView data source protocol,
Dialogue: 0,0:08:17.40,0:08:20.25,yin,,0,0,0,,例如有多少行 多少section\N{\fs12}like how many sections, how many rows and sections,
Dialogue: 0,0:08:20.25,0:08:22.63,yin,,0,0,0,,甚至一些你们不知道的进阶问题\N{\fs12}and even some ones that you don't know about, some more advanced ones.
Dialogue: 0,0:08:22.63,0:08:24.37,yin,,0,0,0,,这些它都回答了\N{\fs12}It answers those questions as well.
Dialogue: 0,0:08:24.37,0:08:28.98,yin,,0,0,0,,它可以使用这样的代码回答所有这些问题\N{\fs12}So, it's able to answer all those questions, using code kind of like that.
Dialogue: 0,0:08:28.98,0:08:33.10,yin,,0,0,0,,此外 它还能在任何给定时刻告诉你\N{\fs12}Also, it can tell you at any given time,
Dialogue: 0,0:08:33.10,0:08:39.77,yin,,0,0,0,,数据库中的什么实体显示在给定行中\N{\fs12}what thing in your database, what entity in your database is being shown in a given row.
Dialogue: 0,0:08:39.77,0:08:44.38,yin,,0,0,0,,表格中的行同数据库中的对象之间有一一映射关系\N{\fs12}There's a one to one mapping between a row in the table and some object in the database.
Dialogue: 0,0:08:44.38,0:08:49.03,yin,,0,0,0,,我们知道进行FetchRequest时 只会返回特定类型的对象\N{\fs12}Alright, of course we know when you do a FetchRequest, it can only return objects
Dialogue: 0,0:08:49.03,0:08:51.00,yin,,0,0,0,,一个对象的数组\N{\fs12}of a certain kind; an array of objects.
Dialogue: 0,0:08:51.00,0:08:52.68,yin,,0,0,0,,这会让你得到它\N{\fs12}And so, this will let you get it.
Dialogue: 0,0:08:52.68,0:08:56.44,yin,,0,0,0,,理解这个方法很重要 也就是objectAtIndexPath\N{\fs12}And, it's a very important method to understand, which is objectAtIndexPath.
Dialogue: 0,0:08:56.44,0:08:58.63,yin,,0,0,0,,你将这发给FetchedResultsController\N{\fs12}Okay, you send that to the Fetched Results Controller,
Dialogue: 0,0:08:58.63,0:09:02.57,yin,,0,0,0,,它会返回一个Photo *给你 或Photographer\N{\fs12}and it will return you a photo star, or a photograph photographer star
Dialogue: 0,0:09:02.57,0:09:06.41,yin,,0,0,0,,或某个NSManagedObject * 这是那一行处的对象\N{\fs12}or some NS Managed ObjectStar, which is the object that's at that row,
Dialogue: 0,0:09:06.41,0:09:08.31,yin,,0,0,0,,然后你可以抽出属性\N{\fs12}and then you can pull out the attributes,
Dialogue: 0,0:09:08.31,0:09:10.78,yin,,0,0,0,,将它们放到UITableViewCell\N{\fs12}and put them in to your UI-TableView cell
Dialogue: 0,0:09:10.78,0:09:13.00,yin,,0,0,0,,使用cellForRowAtIndexPath\N{\fs12}in cellForRowAtIndexPath.
Dialogue: 0,0:09:13.00,0:09:15.69,yin,,0,0,0,,理解这个方法很重要\N{\fs12}It's really important to understand that method.
Dialogue: 0,0:09:15.69,0:09:19.92,yin,,0,0,0,,如何创建这种NSFetchedResultsController呢\N{\fs12}How to you create one of these NS Fetched Results Controller.
Dialogue: 0,0:09:19.92,0:09:22.46,yin,,0,0,0,,它的alloc init是这样的\N{\fs12}Okay, its Allocinit looks like this.
Dialogue: 0,0:09:22.46,0:09:25.76,yin,,0,0,0,,它取一个FetchRequest 一个context\N{\fs12}It takes a FetchRequest, a context.
Dialogue: 0,0:09:25.76,0:09:28.63,yin,,0,0,0,,这显然是我们要进行取回的位置\N{\fs12}That's obvious where we're going to be doing the fetching.
Dialogue: 0,0:09:28.65,0:09:31.02,yin,,0,0,0,,它还可以处理section header\N{\fs12}It will even do section headers,
Dialogue: 0,0:09:31.02,0:09:33.48,yin,,0,0,0,,你指定你要取回的对象中\N{\fs12}so you specify which attribute in the objects
Dialogue: 0,0:09:33.48,0:09:36.30,yin,,0,0,0,,哪个属性是section的名称\N{\fs12}that you're fetching is the section, the name of the section,
Dialogue: 0,0:09:36.30,0:09:38.47,yin,,0,0,0,,然后它会将表格分成section\N{\fs12}and then it will divide the table into sections.
Dialogue: 0,0:09:38.47,0:09:40.55,yin,,0,0,0,,它还可以进行缓存\N{\fs12}And, it can also do caching, okay, so we'll talk
Dialogue: 0,0:09:40.55,0:09:42.63,yin,,0,0,0,,等下我会讲到后面那两点\N{\fs12}about those last two things in a minute here.
Dialogue: 0,0:09:42.63,0:09:45.98,yin,,0,0,0,,先看我们要创建哪种FetchRequest\N{\fs12}But, let's take a look at what kind of FetchRequest we might create
Dialogue: 0,0:09:45.98,0:09:48.80,yin,,0,0,0,,并放入到FetchedResultsController\N{\fs12}to put into a Fetched Requests Controller,
Dialogue: 0,0:09:48.80,0:09:52.81,yin,,0,0,0,,这里我创建了一个照片请求 我要取回照片\N{\fs12}so here I'm creating a photo request, so I'm going to be fetching photos.
Dialogue: 0,0:09:52.81,0:09:54.31,yin,,0,0,0,,我需要一个排序描述器\N{\fs12}I need a sort descriptor
Dialogue: 0,0:09:54.31,0:09:57.41,yin,,0,0,0,,说明这些照片在TableView是什么顺序\N{\fs12}that says what order these photos are going to be in in the TableView,
Dialogue: 0,0:09:57.41,0:09:59.96,yin,,0,0,0,,假设我要按标题排序\N{\fs12}so I'll sort them by their title, let's say.
Dialogue: 0,0:09:59.96,0:10:01.27,yin,,0,0,0,,然后是谓词\N{\fs12}And, then a predicate.
Dialogue: 0,0:10:01.27,0:10:04.87,yin,,0,0,0,,我想取回的所有照片满足\N{\fs12}I'm going to get all the photos
Dialogue: 0,0:10:04.87,0:10:08.70,yin,,0,0,0,,具有给定名字为photogName的拍照者\N{\fs12}that were taken by a photographer with a given name, photogName.
Dialogue: 0,0:10:08.70,0:10:10.05,yin,,0,0,0,,这就指明了谓词\N{\fs12}Okay, so I just specify the predicate.
Dialogue: 0,0:10:10.05,0:10:12.85,yin,,0,0,0,,我这里只是创建了一个普通的NSFetchRequest\N{\fs12}So, you I just basically create a normal NS FetchRequest,
Dialogue: 0,0:10:12.85,0:10:17.53,yin,,0,0,0,,然后我使用这个FetchedResultsController alloc\N{\fs12}and then I just do this FetchedResultsController alloc,
Dialogue: 0,0:10:17.53,0:10:19.13,yin,,0,0,0,,FetchRequest context\N{\fs12}FetchRequest context,
Dialogue: 0,0:10:19.14,0:10:21.14,yin,,0,0,0,,sectionNameKeyPath和cache\N{\fs12}section key name and cache.
Dialogue: 0,0:10:21.14,0:10:23.64,yin,,0,0,0,,就这么简单\N{\fs12}It's as simple as that.
Dialogue: 0,0:10:23.64,0:10:26.29,yin,,0,0,0,,然后讲下最后两项\N{\fs12}Now, oh, yeah, so, those last two items.
Dialogue: 0,0:10:26.29,0:10:31.25,yin,,0,0,0,,cache 关于缓存的有一点 如果你指定nil 它不会缓存\N{\fs12}The cache by way, one thing about the cache, if you specify nil, it won't cache.
Dialogue: 0,0:10:31.25,0:10:34.96,yin,,0,0,0,,缓存是说 它会缓存取回的结果\N{\fs12}Caching means that it will cache the results of that fetch
Dialogue: 0,0:10:34.96,0:10:36.51,yin,,0,0,0,,在你app启动之间\N{\fs12}between launching of your app.
Dialogue: 0,0:10:36.53,0:10:39.26,yin,,0,0,0,,换言之 它会永久性地在磁盘上进行缓存\N{\fs12}In other words, it will permanently, you know, on disc, cache it.
Dialogue: 0,0:10:39.26,0:10:40.88,yin,,0,0,0,,而不是在内存中缓存\N{\fs12}This is not caching it in memory.
Dialogue: 0,0:10:40.90,0:10:42.94,yin,,0,0,0,,这里总是内存内的缓存\N{\fs12}You know, it's always going to do it in memory caching.
Dialogue: 0,0:10:42.94,0:10:44.12,yin,,0,0,0,,Core Data会这样\N{\fs12}Core Data does that.
Dialogue: 0,0:10:44.12,0:10:45.66,yin,,0,0,0,,这是在启动之间\N{\fs12}So, this will make so between launches,
Dialogue: 0,0:10:45.66,0:10:49.64,yin,,0,0,0,,它会有结果缓存 但如果你设置它为非nil\N{\fs12}it has this result cached, but if you set that to non-Nil,
Dialogue: 0,0:10:49.64,0:10:52.89,yin,,0,0,0,,你最好让FetchRequest保持完全一样\N{\fs12}okay, you better keep your FetchRequest exactly the same.
Dialogue: 0,0:10:52.89,0:10:55.35,yin,,0,0,0,,如果FetchRequest中改了任何东西\N{\fs12}If you change anything about your FetchRequest, and come back
Dialogue: 0,0:10:55.35,0:10:57.99,yin,,0,0,0,,然后尝试使用缓存 它就会失效\N{\fs12}and try to use your cache, it's going to fail.
Dialogue: 0,0:10:57.99,0:11:02.84,yin,,0,0,0,,这只针对总有相同FetchRequest的TableView\N{\fs12}So, this is only really for TableViews that have the same Fetch Request all the time,
Dialogue: 0,0:11:02.84,0:11:04.83,yin,,0,0,0,,完全相同的谓词和描述器\N{\fs12}exact same predicates or descriptors.
Dialogue: 0,0:11:04.83,0:11:06.20,yin,,0,0,0,,一切都相同\N{\fs12}Everything's the same.
Dialogue: 0,0:11:06.20,0:11:10.60,yin,,0,0,0,,如果你要使用sectionNameKeyPath\N{\fs12}If you're going to use that section key thing,
Dialogue: 0,0:11:10.60,0:11:12.63,yin,,0,0,0,,尝试把section放到TableView中\N{\fs12}try and put sections in your table view,
Dialogue: 0,0:11:12.63,0:11:15.24,yin,,0,0,0,,排序描述器就需要匹配section键\N{\fs12}the sort descriptors have to match up with the section keys.
Dialogue: 0,0:11:15.24,0:11:16.94,yin,,0,0,0,,换言之 表中的行\N{\fs12}In other words, the rows in the table,
Dialogue: 0,0:11:16.94,0:11:18.27,yin,,0,0,0,,你取回的照片\N{\fs12}the photos that you fetch,
Dialogue: 0,0:11:18.27,0:11:21.33,yin,,0,0,0,,必须和section header具有相同顺序\N{\fs12}have to be in the exact same order that section headers would be,
Dialogue: 0,0:11:21.33,0:11:23.45,yin,,0,0,0,,这是一个常规的TableView东西\N{\fs12}and this is a normal TableView thing, right?
Dialogue: 0,0:11:23.45,0:11:25.86,yin,,0,0,0,,section header总要同行使用相同顺序\N{\fs12}The section headers always have to be in the same order as the rows.
Dialogue: 0,0:11:25.86,0:11:27.41,yin,,0,0,0,,这里也是一样\N{\fs12}Well, that's true here too.
Dialogue: 0,0:11:27.41,0:11:30.78,yin,,0,0,0,,几乎总有 你的第一个排序描述器\N{\fs12}So, almost always, your first sort descriptor will be the
Dialogue: 0,0:11:30.78,0:11:32.26,yin,,0,0,0,,是section键header\N{\fs12}section key header,
Dialogue: 0,0:11:32.26,0:11:35.71,yin,,0,0,0,,确保一切都是按照相同顺序排序\N{\fs12}to make sure everything is sorting in the same order.
Dialogue: 0,0:11:37.14,0:11:39.93,yin,,0,0,0,,FetchedResultsController还有一个委托\N{\fs12}The Fetched Results Controller also has a delegate,
Dialogue: 0,0:11:39.93,0:11:44.25,yin,,0,0,0,,使用这个委托 它能监视Core Data中发生的事情\N{\fs12}and using that delegate, it can watch what's happening in Core Data,
Dialogue: 0,0:11:44.25,0:11:47.76,yin,,0,0,0,,当有东西变化时 FetchRequest会受影响\N{\fs12}and when something changes that would affect your FetchRequest,
Dialogue: 0,0:11:47.76,0:11:50.89,yin,,0,0,0,,你的表格会变化 这是很了不起\N{\fs12}it will change your table, which is incredibly cool.
Dialogue: 0,0:11:50.89,0:11:52.87,yin,,0,0,0,,也就是说 如果你添加一张照片\N{\fs12}Okay, that means if you added a photo,
Dialogue: 0,0:11:52.87,0:11:54.95,yin,,0,0,0,,它匹配你的FetchRequest\N{\fs12}and if it would have matched your FetchRequest,
Dialogue: 0,0:11:54.95,0:11:56.34,yin,,0,0,0,,表格中也会随之增加一行\N{\fs12}it will add a row to the table,
Dialogue: 0,0:11:56.34,0:11:58.05,yin,,0,0,0,,你什么都不用做 因为它在监视\N{\fs12}and you don't have to do anything, because it's watching.
Dialogue: 0,0:11:58.05,0:12:01.47,yin,,0,0,0,,它在使用NSObjectManagedContext\N{\fs12}It's using that NS Object Managed Context,
Dialogue: 0,0:12:01.47,0:12:05.06,yin,,0,0,0,,didChangeObject广播站 它在监听这个\N{\fs12}objects did change radio station, it's listening to that,
Dialogue: 0,0:12:05.06,0:12:08.25,yin,,0,0,0,,它会用这样的方法相应做出变化\N{\fs12}and it's changing it with methods like this.
Dialogue: 0,0:12:08.25,0:12:09.44,yin,,0,0,0,,这里有两点\N{\fs12}So, there's really two things
Dialogue: 0,0:12:09.44,0:12:12.18,yin,,0,0,0,,来让FetchedResultsController同表格关联起来\N{\fs12}to get a Fetched Request Controller hooked up to your table.
Dialogue: 0,0:12:12.18,0:12:13.24,yin,,0,0,0,,一是使用它\N{\fs12}One is, you've got to use it
Dialogue: 0,0:12:13.24,0:12:15.44,yin,,0,0,0,,实现所有UITableViewDataSource的东西\N{\fs12}to implement all those UI-TableView data source things,
Dialogue: 0,0:12:15.44,0:12:17.08,yin,,0,0,0,,二是设置它的委托\N{\fs12}and two, is you've got to set its delegate,
Dialogue: 0,0:12:17.08,0:12:19.87,yin,,0,0,0,,然后使用所有这些方法来监视\N{\fs12}and then use all these methods to have it watch,
Dialogue: 0,0:12:19.87,0:12:21.56,yin,,0,0,0,,不过我帮了你们一把\N{\fs12}but we've made that easy for you.
Dialogue: 0,0:12:21.56,0:12:24.66,yin,,0,0,0,,我创建了一个类叫CoreDataTableViewController\N{\fs12}I've created a class called Core Data TableView Controller,
Dialogue: 0,0:12:24.66,0:12:26.83,yin,,0,0,0,,我会把它发给你们\N{\fs12}and I'm going to make it available to you.
Dialogue: 0,0:12:26.83,0:12:30.64,yin,,0,0,0,,它会做到上述两件事 欢迎你们看看它的实现\N{\fs12}All it does it those two things, and you're welcome to look at the implementation of it.
Dialogue: 0,0:12:30.64,0:12:32.51,yin,,0,0,0,,几乎都是一行代码\N{\fs12}It's all pretty much just one liners
Dialogue: 0,0:12:32.51,0:12:37.47,yin,,0,0,0,,使用FetchedResultsController来实现数据源\N{\fs12}that are just using the Fetched Results Controller to implement the data source,
Dialogue: 0,0:12:37.47,0:12:39.86,yin,,0,0,0,,然后做这些委托的事情\N{\fs12}and to do the delegate business.
Dialogue: 0,0:12:41.86,0:12:46.67,yin,,0,0,0,,使用FetchedResultsController时你只需要知道\N{\fs12}And, the only thing you need to know to use Core Data TableView Controller,
Dialogue: 0,0:12:46.67,0:12:49.85,yin,,0,0,0,,它有一个属性叫fetchResultsController\N{\fs12}it has a property called Fetch Results Controller
Dialogue: 0,0:12:49.85,0:12:54.12,yin,,0,0,0,,你把这个设为一个FetchedResultsController就行了\N{\fs12}and you just set that to a Fetch Results Controller, and it will just work.
Dialogue: 0,0:12:54.12,0:12:55.50,yin,,0,0,0,,不需要做别的事了\N{\fs12}Nothing else required to do.
Dialogue: 0,0:12:55.50,0:12:59.03,yin,,0,0,0,,设定这个后 CoreDataTableViewController就会\N{\fs12}You just set that, and Core Data TableView Controlled will then
Dialogue: 0,0:12:59.03,0:13:01.19,yin,,0,0,0,,使用它来回答所有的数据源问题\N{\fs12}use it to answer all those data source questions,
Dialogue: 0,0:13:01.19,0:13:03.75,yin,,0,0,0,,并设置FetchedResultsController的委托\N{\fs12}and also it will set the delegates of the Fetched Results Controller,
Dialogue: 0,0:13:03.75,0:13:06.28,yin,,0,0,0,,让它合适地监视数据库\N{\fs12}and make it so it watches the database properly.
Dialogue: 0,0:13:07.67,0:13:09.59,yin,,0,0,0,,这会在你们的作业中出现\N{\fs12}So, that will be included in your homework.
Dialogue: 0,0:13:09.59,0:13:12.69,yin,,0,0,0,,作业中要用到 今天的演示或许也会用到\N{\fs12}You will definitely want that for your homework. I will be using that in the demo today.
Dialogue: 0,0:13:12.69,0:13:14.40,yin,,0,0,0,,好 讲到演示\N{\fs12}Alright, so speaking of the demo.
Dialogue: 0,0:13:14.40,0:13:16.21,yin,,0,0,0,,这是一个很大的演示\N{\fs12}This is a huge demo.
Dialogue: 0,0:13:16.21,0:13:18.26,yin,,0,0,0,,或许我都做不完\N{\fs12}I may not get all the way through it.
Dialogue: 0,0:13:18.26,0:13:20.56,yin,,0,0,0,,其中包含了一些课上还没讲到的东西\N{\fs12}It covers some things that I haven't covered in lecture yet,
Dialogue: 0,0:13:20.56,0:13:21.60,yin,,0,0,0,,这是故意的\N{\fs12}and that's kind of intentionally.
Dialogue: 0,0:13:21.60,0:13:23.10,yin,,0,0,0,,只有这一讲中我这样做了\N{\fs12}This is the only lecture I really do that,
Dialogue: 0,0:13:23.10,0:13:25.04,yin,,0,0,0,,我只是想给你们展示一些\N{\fs12}but I just wanted to kind of show you some things
Dialogue: 0,0:13:25.04,0:13:27.25,yin,,0,0,0,,我不想专门花课上时间讲解的东西\N{\fs12}that I didn't really want to spend lecture time on.
Dialogue: 0,0:13:27.25,0:13:30.28,yin,,0,0,0,,以后的课上我可能会回顾这些 无论如何\N{\fs12}I might come back to these in future lecture, but anyway,
Dialogue: 0,0:13:30.28,0:13:31.96,yin,,0,0,0,,这里有很多东西要讲\N{\fs12}there's a lot, lot there to cover,
Dialogue: 0,0:13:31.96,0:13:33.37,yin,,0,0,0,,而你们有这些幻灯片可以用\N{\fs12}and you have these slides in front of you.
Dialogue: 0,0:13:33.37,0:13:35.63,yin,,0,0,0,,但愿你们能够看清这个列表\N{\fs12}Hopefully you can see what the list there is.
Dialogue: 0,0:13:35.63,0:13:39.17,yin,,0,0,0,,等下我就不开幻灯片了 先看以后的展望\N{\fs12}I'm not going to back to the slide, so coming up;
Dialogue: 0,0:13:39.17,0:13:41.09,yin,,0,0,0,,今天是最后一次作业\N{\fs12}today's your last homework.
Dialogue: 0,0:13:41.09,0:13:45.69,yin,,0,0,0,,我们有Instruments要讲 它是Xcode的性能监控助手\N{\fs12}We have an instrument, which is performance monitoring adjunct
Dialogue: 0,0:13:45.69,0:13:48.35,yin,,0,0,0,,我们会在周五课外辅导讲到 然后下周\N{\fs12}to X code on Friday's section, and then next week,
Dialogue: 0,0:13:48.35,0:13:49.90,yin,,0,0,0,,我们会简单谈到多任务处理\N{\fs12}we're going to talk a little bit about multitasking.
Dialogue: 0,0:13:49.90,0:13:53.50,yin,,0,0,0,,我会更多讲到 因为今天演示中我会谈到一些\N{\fs12}I say more multitasking, because I'm going to do some of that in the demo today,
Dialogue: 0,0:13:53.50,0:13:56.62,yin,,0,0,0,,然后我们会讲一些更进阶的segue\N{\fs12}and then we're going to do some more advancing segue.
Dialogue: 0,0:13:56.62,0:13:59.78,yin,,0,0,0,,我们之前所讲的segue只是\N{\fs12}So far the only segueing we've done is,
Dialogue: 0,0:13:59.78,0:14:02.53,yin,,0,0,0,,UINavigationController push segue\N{\fs12}UI-Navigation Controller pushed segues basically,
Dialogue: 0,0:14:02.53,0:14:05.89,yin,,0,0,0,,之后我还讲了一点iPad replace segue\N{\fs12}and then also, we talked a little bit about iPad replace segues,
Dialogue: 0,0:14:05.89,0:14:08.64,yin,,0,0,0,,替换掉整个detail视图 这个segue比较奇特\N{\fs12}where you replace the entire detail view, which is kind of a weird segue.
Dialogue: 0,0:14:08.64,0:14:12.43,yin,,0,0,0,,以后我们还会谈到更多的segue\N{\fs12}We're going to talk about some more kinds of segues that we can do as well.
Dialogue: 0,0:14:12.43,0:14:16.34,yin,,0,0,0,,或许下周 或许下下周 我们还会讲到MapKit\N{\fs12}And, maybe we'll get to Mapkit next week or maybe the week after.
Dialogue: 0,0:14:17.76,0:14:21.54,yin,,0,0,0,,在进入这个巨型demo之前 有任何问题吗\N{\fs12}Alright, any questions before I dive into this monster demo?
Dialogue: 0,0:14:21.54,0:14:23.12,yin,,0,0,0,,请随时打断我\N{\fs12}Okay, feel free to stop me.
Dialogue: 0,0:14:23.12,0:14:24.97,yin,,0,0,0,,demo进行时 我经常都在打字\N{\fs12}A lot of time when I'm demo, I'm typing away,
Dialogue: 0,0:14:24.97,0:14:27.92,yin,,0,0,0,,没注意到你们举手 你们可以大声叫出来\N{\fs12}I'm not seeing you raise your hand, so feel free to shout out.
Dialogue: 0,0:14:29.37,0:14:32.82,yin,,0,0,0,,这里我要创建一个新项目\N{\fs12}So, I'm going to create a new project here, and I'm going
Dialogue: 0,0:14:32.82,0:14:34.75,yin,,0,0,0,,我要用单视图应用\N{\fs12}to do single view application, even though I'm going
Dialogue: 0,0:14:34.75,0:14:37.58,yin,,0,0,0,,我要用Core Data 我说过你可以点这个\N{\fs12}to use Core Data, and I told you that if you click on this one,
Dialogue: 0,0:14:37.58,0:14:39.67,yin,,0,0,0,,你可以看到一些生成的Core Data代码\N{\fs12}you can see some generated Core Data code.
Dialogue: 0,0:14:39.67,0:14:42.18,yin,,0,0,0,,我并不打算使用这里生成的代码\N{\fs12}I'm actually going to use the code that's generated here,
Dialogue: 0,0:14:42.18,0:14:45.99,yin,,0,0,0,,不过我会把它搁到应用委托的类别里\N{\fs12}but I put it off into a category of my application delegates,
Dialogue: 0,0:14:45.99,0:14:48.37,yin,,0,0,0,,这样你就不需要真正去看它\N{\fs12}so that you don't really need to look at it.
Dialogue: 0,0:14:48.37,0:14:51.12,yin,,0,0,0,,我会把它包含在demo中 你会看到\N{\fs12}I'll include it in the demo, and you can see it.
Dialogue: 0,0:14:51.12,0:14:52.58,yin,,0,0,0,,不过 在作业中\N{\fs12}But, for your homework, you're going
Dialogue: 0,0:14:52.58,0:14:57.10,yin,,0,0,0,,你们会用到UIManagedDocument来做Core Data的东西\N{\fs12}to do your Core Data stuff using a document. UI-managed document,
Dialogue: 0,0:14:57.10,0:14:58.26,yin,,0,0,0,,我不打算展示这个\N{\fs12}and I'm not going to show that.
Dialogue: 0,0:14:58.26,0:14:59.72,yin,,0,0,0,,因为我要你们\N{\fs12}Because I want you to kind of go through
Dialogue: 0,0:14:59.72,0:15:01.82,yin,,0,0,0,,自己去经历和熟悉这个过程\N{\fs12}the process of trying to figure that out for yourself.
Dialogue: 0,0:15:01.82,0:15:04.75,yin,,0,0,0,,我要创建一个和平常一样的普通单视图应用\N{\fs12}So, I'm just going to create our normal single view application like we usually do.
Dialogue: 0,0:15:04.75,0:15:07.45,yin,,0,0,0,,名字称作Photomania\N{\fs12}I'm going to call is Photo Mania,
Dialogue: 0,0:15:07.45,0:15:11.58,yin,,0,0,0,,这是一个通用app 但我这里只演示iPhone版\N{\fs12}and it's going to be universal app, although I'm only going to use the iPhone version.
Dialogue: 0,0:15:11.58,0:15:14.83,yin,,0,0,0,,我只打算演示这个应用的梗概\N{\fs12}I'm only going to do the bare bones of this application.
Dialogue: 0,0:15:14.83,0:15:19.73,yin,,0,0,0,,这个应用的作用是查询Flickr 那些URL\N{\fs12}What this application is going to do, it's just going to query Flickr those URL,
Dialogue: 0,0:15:19.73,0:15:23.98,yin,,0,0,0,,最新地理参考照片的URL 同Shutterbug中一样\N{\fs12}the URL for recent geo reference photo theme, the same thing we did for Shutterbug.
Dialogue: 0,0:15:23.98,0:15:26.68,yin,,0,0,0,,不过这里将不仅仅是展示照片\N{\fs12}But instead of just showing the photos,
Dialogue: 0,0:15:26.68,0:15:31.00,yin,,0,0,0,,它还会展示这些照片的拍摄者清单\N{\fs12}it's going to show you the list of photographers who took those photos.
Dialogue: 0,0:15:31.00,0:15:33.63,yin,,0,0,0,,在这个demo后 你可以很容易做成\N{\fs12}And then, you know, after this demo, you could easily make it
Dialogue: 0,0:15:33.63,0:15:37.10,yin,,0,0,0,,点击拍照者 它就能展示这个拍照者的照片\N{\fs12}so if you click on a photographer, it shows you the photos by that photographer.
Dialogue: 0,0:15:37.10,0:15:40.85,yin,,0,0,0,,点击照片 使用图像视图控制器展示给你一张图片\N{\fs12}Click on the photo; use the image view controller to show you an image.
Dialogue: 0,0:15:40.85,0:15:42.53,yin,,0,0,0,,这就是我们要创建的应用\N{\fs12}So, that's kind of the application we're trying to build.
Dialogue: 0,0:15:42.53,0:15:45.35,yin,,0,0,0,,我们不打算创建其它那些TableView\N{\fs12}We won't get all the way to building those other TableViews.
Dialogue: 0,0:15:45.35,0:15:48.96,yin,,0,0,0,,我们只打算着眼于主TableView 这就是它的作用了\N{\fs12}We're just going to do this main TableView, but that's what this is going to do.
Dialogue: 0,0:15:49.78,0:15:53.11,yin,,0,0,0,,要展示那些拍照者\N{\fs12}And, the way it's going to do that; the way it's going to show those photographers
Dialogue: 0,0:15:53.11,0:15:56.25,yin,,0,0,0,,策略就会同Shutterbug略有不同\N{\fs12}is kind of a little bit different strategy than we saw with Shutterbug.
Dialogue: 0,0:15:56.25,0:15:59.87,yin,,0,0,0,,我打算在应用的后台\N{\fs12}I'm going, in the background, basically of my application,
Dialogue: 0,0:15:59.87,0:16:04.75,yin,,0,0,0,,持续每隔一段时间查询Flickr 并获得更多照片\N{\fs12}be constantly querying Flickr every once in awhile, and getting more and more photos,
Dialogue: 0,0:16:04.75,0:16:07.50,yin,,0,0,0,,然后把这些都丢到Core Data数据库中\N{\fs12}and then just throwing them into a Core Data database.
Dialogue: 0,0:16:07.50,0:16:09.59,yin,,0,0,0,,把它们丢到后台\N{\fs12}Okay, just throwing them in there in the background.
Dialogue: 0,0:16:09.59,0:16:12.68,yin,,0,0,0,,同时 我还会有TableView看着这些数据\N{\fs12}Meanwhile, I'm going to have TableViews that are going to be looking at that data.
Dialogue: 0,0:16:12.68,0:16:14.60,yin,,0,0,0,,看着拍照者 点击他们\N{\fs12}Looking at the photographers, clicking on them,
Dialogue: 0,0:16:14.60,0:16:15.97,yin,,0,0,0,,看着照片\N{\fs12}looking at the photos,
Dialogue: 0,0:16:15.98,0:16:19.23,yin,,0,0,0,,而且这将一直自动更新\N{\fs12}and that's just going to be always be updating automatically, all the time.
Dialogue: 0,0:16:19.23,0:16:21.35,yin,,0,0,0,,这就是我们所要创建的app\N{\fs12}Okay, so that's the app that we're going to build.
Dialogue: 0,0:16:21.35,0:16:23.24,yin,,0,0,0,,这里有些东西需要讲\N{\fs12}So, there's some things to talk about here.
Dialogue: 0,0:16:23.24,0:16:25.79,yin,,0,0,0,,如何创建一个Core Data数据库\N{\fs12}How to build a Core Data database.
Dialogue: 0,0:16:25.79,0:16:28.84,yin,,0,0,0,,如何使用FetchedResultsController关联它和TableView\N{\fs12}How to hook it up to a TableView with the Fetched Results Controller.
Dialogue: 0,0:16:28.84,0:16:31.24,yin,,0,0,0,,如何在后台进行取回\N{\fs12}How to fetch things in the background.
Dialogue: 0,0:16:31.24,0:16:34.80,yin,,0,0,0,,今天我们会讲到所有这些 如果时间够的话\N{\fs12}We're going to talk about all those things today if we have time.
Dialogue: 0,0:16:34.80,0:16:37.00,yin,,0,0,0,,好 起名叫作Photomania\N{\fs12}Alright, I'm going to call this Photo Mania.
Dialogue: 0,0:16:37.00,0:16:39.18,yin,,0,0,0,,把它放到通常的Developer里面\N{\fs12}I'm put it the developer where I usually put things.
Dialogue: 0,0:16:39.18,0:16:39.74,yin,,0,0,0,,这里\N{\fs12}Here it is.
Dialogue: 0,0:16:39.74,0:16:45.26,yin,,0,0,0,,我将直接创建我的数据模型\N{\fs12}I'm going to dive right in with building my data model.
Dialogue: 0,0:16:45.26,0:16:48.67,yin,,0,0,0,,我的schema 这就是数据库世界的叫法\N{\fs12}My schema, as you would call it in the database world.
Dialogue: 0,0:16:48.67,0:16:52.21,yin,,0,0,0,,这是对所有实体及所有这些东西的描述\N{\fs12}This is a description of all the entities and all that stuff.
Dialogue: 0,0:16:52.21,0:16:54.23,yin,,0,0,0,,我们在幻灯片中也看过这怎么做\N{\fs12}We saw how to do this all in the slide, so I'm going
Dialogue: 0,0:16:54.23,0:16:56.71,yin,,0,0,0,,我这里打算实况演示一下\N{\fs12}to just going to show you what it looks like live.
Dialogue: 0,0:16:56.71,0:17:00.12,yin,,0,0,0,,要创建新schema 我点新文件\N{\fs12}So, when I want to create a new schema, I do new file.
Dialogue: 0,0:17:00.12,0:17:02.64,yin,,0,0,0,,我要创建新文件\N{\fs12}Okay, so I'm going to do new file.
Dialogue: 0,0:17:02.64,0:17:06.47,yin,,0,0,0,,到这里的Core Data 选择这个数据模型\N{\fs12}I'm going to go up here to Core Data, and pick this data model,
Dialogue: 0,0:17:06.47,0:17:09.93,yin,,0,0,0,,不是映射模型 而是这里的数据模型 点它\N{\fs12}not mapping model, data model right here, so click that.
Dialogue: 0,0:17:09.93,0:17:12.23,yin,,0,0,0,,叫什么名字都行\N{\fs12}We can call it anything you want.
Dialogue: 0,0:17:12.23,0:17:16.03,yin,,0,0,0,,这个就用app名吧 Photomania\N{\fs12}I'm going to call this one the name of my app, photo mania,
Dialogue: 0,0:17:16.03,0:17:18.55,yin,,0,0,0,,问我要放到哪\N{\fs12}and it's asking where do you want to put it, and I'm going
Dialogue: 0,0:17:18.55,0:17:21.68,yin,,0,0,0,,我要把它放到顶层 和其它东西一起\N{\fs12}to put it at the top level here where all the rest of my stuff is.
Dialogue: 0,0:17:21.68,0:17:24.29,yin,,0,0,0,,这是我的控制器 委托等等\N{\fs12}Here's my controller and delegates something like that,
Dialogue: 0,0:17:24.29,0:17:27.09,yin,,0,0,0,,我就把数据模型文件放这里\N{\fs12}so I'll put this data modeling file there.
Dialogue: 0,0:17:27.09,0:17:30.14,yin,,0,0,0,,这就创建了数据模型文件 它是空的\N{\fs12}And, so it creates this data modeling file. You can see it's empty.
Dialogue: 0,0:17:30.14,0:17:34.07,yin,,0,0,0,,没有任何实体 属性 取回属性这些\N{\fs12}I've no entities or attributes or Fetch Properties or any of that business.
Dialogue: 0,0:17:34.07,0:17:36.33,yin,,0,0,0,,我们下面就来添加一些\N{\fs12}So, let's just start adding some.
Dialogue: 0,0:17:36.33,0:17:39.14,yin,,0,0,0,,到下面这里 添加实体\N{\fs12}So, I'm going to go down here to the bottom, add entity.
Dialogue: 0,0:17:39.14,0:17:39.73,yin,,0,0,0,,点这个\N{\fs12}Click that.
Dialogue: 0,0:17:39.73,0:17:41.28,yin,,0,0,0,,加了一个 叫Entity\N{\fs12}It added one, called entity.
Dialogue: 0,0:17:41.28,0:17:43.73,yin,,0,0,0,,双击 改名为Photo\N{\fs12}I'm going to double click, and call it photo.
Dialogue: 0,0:17:43.73,0:17:45.03,yin,,0,0,0,,我需要照片\N{\fs12}So, I need photo, and
Dialogue: 0,0:17:45.03,0:17:49.27,yin,,0,0,0,,我还需要显示拍照者 因此还要添加Photographer\N{\fs12}I display photographers too, so I better add photographer.
Dialogue: 0,0:17:49.27,0:17:50.65,yin,,0,0,0,,有一点非常重要\N{\fs12}Now one thing that's really important
Dialogue: 0,0:17:50.65,0:17:54.38,yin,,0,0,0,,创建schema时 你需要把实体\N{\fs12}when you make a schema is you want to put the entities
Dialogue: 0,0:17:54.38,0:17:58.85,yin,,0,0,0,,和属性放到这里 支持你所创建的UI\N{\fs12}and the attributes in there that support the kind of UI you're building.
Dialogue: 0,0:17:58.85,0:18:01.41,yin,,0,0,0,,这对于作业是非常重要的内容\N{\fs12}Okay, and that's really important for you to understand in your homework.
Dialogue: 0,0:18:01.41,0:18:04.06,yin,,0,0,0,,我这次布置的作业很简单\N{\fs12}Okay, this homework that I'm assigning you is pretty
Dialogue: 0,0:18:04.06,0:18:07.23,yin,,0,0,0,,前提是你要选一个好的schema\N{\fs12}straightforward, as long as you pick a good schema.
Dialogue: 0,0:18:07.23,0:18:10.36,yin,,0,0,0,,如果选择对了数据库中的实体和属性\N{\fs12}If you pick the right entities and attributes in the database,
Dialogue: 0,0:18:10.36,0:18:13.40,yin,,0,0,0,,将信息表格就很容易搞定\N{\fs12}it's just really easy to just throw up tables of information.
Dialogue: 0,0:18:13.40,0:18:16.21,yin,,0,0,0,,否则的话 如果schema都错了\N{\fs12}If you don't, if you have kind of the wrong schema
Dialogue: 0,0:18:16.21,0:18:18.15,yin,,0,0,0,,或是schema太简单\N{\fs12}or just too simplistic of a schema, you don't put
Dialogue: 0,0:18:18.15,0:18:21.05,yin,,0,0,0,,没有足够属性让UI正常运作\N{\fs12}in a couple of attributes that you need to make your UI work,
Dialogue: 0,0:18:21.05,0:18:23.45,yin,,0,0,0,,你就会很难得到信息\N{\fs12}it can be like ah, how do I get that information.
Dialogue: 0,0:18:23.45,0:18:25.89,yin,,0,0,0,,schema是你的奴隶\N{\fs12}So, the schema is your slave,
Dialogue: 0,0:18:25.89,0:18:27.80,yin,,0,0,0,,你要创建好schema\N{\fs12}you get to make the schema however, you think it's going
Dialogue: 0,0:18:27.80,0:18:31.27,yin,,0,0,0,,最好地支持你创建的应用程序\N{\fs12}to best support the application that you're building.
Dialogue: 0,0:18:31.27,0:18:34.42,yin,,0,0,0,,照片和拍照者\N{\fs12}So, photo and photographer.
Dialogue: 0,0:18:34.42,0:18:37.46,yin,,0,0,0,,Photo有哪些属性呢\N{\fs12}What kind of attributes does a photo have?
Dialogue: 0,0:18:37.46,0:18:42.17,yin,,0,0,0,,显然它有标题 还有副标题\N{\fs12}Well, let's see, of course it has its title, and it has a subtitle.
Dialogue: 0,0:18:42.17,0:18:44.44,yin,,0,0,0,,这是来自Flickr的简述\N{\fs12}That's that little description from Flickr.
Dialogue: 0,0:18:44.44,0:18:47.87,yin,,0,0,0,,它还有来自Flickr的图像URL\N{\fs12}It has the URL of its image from Flickr.
Dialogue: 0,0:18:47.87,0:18:51.11,yin,,0,0,0,,或许还有缩略图的URL\N{\fs12}Probably has the URL of its thumbnail as well.
Dialogue: 0,0:18:51.11,0:18:53.29,yin,,0,0,0,,实际上 我们还可以存储缩略图数据\N{\fs12}In fact, we could even store the thumbnail data,
Dialogue: 0,0:18:53.29,0:18:55.66,yin,,0,0,0,,你们在作业中需要这样做 这里\N{\fs12}which you're going to want to in your homework, right in here,
Dialogue: 0,0:18:55.66,0:19:01.01,yin,,0,0,0,,将数据放进来 不只是URL 还有一点很重要\N{\fs12}put the data in, not just the URLs, and also importantly,
Dialogue: 0,0:19:01.01,0:19:03.82,yin,,0,0,0,,照片有一个标识符 来自Flickr\N{\fs12}photos have a unique identifier that comes from Flickr.
Dialogue: 0,0:19:03.82,0:19:06.99,yin,,0,0,0,,当我从Flickr获取数据时 我不希望…\N{\fs12}Because when I get data from Flickr, I don't want to be,
Dialogue: 0,0:19:06.99,0:19:09.34,yin,,0,0,0,,有时点Flickr 你会得到相同的照片\N{\fs12}sometimes you click Flickr, you get the same photo again,
Dialogue: 0,0:19:09.34,0:19:12.15,yin,,0,0,0,,我不想把这个复制到我的Core Data数据库\N{\fs12}and I don't want to be duplicating that in my Core Data database.
Dialogue: 0,0:19:12.15,0:19:14.45,yin,,0,0,0,,我要查看Flickr中的这个唯一标识符\N{\fs12}So, I'm going to look at that unique ID from Flickr,
Dialogue: 0,0:19:14.45,0:19:17.32,yin,,0,0,0,,让这些在我的Core Data数据库中也成为唯一的\N{\fs12}and make those unique in my Core Data database as well.
Dialogue: 0,0:19:17.32,0:19:21.72,yin,,0,0,0,,添加了这些后 我看到这里有个红色警告或错误\N{\fs12}So, I've added these, but I've got to set their, you can tab warning here, or any error,
Dialogue: 0,0:19:21.72,0:19:23.10,yin,,0,0,0,,因为这些还没设\N{\fs12}because I haven't set these.
Dialogue: 0,0:19:23.10,0:19:24.66,yin,,0,0,0,,点这个 你可以看到\N{\fs12}If I click on this, you'll see.
Dialogue: 0,0:19:24.66,0:19:27.39,yin,,0,0,0,,必须定义类型 我们来设定类型\N{\fs12}Must have a defined type, so we got to set a type for these.
Dialogue: 0,0:19:27.39,0:19:30.30,yin,,0,0,0,,这四个都是字符串\N{\fs12}These all happen to be strings; all four of these,
Dialogue: 0,0:19:30.30,0:19:33.04,yin,,0,0,0,,不过可以设想 这里也可以有日期\N{\fs12}but you could image putting things like dates,
Dialogue: 0,0:19:33.04,0:19:36.35,yin,,0,0,0,,例如作业中 你要有最近标签\N{\fs12}like for your recent tab in your homework.
Dialogue: 0,0:19:36.35,0:19:39.90,yin,,0,0,0,,你会有最近浏览日期这些\N{\fs12}You probably want to have some sort of last viewed date or something like that.
Dialogue: 0,0:19:39.90,0:19:42.96,yin,,0,0,0,,放到这里很合理 还有数字这些东西\N{\fs12}That's perfectly reasonable to put in here, and numbers and all that stuff.
Dialogue: 0,0:19:42.96,0:19:44.73,yin,,0,0,0,,让我们这样做\N{\fs12}So, we'll just do that.
Dialogue: 0,0:19:44.73,0:19:46.52,yin,,0,0,0,,Photographer更简单一些\N{\fs12}Photographers are a little simpler.
Dialogue: 0,0:19:46.52,0:19:47.60,yin,,0,0,0,,它们只有name\N{\fs12}They just have a name.
Dialogue: 0,0:19:47.60,0:19:49.30,yin,,0,0,0,,拍照者只有名字\N{\fs12}Okay, a photographer has a name.
Dialogue: 0,0:19:49.30,0:19:50.29,yin,,0,0,0,,这是字符串\N{\fs12}That's a string.
Dialogue: 0,0:19:50.29,0:19:51.41,yin,,0,0,0,,就这了\N{\fs12}That's about it.
Dialogue: 0,0:19:51.68,0:19:55.00,yin,,0,0,0,,我讲过 我们可以从图像上看这些实体\N{\fs12}And, remember I told you we could look at these entities graphically
Dialogue: 0,0:19:55.00,0:19:56.81,yin,,0,0,0,,点下面这个小按钮就行了\N{\fs12}with this little button down here.
Dialogue: 0,0:19:56.81,0:19:57.48,yin,,0,0,0,,这里\N{\fs12}Here it is right here.
Dialogue: 0,0:19:57.48,0:20:00.80,yin,,0,0,0,,它们重叠到了一起 不过我可以选取移动\N{\fs12}They're kind of smashed on top of each other, but I can pick them up and move them.
Dialogue: 0,0:20:00.80,0:20:04.22,yin,,0,0,0,,当我移动一个时 中间就会得到空间\N{\fs12}And, you can see that as I move one, it kind of makes space,
Dialogue: 0,0:20:04.22,0:20:07.22,yin,,0,0,0,,如果在它们之间创建关系\N{\fs12}alright, keep them, and if I have relationships between them,
Dialogue: 0,0:20:07.22,0:20:11.55,yin,,0,0,0,,这些关系也会在移动过程中得到保持\N{\fs12}it will keep those relationships sensible as I move them around.
Dialogue: 0,0:20:11.55,0:20:13.36,yin,,0,0,0,,让我们创建一个关系\N{\fs12}So, let's create a relationship.
Dialogue: 0,0:20:13.36,0:20:15.79,yin,,0,0,0,,照片和拍照者之间是什么关系\N{\fs12}What is the relationship between a photo and photographer?
Dialogue: 0,0:20:15.79,0:20:19.65,yin,,0,0,0,,幻灯片上我就讲过 whoTook 这里我control拖动\N{\fs12}As we saw on the slides, who took, basically, so I'm just control dragging.
Dialogue: 0,0:20:19.65,0:20:24.12,yin,,0,0,0,,按住control键 从照片到拍照者拖动\N{\fs12}I'm holding down control right now, and dragging from photo to photographer,
Dialogue: 0,0:20:24.12,0:20:26.66,yin,,0,0,0,,这样新关系就得以创建了\N{\fs12}and I have this new relationship created.
Dialogue: 0,0:20:26.66,0:20:29.45,yin,,0,0,0,,如果移动这些东西\N{\fs12}And again, if I move these things around,
Dialogue: 0,0:20:29.45,0:20:31.37,yin,,0,0,0,,这个会保持不变\N{\fs12}this things will stay with,
Dialogue: 0,0:20:31.37,0:20:33.80,yin,,0,0,0,,下面给这些关系命名\N{\fs12}so let's go ahead and give these relationships names.
Dialogue: 0,0:20:33.80,0:20:36.16,yin,,0,0,0,,在照片一侧 这是whoTook关系\N{\fs12}On the photo side, this is the who took relationship,
Dialogue: 0,0:20:36.16,0:20:42.39,yin,,0,0,0,,在拍照者一侧 这是photos 我们可以在检查器中查看\N{\fs12}and on the photographer side, this is the photos, and we can inspect this right here
Dialogue: 0,0:20:42.39,0:20:44.76,yin,,0,0,0,,查看器在这里\N{\fs12}with this little guy right here; the inspector.
Dialogue: 0,0:20:44.76,0:20:48.83,yin,,0,0,0,,我们可以看到属性中的各种东西\N{\fs12}And, we can see all kinds of things about our particular properties.
Dialogue: 0,0:20:48.83,0:20:51.81,yin,,0,0,0,,对属性和关系都是如此\N{\fs12}This is true for properties, and also for relationships.
Dialogue: 0,0:20:51.81,0:20:52.99,yin,,0,0,0,,当然 我们知道\N{\fs12}And, of course, we know
Dialogue: 0,0:20:52.99,0:20:55.08,yin,,0,0,0,,这是一个To Many关系\N{\fs12}that this is a to many relationship, right?
Dialogue: 0,0:20:55.08,0:20:58.74,yin,,0,0,0,,因为拍照者可以拍多张照片 这就得到了双箭头\N{\fs12}Because a photographer can have many photos, so we get this double arrow here.
Dialogue: 0,0:20:58.74,0:21:03.54,yin,,0,0,0,,不过这里是To One关系 因为一张照片只有一个拍照者\N{\fs12}But, it's a to one relationship here, because a photo, only one guy took the photo.
Dialogue: 0,0:21:03.54,0:21:05.41,yin,,0,0,0,,移动这些\N{\fs12}And so, if you move these things around,
Dialogue: 0,0:21:05.41,0:21:09.53,yin,,0,0,0,,所有这些关系仍会保持\N{\fs12}it will keep this all kind of looking okay.
Dialogue: 0,0:21:09.53,0:21:12.89,yin,,0,0,0,,这里 我们就设置好了我们需要的一切\N{\fs12}Alright? So, now, we've kind of set up everything here that we need.
Dialogue: 0,0:21:12.89,0:21:16.48,yin,,0,0,0,,这是一个很简单的应用 我们不再需要任何的属性\N{\fs12}This is a pretty simple application, so we don't need any more attributes.
Dialogue: 0,0:21:16.48,0:21:18.56,yin,,0,0,0,,不过在你的应用中 你至少还要有\N{\fs12}But, in your application, you're going to have at least one
Dialogue: 0,0:21:18.56,0:21:20.76,yin,,0,0,0,,一两个实体和一些属性\N{\fs12}or more two more entities and some attributes on there,
Dialogue: 0,0:21:20.76,0:21:24.60,yin,,0,0,0,,照片上也需要更多一些属性\N{\fs12}and some more attributes on photo.
Dialogue: 0,0:21:24.60,0:21:28.45,yin,,0,0,0,,我留了一些工作给你们做\N{\fs12}So, I left with some work to do.
Dialogue: 0,0:21:28.45,0:21:33.19,yin,,0,0,0,,有了这个之后 我们希望能够访问这些东西\N{\fs12}Okay, so now that we have this, we want to be able to access all this stuff
Dialogue: 0,0:21:33.19,0:21:39.06,yin,,0,0,0,,在Objective-C代码中 使用属性和常规类句法\N{\fs12}in our objective C code using properties and normal class syntax.
Dialogue: 0,0:21:39.06,0:21:40.70,yin,,0,0,0,,我们要做我讲过的这个\N{\fs12}So, we're going to do this thing we talked about,
Dialogue: 0,0:21:40.70,0:21:44.90,yin,,0,0,0,,也就是 生成ManagedObject的子类\N{\fs12}which is generating manage object subclasses.
Dialogue: 0,0:21:44.90,0:21:47.30,yin,,0,0,0,,我选择我要的类\N{\fs12}So, I'm going to pick the classes that I want.
Dialogue: 0,0:21:47.30,0:21:52.08,yin,,0,0,0,,到这里 为Photomania创建NSManagedObject的子类\N{\fs12}I'm going to go here and say create NS managed objects subclass for photo mania,
Dialogue: 0,0:21:52.08,0:21:54.73,yin,,0,0,0,,这里同时创建Photo和Photographer\N{\fs12}and we'll do photo and photographer, both of them.
Dialogue: 0,0:21:54.73,0:21:56.83,yin,,0,0,0,,点这里 放到你想放的地方\N{\fs12}And, we click this, says where do you want them?
Dialogue: 0,0:21:56.83,0:21:58.06,yin,,0,0,0,,也都放到顶层\N{\fs12}I'll put those also at the top.
Dialogue: 0,0:21:58.06,0:22:00.39,yin,,0,0,0,,这样所有东西就都在顶层了\N{\fs12}I'm going to put everything at the top level here.
Dialogue: 0,0:22:00.39,0:22:03.63,yin,,0,0,0,,这里 我有Photo和Photographer\N{\fs12}And here, I have my photo and photographer,
Dialogue: 0,0:22:03.63,0:22:05.74,yin,,0,0,0,,Photo看起来很好\N{\fs12}and I can see that photo looks okay.
Dialogue: 0,0:22:05.74,0:22:07.61,yin,,0,0,0,,它有Photographer whoTook\N{\fs12}It's got photographer who took,
Dialogue: 0,0:22:07.61,0:22:09.74,yin,,0,0,0,,但Photographer就没这么好了\N{\fs12}but photographer, not so much, right?
Dialogue: 0,0:22:09.74,0:22:12.41,yin,,0,0,0,,它只有NSManagedObject对应removePhotosObject\N{\fs12}It's got NS manage object for remove photos object.
Dialogue: 0,0:22:12.41,0:22:14.39,yin,,0,0,0,,这里应该是Photo\N{\fs12}This should really be photo star,
Dialogue: 0,0:22:14.39,0:22:17.39,yin,,0,0,0,,我打算再次生成这些东西\N{\fs12}so I'm just going to generate these things again.
Dialogue: 0,0:22:17.39,0:22:19.10,yin,,0,0,0,,实际上这很蹩脚\N{\fs12}Okay. And really, it's too bad
Dialogue: 0,0:22:19.10,0:22:22.39,yin,,0,0,0,,它不能一次给我把两次生成给办了\N{\fs12}that it doesn't automatically do this two pass generation,
Dialogue: 0,0:22:22.39,0:22:23.89,yin,,0,0,0,,不过手动就行了\N{\fs12}but you end up doing it yourself.
Dialogue: 0,0:22:23.89,0:22:26.68,yin,,0,0,0,,务必习惯这种生成 因为你会经常用到\N{\fs12}Get used to doing this generate, because you're going to do it a lot.
Dialogue: 0,0:22:26.68,0:22:28.79,yin,,0,0,0,,你会经常添加实体\N{\fs12}You're going to be constantly adding entities,
Dialogue: 0,0:22:28.79,0:22:31.11,yin,,0,0,0,,改变属性 等等\N{\fs12}changing attributes, like that, and you're just going
Dialogue: 0,0:22:31.11,0:22:33.77,yin,,0,0,0,,你将经常再生成这些东西\N{\fs12}to constantly be regenerating these things, and it's going
Dialogue: 0,0:22:33.77,0:22:35.94,yin,,0,0,0,,你会被要求替换它们\N{\fs12}to ask you to replace them, and so
Dialogue: 0,0:22:35.94,0:22:38.25,yin,,0,0,0,,不要不习惯这样再生成\N{\fs12}don't be uncomfortable about doing that regenerate.
Dialogue: 0,0:22:38.25,0:22:42.37,yin,,0,0,0,,这是很常用的东西 现在我们就胜利了\N{\fs12}It's a common thing to want to do, and so now we're winning here.
Dialogue: 0,0:22:43.54,0:22:45.86,yin,,0,0,0,,我们有了这些很好的类\N{\fs12}So we have these nice classes,
Dialogue: 0,0:22:45.86,0:22:51.03,yin,,0,0,0,,现在我们可以用点符号来访问它们所有的属性\N{\fs12}and now we can use properties to access all their attitudes.
Dialogue: 0,0:22:51.03,0:22:54.32,yin,,0,0,0,,例如用photo.title来获得标题\N{\fs12}Photo dot title to get at the title for example.
Dialogue: 0,0:22:54.32,0:22:57.89,yin,,0,0,0,,不过我之前就讲过 我们想要添加代码\N{\fs12}But, as I said before, we might want to add code, and I do want
Dialogue: 0,0:22:57.89,0:22:59.62,yin,,0,0,0,,例如这里是给Photo加\N{\fs12}to add code to photo here.
Dialogue: 0,0:22:59.62,0:23:02.52,yin,,0,0,0,,我想添加创建照片的代码\N{\fs12}I want to add code to create a photo.
Dialogue: 0,0:23:02.52,0:23:04.06,yin,,0,0,0,,让它能够添加\N{\fs12}Okay. To make so that I can add,
Dialogue: 0,0:23:04.06,0:23:07.66,yin,,0,0,0,,插入一个Photo对象到数据库中\N{\fs12}insert a photo object into the database.
Dialogue: 0,0:23:07.66,0:23:09.73,yin,,0,0,0,,我将使用category来做这个\N{\fs12}And so, I'm going to do that using categories.
Dialogue: 0,0:23:09.73,0:23:12.15,yin,,0,0,0,,category也就是我刚讲的新Objective-C特性\N{\fs12}Remember categories is that new objective C thing I was telling
Dialogue: 0,0:23:12.15,0:23:14.70,yin,,0,0,0,,记得吗 我们可以往一个类中添加代码\N{\fs12}you about, where we can add code to a class
Dialogue: 0,0:23:14.70,0:23:17.42,yin,,0,0,0,,又不创建它的子类 这里我打算把代码\N{\fs12}without sub-classing it, so I'm going to add code
Dialogue: 0,0:23:17.42,0:23:20.94,yin,,0,0,0,,加到Photo类 而不创建Photo的子类\N{\fs12}to this photo class, right here, without sub-classing photo.
Dialogue: 0,0:23:20.94,0:23:24.41,yin,,0,0,0,,做法是文件 新文件\N{\fs12}Okay, so I do that with file, new file,
Dialogue: 0,0:23:24.41,0:23:27.01,yin,,0,0,0,,这里不再选择Objective-C类\N{\fs12}and instead of picking objective C class,
Dialogue: 0,0:23:27.01,0:23:29.60,yin,,0,0,0,,而是选择Objective-C category\N{\fs12}I'm going to pick objective C category.
Dialogue: 0,0:23:29.60,0:23:33.33,yin,,0,0,0,,这时 它会问我要创建category的是哪个类\N{\fs12}And when I do, it's going to say, what class do you want to make a category on,
Dialogue: 0,0:23:33.33,0:23:36.01,yin,,0,0,0,,要创建category的是Photo类\N{\fs12}I'm going to make a category on the class photo,
Dialogue: 0,0:23:36.01,0:23:37.29,yin,,0,0,0,,我打算叫它Flickr\N{\fs12}and I'm going to call it Flickr
Dialogue: 0,0:23:37.29,0:23:41.51,yin,,0,0,0,,因为我要给Photo加的这些方法\N{\fs12}because that's what this method that I'm, these methods I'm going to add to photo
Dialogue: 0,0:23:41.51,0:23:44.61,yin,,0,0,0,,都是将Flickr同数据库关联起来\N{\fs12}are all kind of hooking Flickr up to the database,
Dialogue: 0,0:23:44.62,0:23:47.19,yin,,0,0,0,,因此 我认为Flickr用作这个category名很好\N{\fs12}so Flickr seems like a good name for that category.
Dialogue: 0,0:23:47.19,0:23:49.82,yin,,0,0,0,,它还问我要放在哪里\N{\fs12}And, it wants to know where I'm going to put them.
Dialogue: 0,0:23:50.92,0:23:53.71,yin,,0,0,0,,放在和其它东西一样的位置\N{\fs12}Put them in the same places everywhere as everything,
Dialogue: 0,0:23:53.71,0:23:56.10,yin,,0,0,0,,这是我的.h 这是我的.m\N{\fs12}and so here's my .H and here's my .M,
Dialogue: 0,0:23:56.10,0:23:58.82,yin,,0,0,0,,它问我想要做什么\N{\fs12}and it's asking me what do you want to do here.
Dialogue: 0,0:23:58.82,0:24:04.64,yin,,0,0,0,,这里我要实现的方法\N{\fs12}So, the method that I want to implement here is a method
Dialogue: 0,0:24:04.64,0:24:07.18,yin,,0,0,0,,是取一个Flickr字典\N{\fs12}that essentially takes a Flickr dictionary
Dialogue: 0,0:24:07.18,0:24:10.65,yin,,0,0,0,,将一个照片对象加到数据库\N{\fs12}and adds a photo object to the database,
Dialogue: 0,0:24:10.65,0:24:12.91,yin,,0,0,0,,并返回一个指向它的指针\N{\fs12}and returns the pointer to it to me.
Dialogue: 0,0:24:12.91,0:24:14.80,yin,,0,0,0,,都知道我这里要做什么吗\N{\fs12}Everyone understand what I'm going to do here?
Dialogue: 0,0:24:14.80,0:24:19.08,yin,,0,0,0,,我打算把这个叫作 Photo… 确定选的是相同名称\N{\fs12}So, I'm going to call this thing, photo, make sure I pick the same name,
Dialogue: 0,0:24:19.08,0:24:20.99,yin,,0,0,0,,免得后面出现问题\N{\fs12}so that I don't get sidetracked here.
Dialogue: 0,0:24:20.99,0:24:28.74,yin,,0,0,0,,photoWithFlickrInfo 这将是一个NSDictionary\N{\fs12}Photo with Flickr info and this is going be NS Dictionary,
Dialogue: 0,0:24:28.74,0:24:31.68,yin,,0,0,0,,照片字典 除了这个照片字典\N{\fs12}photo dictionary, and what else do I need beside
Dialogue: 0,0:24:31.68,0:24:34.76,yin,,0,0,0,,我还需要什么才能在数据库中创建一个对象\N{\fs12}that photo dictionary to create an object in the database?
Dialogue: 0,0:24:36.47,0:24:38.16,yin,,0,0,0,,同数据库的关联\N{\fs12}A hook to the database.
Dialogue: 0,0:24:38.16,0:24:40.83,yin,,0,0,0,,我需要知道 我要把这张照片加到哪个数据库中\N{\fs12}Okay, I got to know which database you want me to add this photo to.
Dialogue: 0,0:24:40.83,0:24:45.17,yin,,0,0,0,,因此 我还需要 inManagedObjectContext\N{\fs12}So, I also need in managed object context,
Dialogue: 0,0:24:45.17,0:24:48.90,yin,,0,0,0,,NSManagedObjectContext context\N{\fs12}NS managed object managed context context.
Dialogue: 0,0:24:48.90,0:24:49.91,yin,,0,0,0,,我只需要这些\N{\fs12}Okay, and that's all I need;
Dialogue: 0,0:24:49.91,0:24:52.05,yin,,0,0,0,,不过是Flickr信息和context\N{\fs12}just the Flickr information and the context.
Dialogue: 0,0:24:52.05,0:24:55.72,yin,,0,0,0,,这是你要我创建这张照片的地方 我会在这里创建\N{\fs12}That's the place you want me to create this photo, and I will.
Dialogue: 0,0:24:56.48,0:24:59.72,yin,,0,0,0,,这里我还会有一个方法\N{\fs12}And, I'm also going to have another one here; because I know
Dialogue: 0,0:24:59.72,0:25:03.11,yin,,0,0,0,,因为我知道Flickr照片会大批量下载\N{\fs12}that I'm going to be downloading these Flickr photos in big bunches.
Dialogue: 0,0:25:03.11,0:25:05.73,yin,,0,0,0,,每次我调用URLGeoreferencePhotos\N{\fs12}Every time I call URL, geo reference photos
Dialogue: 0,0:25:05.73,0:25:06.74,yin,,0,0,0,,大概是叫这个吧\N{\fs12}or whatever it's called,
Dialogue: 0,0:25:06.74,0:25:09.42,yin,,0,0,0,,它会给出很多 例如一两百个\N{\fs12}I'm going to get a whole bunch of them, like a hundred or 200 of them.
Dialogue: 0,0:25:09.42,0:25:11.62,yin,,0,0,0,,我要有一个批量加载方法 我称其为\N{\fs12}So, I'm going to have a bulk load one that I'm going to call
Dialogue: 0,0:25:11.62,0:25:19.60,yin,,0,0,0,,loadPhotosFromFlickrArray\N{\fs12}load photos from Flickr array,
Dialogue: 0,0:25:19.60,0:25:21.77,yin,,0,0,0,,NSArray\N{\fs12}NS-Array
Dialogue: 0,0:25:21.77,0:25:23.91,yin,,0,0,0,,photos\N{\fs12}photos
Dialogue: 0,0:25:23.91,0:25:26.72,yin,,0,0,0,,这是Flickr NSDictionary的\N{\fs12}of Flickr NS dictionary
Dialogue: 0,0:25:26.72,0:25:30.84,yin,,0,0,0,,inManagedObjectContext\N{\fs12}into managed object context.
Dialogue: 0,0:25:34.24,0:25:36.87,yin,,0,0,0,,NSManagedObjectContext\N{\fs12}NS managed object context.
Dialogue: 0,0:25:36.87,0:25:41.49,yin,,0,0,0,,这就是批量加载方法 我会反复调用这个\N{\fs12}Okay, so that's just going to bulk. It's going to call this basically repeatedly,
Dialogue: 0,0:25:41.49,0:25:43.83,yin,,0,0,0,,虽然这并不见得是最高效的做法\N{\fs12}although that might not be the most efficient way to do that,
Dialogue: 0,0:25:43.83,0:25:46.70,yin,,0,0,0,,后面我们还会稍微讲到\N{\fs12}and we'll talk about that in a little bit.
Dialogue: 0,0:25:46.70,0:25:48.97,yin,,0,0,0,,让我来实现这两个方法\N{\fs12}So, let me implement these two methods.
Dialogue: 0,0:25:48.97,0:25:51.60,yin,,0,0,0,,这是category的接口\N{\fs12}Okay, this is the interface of my category,
Dialogue: 0,0:25:51.60,0:25:53.66,yin,,0,0,0,,而这是category的实现\N{\fs12}and so here's the implementation of my category.
Dialogue: 0,0:25:53.66,0:25:57.29,yin,,0,0,0,,我可以做任何我想做的事情来实现这些\N{\fs12}Now, I can do whatever I want to implement these, except,
Dialogue: 0,0:25:57.29,0:26:00.71,yin,,0,0,0,,但我不能使用任何实例变量\N{\fs12}I can't use any instance variables,
Dialogue: 0,0:26:00.71,0:26:03.42,yin,,0,0,0,,这里不能有任何属性\N{\fs12}so I can't have any properties that are, you know, here,
Dialogue: 0,0:26:03.42,0:26:08.22,yin,,0,0,0,,我需要用photo来实现它们 这样应该就行了\N{\fs12}so I have to implement them basically in terms of photo, if that makes sense that way.
Dialogue: 0,0:26:08.22,0:26:10.86,yin,,0,0,0,,这个会返回一张照片 因此我说\N{\fs12}So, this is going to return a photo, so I'm going to say,
Dialogue: 0,0:26:10.86,0:26:13.25,yin,,0,0,0,,photo = nil\N{\fs12}photo equal nil,
Dialogue: 0,0:26:13.25,0:26:16.48,yin,,0,0,0,,下面这里则是return photo 而两者中间\N{\fs12}and down here, return photo, and in between,
Dialogue: 0,0:26:16.48,0:26:20.47,yin,,0,0,0,,我需要在数据库中找这张照片 或是创建它\N{\fs12}I got to go find this photo in the database, or create it, or
Dialogue: 0,0:26:20.47,0:26:22.15,yin,,0,0,0,,或是别的什么\N{\fs12}whatever it may be.
Dialogue: 0,0:26:22.15,0:26:28.70,yin,,0,0,0,,我们首先来问数据库 你是否已经有了这张照片\N{\fs12}So, let's start with asking the database, do you already have this photo?
Dialogue: 0,0:26:28.70,0:26:32.26,yin,,0,0,0,,如何问数据库是否已经有这张照片呢\N{\fs12}And, so how am I going to ask the database if the photo is already there,
Dialogue: 0,0:26:32.26,0:26:35.73,yin,,0,0,0,,答案是 我将尝试取回它\N{\fs12}and the answer is, I'm going to try and fetch it.
Dialogue: 0,0:26:35.75,0:26:39.00,yin,,0,0,0,,我将用一个FetchRequest\N{\fs12}So, I'm going to have a Fetch Request, and it's going
Dialogue: 0,0:26:39.00,0:26:48.93,yin,,0,0,0,,这是一个到照片表格中的FetchRequest\N{\fs12}to be a Fetch Request into the photo table, if you know anything about it, or into photos.
Dialogue: 0,0:26:48.93,0:26:52.74,yin,,0,0,0,,它会返回照片 因为我要找这张照片\N{\fs12}It's going to return photos, okay, because I'm trying to find this photo.
Dialogue: 0,0:26:52.74,0:26:56.97,yin,,0,0,0,,然后 请求需要一个谓词 什么谓词呢\N{\fs12}And then, the request needs a predicate, and what is the predicate.
Dialogue: 0,0:26:56.97,0:26:58.65,yin,,0,0,0,,我要找哪张照片\N{\fs12}Which photo am I looking for?
Dialogue: 0,0:26:58.65,0:27:05.31,yin,,0,0,0,,我要找的照片 其唯一标识符unique要等于\N{\fs12}Well, I'm looking for the photo whose unique equals the same
Dialogue: 0,0:27:05.31,0:27:10.77,yin,,0,0,0,,这个照片字典的unique\N{\fs12}unique that is photo dictionary right here,
Dialogue: 0,0:27:10.77,0:27:13.05,yin,,0,0,0,,让我们获取这个\N{\fs12}so let's go get that.
Dialogue: 0,0:27:13.05,0:27:16.43,yin,,0,0,0,,NSString *unique = …\N{\fs12}NS-string star unique equals, and we're going
Dialogue: 0,0:27:16.43,0:27:23.62,yin,,0,0,0,,这里我们需要import FlickrFetcher.h\N{\fs12}to need our Flickr Fetcher import, Flickr Fetcher .H,
Dialogue: 0,0:27:23.62,0:27:26.36,yin,,0,0,0,,我将抓取FlickrFetcher.h\N{\fs12}so I'm going to grab Flickr Fetcher .H
Dialogue: 0,0:27:26.36,0:27:30.64,yin,,0,0,0,,从之前我们所做的 也就是Shutterbug\N{\fs12}from the thing we did before, which was Shutterbug.
Dialogue: 0,0:27:30.64,0:27:33.07,yin,,0,0,0,,这是Shutterbug 这是FlickrFetcher\N{\fs12}So, here's Shutterbug, and here's Flickr Fetcher.
Dialogue: 0,0:27:33.07,0:27:36.41,yin,,0,0,0,,我要把这整个都拖到这里\N{\fs12}I'm just going to drag that whole thing right in here.
Dialogue: 0,0:27:36.41,0:27:40.29,yin,,0,0,0,,这样我就有了FlickrFetcher.h\N{\fs12}Alright, so now I have Flickr Fetcher .H,
Dialogue: 0,0:27:40.29,0:27:43.52,yin,,0,0,0,,而在FlickrFetcher.h内\N{\fs12}and inside Flickr Fletcher .H,
Dialogue: 0,0:27:43.52,0:27:46.54,yin,,0,0,0,,我们可以获得照片的唯一标识符\N{\fs12}we can get the photos unique ID
Dialogue: 0,0:27:46.54,0:27:48.92,yin,,0,0,0,,使用这个FLICKR_PHOTO_ID\N{\fs12}with this Flickr photo ID.
Dialogue: 0,0:27:48.93,0:27:51.78,yin,,0,0,0,,于是 我可以到这下面说\N{\fs12}So, I'm going to go down here and say,
Dialogue: 0,0:27:51.78,0:27:58.41,yin,,0,0,0,,photoDictionary[FLICKR_PHOTO_ID]\N{\fs12}photo dictionary, Flickr photo ID.
Dialogue: 0,0:27:58.41,0:28:01.24,yin,,0,0,0,,这里我可能要用valueForKeyPath\N{\fs12}Now, I might want to do value for key path here,
Dialogue: 0,0:28:01.24,0:28:07.42,yin,,0,0,0,,防止这张Flickr照片ID中间有点这些\N{\fs12}just in case this Flickr photo ID might have dots in it or whatever,
Dialogue: 0,0:28:07.42,0:28:09.14,yin,,0,0,0,,Flickr\N{\fs12}Flickr.
Dialogue: 0,0:28:09.14,0:28:12.42,yin,,0,0,0,,也许会有点 就像描述一样\N{\fs12}You know, it might have dots in it like the description has.
Dialogue: 0,0:28:12.42,0:28:15.89,yin,,0,0,0,,这里我就这样 不过valueForKeyPath或许更好\N{\fs12}Okay, I'll leave it this way here, but value for key might be a good idea.
Dialogue: 0,0:28:15.89,0:28:19.28,yin,,0,0,0,,这里我将尝试在数据库中\N{\fs12}So, I'm basically going to fetch into the database to try
Dialogue: 0,0:28:19.28,0:28:23.33,yin,,0,0,0,,找到这张独一无二的照片 看是否已经存在\N{\fs12}and find this unique photo; see if it's already there.
Dialogue: 0,0:28:23.33,0:28:26.08,yin,,0,0,0,,这里我需要一个NSError\N{\fs12}And, I do that by saying I need an NS error here,
Dialogue: 0,0:28:26.08,0:28:31.68,yin,,0,0,0,,我要说 NSArray *matches = [context …\N{\fs12}and then I'm going to say NS array matches equals context,
Dialogue: 0,0:28:31.68,0:28:34.37,yin,,0,0,0,,因为我们需要一个context来进行取回\N{\fs12}because we always have to ask a context to do a fetch.
Dialogue: 0,0:28:34.37,0:28:37.66,yin,,0,0,0,,executeFetchRequest 那个请求\N{\fs12}Execute Fetch Request, that request,
Dialogue: 0,0:28:37.66,0:28:40.44,yin,,0,0,0,,如果有错误 返回错误\N{\fs12}and if there's an error, return an error.
Dialogue: 0,0:28:40.44,0:28:43.43,yin,,0,0,0,,这样我就有了这些照片\N{\fs12}So, now I've got those photos.
Dialogue: 0,0:28:43.43,0:28:46.96,yin,,0,0,0,,这些照片 这里是一张匹配的照片\N{\fs12}Those photos hopefully, in this case a matching photo or maybe not,
Dialogue: 0,0:28:46.96,0:28:47.98,yin,,0,0,0,,被取出来了\N{\fs12}has been pulled out.
Dialogue: 0,0:28:47.98,0:28:50.56,yin,,0,0,0,,这个匹配可以有多种\N{\fs12}Now, this matches can have a number
Dialogue: 0,0:28:50.56,0:28:53.90,yin,,0,0,0,,不同的状态 或者不同的值\N{\fs12}of different states or different values.
Dialogue: 0,0:28:53.90,0:28:56.60,yin,,0,0,0,,这里有一点 它可能是nil\N{\fs12}One thing is, it might be nil.
Dialogue: 0,0:28:56.60,0:29:02.66,yin,,0,0,0,,如果它是nil 或者 如果这个错误不为nil\N{\fs12}If it's nil, okay, or if this error is not nil,
Dialogue: 0,0:29:05.87,0:29:08.25,yin,,0,0,0,,这里是或error\N{\fs12}let's say or error
Dialogue: 0,0:29:08.25,0:29:10.66,yin,,0,0,0,,或者 这里的另一个错误条件是\N{\fs12}or another error condition here is
Dialogue: 0,0:29:10.66,0:29:19.37,yin,,0,0,0,,匹配计数大于1\N{\fs12}that the matches, matches count is greater than one.
Dialogue: 0,0:29:19.37,0:29:22.34,yin,,0,0,0,,因为这些是唯一的\N{\fs12}Okay, because these are supposed to be unique,
Dialogue: 0,0:29:22.34,0:29:26.16,yin,,0,0,0,,如果我这样做得到了多张照片\N{\fs12}and so if I somehow got multiple photos by doing this,
Dialogue: 0,0:29:26.16,0:29:31.84,yin,,0,0,0,,这显然也是错误的 我需要处理这里的错误\N{\fs12}that would also be an error condition, so I have to handle error here.
Dialogue: 0,0:29:31.84,0:29:33.34,yin,,0,0,0,,处理错误\N{\fs12}Handle error.
Dialogue: 0,0:29:33.34,0:29:36.03,yin,,0,0,0,,今天我不打算做这个 不过你们可以想象的到\N{\fs12}I'm not going to do that today, but you can imagine.
Dialogue: 0,0:29:36.03,0:29:47.84,yin,,0,0,0,,否则 如果匹配找到了东西 我们可以直接返回它\N{\fs12}Okay, otherwise, if the matches found something, then we can just return it.
Dialogue: 0,0:29:47.84,0:29:49.42,yin,,0,0,0,,如何返回它呢\N{\fs12}So, how do we return it?
Dialogue: 0,0:29:49.42,0:29:54.28,yin,,0,0,0,,这是一个数组 但这个数组有且只有一个匹配项\N{\fs12}This is in array, but this array is going to have the one and only one match,
Dialogue: 0,0:29:54.28,0:29:58.42,yin,,0,0,0,,因此我可以说 匹配第一个对象\N{\fs12}so I'm going to say matches first object.
Dialogue: 0,0:29:58.42,0:30:00.91,yin,,0,0,0,,你也可以说最后一个对象\N{\fs12}Could also say last object.
Dialogue: 0,0:30:00.91,0:30:04.81,yin,,0,0,0,,否则 匹配计数如果是0\N{\fs12}Otherwise, this matches dot count is 0,
Dialogue: 0,0:30:04.81,0:30:06.96,yin,,0,0,0,,返回的是空数组\N{\fs12}so it returned an array, an empty array.
Dialogue: 0,0:30:06.96,0:30:09.65,yin,,0,0,0,,这意味着我要找的唯一标识符照片并不存在\N{\fs12}That means I looked for that photo that had that unique,
Dialogue: 0,0:30:09.65,0:30:11.74,yin,,0,0,0,,这意味着我要找的唯一标识符照片并不存在\N{\fs12}I couldn't find it, so that photo doesn't exist.
Dialogue: 0,0:30:11.74,0:30:13.69,yin,,0,0,0,,我现在需要创建它\N{\fs12}I now need to create it.
Dialogue: 0,0:30:13.69,0:30:16.31,yin,,0,0,0,,记得如何在数据库中创建对象吗\N{\fs12}Okay, everyone remember how to create an object in the database?
Dialogue: 0,0:30:16.31,0:30:19.31,yin,,0,0,0,,NSEntityDescription\N{\fs12}NS entity description,
Dialogue: 0,0:30:19.32,0:30:22.51,yin,,0,0,0,,insertNewObjectForEntityForName\N{\fs12}insert new object for entity for name,
Dialogue: 0,0:30:22.51,0:30:26.73,yin,,0,0,0,,我们插入一张照片 显然我们还需要指定context\N{\fs12}we're inserting a photo, and we obviously have to specify the context.
Dialogue: 0,0:30:26.73,0:30:28.75,yin,,0,0,0,,我们于是创建了一张照片\N{\fs12}So, we created a photo.
Dialogue: 0,0:30:28.75,0:30:29.93,yin,,0,0,0,,很好\N{\fs12}Excellent.
Dialogue: 0,0:30:29.93,0:30:34.44,yin,,0,0,0,,下面 我们进一步设置照片的属性\N{\fs12}And, now, let's go ahead and set the attributes of the photo.
Dialogue: 0,0:30:34.44,0:30:39.11,yin,,0,0,0,,我还要设置照片的unique\N{\fs12}I'm also going to set the photo's unique, go to unique.
Dialogue: 0,0:30:39.11,0:30:43.64,yin,,0,0,0,,这里我设置了照片的标题 副标题 图像URL\N{\fs12}Alright, so here I'm setting the photos title, subtitle, image URL.
Dialogue: 0,0:30:43.64,0:30:47.37,yin,,0,0,0,,这里我用valueForKeyPath 设置了标题\N{\fs12}So here I'm just setting the title using value for key path
Dialogue: 0,0:30:47.37,0:30:48.95,yin,,0,0,0,,从Flickr字典中\N{\fs12}out of the Flickr dictionary,
Dialogue: 0,0:30:48.95,0:30:51.37,yin,,0,0,0,,副标题 给定描述下 还有URL\N{\fs12}the subtitle, given the description, the URL.
Dialogue: 0,0:30:51.37,0:30:53.66,yin,,0,0,0,,我把这个URL用于照片格式这些\N{\fs12}I'm using this URL for photo format thing.
Dialogue: 0,0:30:53.66,0:30:57.27,yin,,0,0,0,,我要把它转换成字符串 因为数据库中不能放URL\N{\fs12}I have to turn it into a string, okay, because can't put URLs in the database,
Dialogue: 0,0:30:57.27,0:30:58.76,yin,,0,0,0,,但可以放字符串\N{\fs12}but we can put strings there,
Dialogue: 0,0:30:58.78,0:31:00.67,yin,,0,0,0,,然后我还有拍照者名字\N{\fs12}and then I also have the photographer name,
Dialogue: 0,0:31:00.67,0:31:03.21,yin,,0,0,0,,不过我有一个和拍照者实体之间的关系\N{\fs12}but I have a relationship to photographer entity,
Dialogue: 0,0:31:03.21,0:31:06.14,yin,,0,0,0,,因此 现在我还需要创建一个拍照者\N{\fs12}so now I need to create a photographer as well.
Dialogue: 0,0:31:06.14,0:31:09.59,yin,,0,0,0,,于是这里 从Flickr加载一张照片\N{\fs12}So here, loading a photo, right from Flickr,
Dialogue: 0,0:31:09.59,0:31:12.91,yin,,0,0,0,,会导致拍照者也被创建出来\N{\fs12}is causing a photographer also to be created.
Dialogue: 0,0:31:12.91,0:31:15.58,yin,,0,0,0,,这在作业中也会发生\N{\fs12}Okay, and this is happen in your homework too in spades.
Dialogue: 0,0:31:15.58,0:31:18.25,yin,,0,0,0,,你会从Flickr下载这些照片\N{\fs12}Okay, where you're going to download these photos from
Dialogue: 0,0:31:18.25,0:31:20.77,yin,,0,0,0,,你还要创建整个数据库\N{\fs12}Flickr, and you're going to build your entire database.
Dialogue: 0,0:31:20.77,0:31:23.23,yin,,0,0,0,,很多实体总在被创建\N{\fs12}Lots of entities are going to be created all the time,
Dialogue: 0,0:31:23.23,0:31:26.20,yin,,0,0,0,,每次有东西从Flickr回来都是如此\N{\fs12}every time things come back from Flickr.
Dialogue: 0,0:31:26.20,0:31:28.73,yin,,0,0,0,,那我们如何创建拍照者呢\N{\fs12}So, how do we create a photographer?
Dialogue: 0,0:31:28.73,0:31:31.24,yin,,0,0,0,,我会和这里做一样的事\N{\fs12}Well, I'm going to do the same thing I did here,
Dialogue: 0,0:31:31.24,0:31:33.97,yin,,0,0,0,,这里照片的category创建的是这个\N{\fs12}where I have this photo category that creates that,
Dialogue: 0,0:31:33.97,0:31:35.88,yin,,0,0,0,,我要对拍照者做相同的事\N{\fs12}I'm going to do the same thing for photographers.
Dialogue: 0,0:31:35.88,0:31:38.87,yin,,0,0,0,,新文件 创建另一个category\N{\fs12}I'm going to say new file, another category.
Dialogue: 0,0:31:38.87,0:31:41.61,yin,,0,0,0,,这将是拍照者的category\N{\fs12}This is going to be a category in photography, photographer.
Dialogue: 0,0:31:41.61,0:31:43.16,yin,,0,0,0,,这不是特别用于Flickr的\N{\fs12}This one's not Flickr specific,
Dialogue: 0,0:31:43.16,0:31:45.19,yin,,0,0,0,,因为拍照者只有一个名字\N{\fs12}because photographer only has a name, so I'm going
Dialogue: 0,0:31:45.19,0:31:49.43,yin,,0,0,0,,因此 我打算把这个category叫作Create 而非Flickr\N{\fs12}to call this category, just to be different, create, instead of Flickr.
Dialogue: 0,0:31:49.43,0:31:51.93,yin,,0,0,0,,还是放到相同的地方\N{\fs12}So, we'll put this in the same place.
Dialogue: 0,0:31:51.93,0:31:53.86,yin,,0,0,0,,这里\N{\fs12}Here it is right here.
Dialogue: 0,0:31:53.86,0:31:59.00,yin,,0,0,0,,上面这里 Photographer 对\N{\fs12}Put this up here, and Photographer, yeah.
Dialogue: 0,0:31:59.00,0:32:00.63,yin,,0,0,0,,它非常类似\N{\fs12}It's very similar.
Dialogue: 0,0:32:00.63,0:32:01.79,yin,,0,0,0,,几乎完全一样\N{\fs12}It looks almost exactly the same.
Dialogue: 0,0:32:01.79,0:32:02.95,yin,,0,0,0,,我们为它进行取回\N{\fs12}We're going to fetch for it.
Dialogue: 0,0:32:02.95,0:32:07.09,yin,,0,0,0,,我们要处理找不到的情况 设定名称 等等\N{\fs12}We'll handle, if we can't find it, set the name, all that business.
Dialogue: 0,0:32:07.09,0:32:09.75,yin,,0,0,0,,把这些放到头文件中\N{\fs12}So, we put that in the header file, okay.
Dialogue: 0,0:32:11.51,0:32:14.37,yin,,0,0,0,,尝试加速一些\N{\fs12}Just trying to speed it up a little bit here.
Dialogue: 0,0:32:14.37,0:32:16.76,yin,,0,0,0,,看我做这些 你们学不到新东西\N{\fs12}You wouldn't learn anything new by my doing this all again.
Dialogue: 0,0:32:16.76,0:32:22.00,yin,,0,0,0,,这样我就能创建一个拍照者 给定名字 给定context\N{\fs12}But, now I have a way to create a photographer, given a name in a given context.
Dialogue: 0,0:32:22.00,0:32:23.43,yin,,0,0,0,,把那个用到这里\N{\fs12}So, we'll use that over here,
Dialogue: 0,0:32:23.43,0:32:27.76,yin,,0,0,0,,我们说 photo.whoTook = …\N{\fs12}and we'll just say photo.whotook equals,
Dialogue: 0,0:32:27.76,0:32:30.59,yin,,0,0,0,,我们需要导入那个category\N{\fs12}and we've got to import that little category.
Dialogue: 0,0:32:30.59,0:32:35.72,yin,,0,0,0,,Photographer+Create\N{\fs12}Photographer create.
Dialogue: 0,0:32:35.72,0:32:39.79,yin,,0,0,0,,Photographer\N{\fs12}Photographer,
Dialogue: 0,0:32:39.79,0:32:41.38,yin,,0,0,0,,photographerWithName\N{\fs12}photographer with name
Dialogue: 0,0:32:41.38,0:32:45.57,yin,,0,0,0,,名字也就是我们从Flickr获得的拍照者名字\N{\fs12}and the name is the photographer name that we got out of the Flickr thing,
Dialogue: 0,0:32:45.57,0:32:47.58,yin,,0,0,0,,context一样\N{\fs12}and same context.
Dialogue: 0,0:32:50.99,0:32:53.60,yin,,0,0,0,,大家都理解了这个方法吧\N{\fs12}Everyone understand this method right here.
Dialogue: 0,0:32:53.60,0:32:55.51,yin,,0,0,0,,对于这个方法\N{\fs12}So, this method is going to,
Dialogue: 0,0:32:55.51,0:32:59.09,yin,,0,0,0,,如果我们从照片信息给它一个Flickr字典\N{\fs12}if we give it a Flickr dictionary from photo info,
Dialogue: 0,0:32:59.11,0:33:01.50,yin,,0,0,0,,它会返给我们一个数据库中的照片对象\N{\fs12}it's going to give us back a photo object in the database,
Dialogue: 0,0:33:01.51,0:33:02.81,yin,,0,0,0,,要么是创建一个\N{\fs12}either by creating it
Dialogue: 0,0:33:02.81,0:33:04.95,yin,,0,0,0,,要么是找一个已经有的\N{\fs12}or by finding one that's already there,
Dialogue: 0,0:33:04.95,0:33:09.01,yin,,0,0,0,,如果有问题 它也可以返回nil\N{\fs12}and it will return nil if it has a problem with it.
Dialogue: 0,0:33:09.01,0:33:11.75,yin,,0,0,0,,都理解了吗\N{\fs12}Everybody got that.
Dialogue: 0,0:33:11.75,0:33:15.41,yin,,0,0,0,,好 这样 我们就有了很好的访问方式\N{\fs12}Okay. So, now that we have this thing, we have these nice ways to access it.
Dialogue: 0,0:33:15.41,0:33:17.53,yin,,0,0,0,,下面再简单讲下TableView\N{\fs12}Let's talk a little bit about the TableView,
Dialogue: 0,0:33:17.53,0:33:20.52,yin,,0,0,0,,以及如何把这些东西显示在TableView中\N{\fs12}and how we're going to display this stuff in a TableView,
Dialogue: 0,0:33:20.52,0:33:22.47,yin,,0,0,0,,我们能很简单地\N{\fs12}and it's really a simple matter
Dialogue: 0,0:33:22.47,0:33:28.43,yin,,0,0,0,,创建一个新的TableView子类\N{\fs12}of creating a new TableView subclass
Dialogue: 0,0:33:28.43,0:33:31.83,yin,,0,0,0,,来实现那个FetchedResultsController\N{\fs12}that implements that Fetch Results Controller business.
Dialogue: 0,0:33:31.83,0:33:34.32,yin,,0,0,0,,我讲过 你们有这个Core Data的东西\N{\fs12}And I told you that you were going to have this Core Data thing
Dialogue: 0,0:33:34.32,0:33:36.48,yin,,0,0,0,,让这个更容易 我们现在要用它\N{\fs12}to make that easy, so we're going to use that.
Dialogue: 0,0:33:36.48,0:33:38.55,yin,,0,0,0,,这是CoreDataTableViewController\N{\fs12}Here is the Core Data TableView controller.
Dialogue: 0,0:33:38.55,0:33:39.31,yin,,0,0,0,,拖进来\N{\fs12}We'll drag it in.
Dialogue: 0,0:33:39.31,0:33:41.03,yin,,0,0,0,,这里我们来看看它\N{\fs12}We'll take a look at it here.
Dialogue: 0,0:33:41.03,0:33:44.27,yin,,0,0,0,,这是Core Data表格视图\N{\fs12}Alright, so here's the Core Data TableView.
Dialogue: 0,0:33:44.27,0:33:45.43,yin,,0,0,0,,这是它的头文件\N{\fs12}Here's its header file.
Dialogue: 0,0:33:45.43,0:33:48.41,yin,,0,0,0,,可以看到 它有这个FetchedResultsController的东西\N{\fs12}You can see, it just has this Fetch Results Controller thing.
Dialogue: 0,0:33:48.41,0:33:51.18,yin,,0,0,0,,它还有一个强制取回的方式 但你不需要这样做\N{\fs12}It also has a way to force it to Fetch, but you don't ever have to do that.
Dialogue: 0,0:33:51.18,0:33:52.54,yin,,0,0,0,,它会自动发生\N{\fs12}It will happen automatically.
Dialogue: 0,0:33:52.54,0:33:55.26,yin,,0,0,0,,它有这个属性 再看这个的实现\N{\fs12}So, it has this property, and if you look at this implementation of this thing.
Dialogue: 0,0:33:55.26,0:33:59.31,yin,,0,0,0,,除了设置FetchedResultsController…\N{\fs12}Besides setting the Fetcher Results Controller,
Dialogue: 0,0:33:59.31,0:34:02.59,yin,,0,0,0,,我放到这里的其实主要是一些日志\N{\fs12}which is mostly just a bunch of logs, okay, that I put in there.
Dialogue: 0,0:34:02.59,0:34:07.47,yin,,0,0,0,,它还实现UITableViewDataSource 看到了没\N{\fs12}It's implementing UI-TableView data source, you see,
Dialogue: 0,0:34:07.47,0:34:09.44,yin,,0,0,0,,用FetchedResultsController\N{\fs12}in terms of the Fetch Result Controller.
Dialogue: 0,0:34:09.44,0:34:11.74,yin,,0,0,0,,然后 它还做了这些委托的事情\N{\fs12}And then, it's also doing this delegate business,
Dialogue: 0,0:34:11.74,0:34:14.82,yin,,0,0,0,,监视数据库中的变化\N{\fs12}where it's watching for changes in the database.
Dialogue: 0,0:34:14.82,0:34:16.79,yin,,0,0,0,,就这些了\N{\fs12}Okay, and that's it. That's all it does.
Dialogue: 0,0:34:16.79,0:34:18.58,yin,,0,0,0,,这段代码实际上复制粘贴自\N{\fs12}And this code is actually copied and pasted
Dialogue: 0,0:34:18.58,0:34:21.14,yin,,0,0,0,,NSFetchedResultsController的说明文档\N{\fs12}from the documentation for NS Fetch Results Controller,
Dialogue: 0,0:34:21.14,0:34:24.60,yin,,0,0,0,,这里没有什么值得惊喜的\N{\fs12}so this is nothing exciting in here.
Dialogue: 0,0:34:24.60,0:34:28.89,yin,,0,0,0,,创建关联数据库的TableView时\N{\fs12}So, when we create a TableView that wants to look in the database,
Dialogue: 0,0:34:28.89,0:34:30.69,yin,,0,0,0,,我们创建了类\N{\fs12}okay, we've created objectives in class,
Dialogue: 0,0:34:30.69,0:34:33.81,yin,,0,0,0,,现在我们要创建CoreDataTableViewController的子类\N{\fs12}we're going to make it be a subclass of Core Data TableView Controller.
Dialogue: 0,0:34:33.81,0:34:34.98,yin,,0,0,0,,我要创建的这个\N{\fs12}So, I'm going to create one, and I'm going
Dialogue: 0,0:34:34.98,0:34:39.15,yin,,0,0,0,,叫作PhotographersCDTVC\N{\fs12}to call it photographers, I'm going to call it CDTVC,
Dialogue: 0,0:34:39.15,0:34:41.00,yin,,0,0,0,,CoreDataTableViewController的首字母\N{\fs12}Core Data TableView Controller.
Dialogue: 0,0:34:41.00,0:34:43.40,yin,,0,0,0,,有些人很喜欢这种命名惯例\N{\fs12}Okay, it's kind of a naming convention some people
Dialogue: 0,0:34:43.40,0:34:45.60,yin,,0,0,0,,我打算这样命名\N{\fs12}like to use, and so I'm going to do that.
Dialogue: 0,0:34:45.60,0:34:48.13,yin,,0,0,0,,因为它会显示拍照者 这就是它的作用\N{\fs12}Because it displays photographer; that's what it does.
Dialogue: 0,0:34:48.13,0:34:49.39,yin,,0,0,0,,创建这个\N{\fs12}So, let's create that.
Dialogue: 0,0:34:49.39,0:34:53.51,yin,,0,0,0,,还是放到顶层 同其它那些一样\N{\fs12}Let's put it top level; same place as everywhere else.
Dialogue: 0,0:34:53.51,0:34:55.13,yin,,0,0,0,,好了 创建成功\N{\fs12}Here it is. It's created it.
Dialogue: 0,0:34:55.13,0:34:57.73,yin,,0,0,0,,这些东西我都不需要\N{\fs12}I don't need any of this business for that.
Dialogue: 0,0:34:57.73,0:35:00.03,yin,,0,0,0,,我们来想想它的公共API\N{\fs12}And, let's think about its public API.
Dialogue: 0,0:35:00.03,0:35:01.71,yin,,0,0,0,,这个东西需要什么\N{\fs12}What does this thing need?
Dialogue: 0,0:35:01.71,0:35:05.55,yin,,0,0,0,,它和数据库中很多其它东西需要的一样\N{\fs12}Well, it needs what most things need that are doing database stuff.
Dialogue: 0,0:35:05.55,0:35:10.54,yin,,0,0,0,,它需要一个NSManagedObjectContext\N{\fs12}It needs an NS managed object context,
Dialogue: 0,0:35:10.55,0:35:12.14,yin,,0,0,0,,因此这个类\N{\fs12}and so, this class,
Dialogue: 0,0:35:12.14,0:35:15.96,yin,,0,0,0,,它的作用就是 给你展示所有拍照者\N{\fs12}its job in life is going to be, it will show you all the photographers
Dialogue: 0,0:35:15.96,0:35:18.43,yin,,0,0,0,,在给定context下 在给定数据库中\N{\fs12}in a given context, the given database.
Dialogue: 0,0:35:18.43,0:35:19.71,yin,,0,0,0,,你到数据库中\N{\fs12}You give it a point or two databases;
Dialogue: 0,0:35:19.71,0:35:21.55,yin,,0,0,0,,它会给你其中所有的拍照者\N{\fs12}it will look in there and show you all the photographers in it.
Dialogue: 0,0:35:21.55,0:35:24.27,yin,,0,0,0,,这就是它的作用\N{\fs12}That's what this thing is going to do.
Dialogue: 0,0:35:24.27,0:35:28.80,yin,,0,0,0,,要让这个发生 它只需要设置\N{\fs12}So, to make that happen, all it needs to do is set
Dialogue: 0,0:35:28.80,0:35:31.99,yin,,0,0,0,,FetchedResultsController那些 在它的超类中\N{\fs12}that Fetch Results Controller thing in its super class, right?
Dialogue: 0,0:35:31.99,0:35:35.41,yin,,0,0,0,,也就是CoreDataTableViewController 我来做这个\N{\fs12}Which is its Core Data TableView controller, so I'm going to do that.
Dialogue: 0,0:35:35.41,0:35:39.76,yin,,0,0,0,,只要有人设置了ManagedObjectContext\N{\fs12}As soon as someone sets the managed object context.
Dialogue: 0,0:35:39.76,0:35:46.18,yin,,0,0,0,,这个叫作managedObjectContext吧 这样更清楚一些\N{\fs12}Let's call this managed object context, so it's a little clearer.
Dialogue: 0,0:35:46.18,0:35:50.30,yin,,0,0,0,,只要有人设置了ManagedObjectContext\N{\fs12}As soon as someone sets this managed object context,
Dialogue: 0,0:35:50.30,0:35:54.76,yin,,0,0,0,,我就能设置我的FetchedResultsController\N{\fs12}I'm going to be able to set up my Fetch Results Controller.
Dialogue: 0,0:35:54.76,0:35:58.35,yin,,0,0,0,,只有有了context才能设置FetchedResultsController\N{\fs12}I can't set up my Fetch Results Controller until I have the context.
Dialogue: 0,0:35:58.35,0:36:01.70,yin,,0,0,0,,有时 context通过这样的公共API给到我\N{\fs12}Sometimes, the context comes to me via public API like this.
Dialogue: 0,0:36:01.70,0:36:06.54,yin,,0,0,0,,有些视图控制器会从其它对象获得它们的context\N{\fs12}Some view controllers will get their context from other objects.
Dialogue: 0,0:36:06.54,0:36:09.31,yin,,0,0,0,,最显著的是 作业中这一点要注意\N{\fs12}Most notably, and pay attention here for your homework,
Dialogue: 0,0:36:09.31,0:36:12.13,yin,,0,0,0,,如果有人给你一个ManagedObject 例如照片\N{\fs12}if someone gives you a managed object like a photo
Dialogue: 0,0:36:12.13,0:36:13.20,yin,,0,0,0,,或拍照者\N{\fs12}or a photographer,
Dialogue: 0,0:36:13.20,0:36:17.63,yin,,0,0,0,,你现在就有了context 因为NSManagedObject有一个方法\N{\fs12}you now have the context, because NS managed object has a method
Dialogue: 0,0:36:17.63,0:36:19.98,yin,,0,0,0,,叫作managedObjectContext\N{\fs12}in it called managed object context.
Dialogue: 0,0:36:19.98,0:36:23.07,yin,,0,0,0,,它会给你对象的context\N{\fs12}It will give you the context that that object came out of.
Dialogue: 0,0:36:23.07,0:36:24.51,yin,,0,0,0,,了解这个很重要\N{\fs12}So, it's really important to understand.
Dialogue: 0,0:36:24.51,0:36:27.93,yin,,0,0,0,,如果有人给你一个Photo 你就有了ManagedObjectContext\N{\fs12}If someone gives you a photo, you have a managed object context,
Dialogue: 0,0:36:27.93,0:36:29.68,yin,,0,0,0,,不过这个处在顶层\N{\fs12}but this thing is at the top level.
Dialogue: 0,0:36:29.68,0:36:31.38,yin,,0,0,0,,它展示所有的拍照者\N{\fs12}It's showing all the photographers.
Dialogue: 0,0:36:31.38,0:36:33.20,yin,,0,0,0,,我们还没从数据库中得到任何东西\N{\fs12}We don't have anything yet out of the database,
Dialogue: 0,0:36:33.20,0:36:34.45,yin,,0,0,0,,因此有人需要告诉我们context\N{\fs12}so someone has to tell us the context.
Dialogue: 0,0:36:34.45,0:36:37.03,yin,,0,0,0,,从哪个数据库取回这些东西\N{\fs12}Which database to fetch these things out of?
Dialogue: 0,0:36:37.03,0:36:38.74,yin,,0,0,0,,下面我只需要说\N{\fs12}So, now I just need to say,
Dialogue: 0,0:36:38.74,0:36:41.43,yin,,0,0,0,,fetchResultsController = 什么东西\N{\fs12}Fetch Results Controller equals something, and so I'm going
Dialogue: 0,0:36:41.43,0:36:44.84,yin,,0,0,0,,我要创建一个新的FetchResultsController\N{\fs12}to create a new Fetch Results Controller.
Dialogue: 0,0:36:44.84,0:36:49.29,yin,,0,0,0,,alloc init\N{\fs12}Alloc init,
Dialogue: 0,0:36:49.29,0:36:52.58,yin,,0,0,0,,init有所有这些参数\N{\fs12}and its init has all these arguments here.
Dialogue: 0,0:36:52.58,0:36:54.87,yin,,0,0,0,,它需要一个FetchRequest\N{\fs12}It needs a Fetch Request, okay.
Dialogue: 0,0:36:54.87,0:36:57.96,yin,,0,0,0,,这里不要弄得这么晦涩\N{\fs12}Actually, let's, so we don't get this kind of blackiness,
Dialogue: 0,0:36:57.96,0:37:00.70,yin,,0,0,0,,先来看这些参数\N{\fs12}let's go ahead and make all the arguments first.
Dialogue: 0,0:37:00.70,0:37:02.09,yin,,0,0,0,,它需要一个FetchRequest\N{\fs12}It needs a Fetch Request,
Dialogue: 0,0:37:02.09,0:37:04.88,yin,,0,0,0,,因为这就是它的作用 关联一个FetchRequest\N{\fs12}because that's what it does is hook up a Fetch Request
Dialogue: 0,0:37:04.88,0:37:09.33,yin,,0,0,0,,那么 这就是一个请求\N{\fs12}to something, and so, this is a request
Dialogue: 0,0:37:09.33,0:37:14.68,yin,,0,0,0,,请求的是拍照者表格 我们想要一个拍照者\N{\fs12}into the photographer table, right, so we want photographer.
Dialogue: 0,0:37:14.68,0:37:17.20,yin,,0,0,0,,我们要展示所有的拍照者\N{\fs12}We're going to show all the photographers.
Dialogue: 0,0:37:17.20,0:37:19.70,yin,,0,0,0,,这个的谓词是nil\N{\fs12}The predicate for this thing is nil.
Dialogue: 0,0:37:19.70,0:37:22.47,yin,,0,0,0,,谓词为nil是什么意思\N{\fs12}What does that mean predicate nil?
Dialogue: 0,0:37:22.47,0:37:25.77,yin,,0,0,0,,谓词为nil是说 所有都要\N{\fs12}Predicate nil means all of them.
Dialogue: 0,0:37:25.77,0:37:28.22,yin,,0,0,0,,如果你说谓词为nil\N{\fs12}So, if you say predicate nil,
Dialogue: 0,0:37:28.22,0:37:30.50,yin,,0,0,0,,这是说 我要所有的拍照者\N{\fs12}that means give me all the photographers.
Dialogue: 0,0:37:30.50,0:37:33.46,yin,,0,0,0,,排序描述器 没错 我们要排序\N{\fs12}And sort descriptor, yea, let's sort these things.
Dialogue: 0,0:37:33.46,0:37:39.55,yin,,0,0,0,,排序这样来 sortDescriptorWithKey\N{\fs12}Let's sort them by, let's see, sort descriptor with key, well,
Dialogue: 0,0:37:39.55,0:37:41.68,yin,,0,0,0,,我们根据拍照者名字来排序\N{\fs12}let's sort photographers by their name.
Dialogue: 0,0:37:41.68,0:37:46.92,yin,,0,0,0,,实际上很有趣的是 你还可以通过关系来排序\N{\fs12}Amazingly, you can actually sort things by things through relationships.
Dialogue: 0,0:37:46.92,0:37:49.14,yin,,0,0,0,,你还可以通过其它对象的属性来排序\N{\fs12}So, you can sort it be other objects properties if you want.
Dialogue: 0,0:37:49.14,0:37:51.54,yin,,0,0,0,,不过这里 拍照者的排序\N{\fs12}But here, photographer, we're going to have it sort
Dialogue: 0,0:37:51.54,0:37:54.57,yin,,0,0,0,,我们打算根据名字来 采用降序\N{\fs12}by its name, and yes, we're going to have it descending,
Dialogue: 0,0:37:54.57,0:38:01.90,yin,,0,0,0,,这里的选择器我们选用localizedStandardCompare\N{\fs12}and we're going to use the selector here called localized standard compare, okay.
Dialogue: 0,0:38:01.90,0:38:07.21,yin,,0,0,0,,对于字符串 我们一般都用这个\N{\fs12}Which is what we use mostly for strings that are going to appear when these interface.
Dialogue: 0,0:38:07.21,0:38:09.69,yin,,0,0,0,,数组要有闭括号\N{\fs12}We need to close our array there,
Dialogue: 0,0:38:09.69,0:38:12.12,yin,,0,0,0,,因为这是一个排序描述器的数组\N{\fs12}because this is an array of sort descriptors. We only need one,
Dialogue: 0,0:38:12.12,0:38:15.83,yin,,0,0,0,,我们还可以施加限制 例如只要一百个\N{\fs12}and we could limit like, for example we could say, only give us a hundred.
Dialogue: 0,0:38:15.83,0:38:20.04,yin,,0,0,0,,我们只要一百个拍照者 这当然有些傻\N{\fs12}We only want to see a hundred photographers, which would be kind of silly
Dialogue: 0,0:38:20.04,0:38:21.85,yin,,0,0,0,,因为这里是字母顺序排序\N{\fs12}because we are sorting alphabetically,
Dialogue: 0,0:38:21.85,0:38:23.56,yin,,0,0,0,,这没有意义 这样的话\N{\fs12}so this would not make sense, because we wouldn't get
Dialogue: 0,0:38:23.56,0:38:26.12,yin,,0,0,0,,名字字母序靠后的人就永远不会出现\N{\fs12}to see the people whose names unfortunately happen to be end
Dialogue: 0,0:38:26.12,0:38:27.55,yin,,0,0,0,,因此这里我们不会这样做\N{\fs12}of the alphabet, but we wouldn't do it here.
Dialogue: 0,0:38:27.55,0:38:28.70,yin,,0,0,0,,不过有些情况下需要这样\N{\fs12}But, in other cases you would.
Dialogue: 0,0:38:28.70,0:38:31.76,yin,,0,0,0,,作业中 你可能就会这样做\N{\fs12}In your homework, you very well might do that.
Dialogue: 0,0:38:31.76,0:38:36.65,yin,,0,0,0,,好 我们有了请求 有了ManagedObjectContext\N{\fs12}Alright, so now, we have the request, we have the managed object context.
Dialogue: 0,0:38:36.65,0:38:40.44,yin,,0,0,0,,这是这个方法的参数 我们也设置了\N{\fs12}That's an argument to this method is what we're setting actually.
Dialogue: 0,0:38:40.44,0:38:41.58,yin,,0,0,0,,这是section那些\N{\fs12}Here's the section thing.
Dialogue: 0,0:38:41.58,0:38:42.93,yin,,0,0,0,,我们可以在这里做\N{\fs12}We could make sections here,
Dialogue: 0,0:38:42.94,0:38:44.93,yin,,0,0,0,,不过Photographer中没有东西可以做到这个\N{\fs12}but there's really nothing in a photographer to do that,
Dialogue: 0,0:38:44.94,0:38:48.48,yin,,0,0,0,,因此这里我们不打算做 缓存也免了\N{\fs12}so we won't do that, and we're not going to cache.
Dialogue: 0,0:38:48.48,0:38:51.96,yin,,0,0,0,,就是这样了 就只需要这些了\N{\fs12}So, that's it. That's really all that's required
Dialogue: 0,0:38:51.96,0:38:55.25,yin,,0,0,0,,这样TableView就能工作了 不过还有一点\N{\fs12}to make this TableView work, except for one thing,
Dialogue: 0,0:38:55.25,0:38:57.45,yin,,0,0,0,,也就是 FetchResultsController\N{\fs12}which is that Fetch Results Controller,
Dialogue: 0,0:38:57.45,0:38:59.85,yin,,0,0,0,,我讲过 它实现了所有的UITableViewDataSource\N{\fs12}I told you it implemented all the UI-TableView data source
Dialogue: 0,0:38:59.85,0:39:02.68,yin,,0,0,0,,不过有一个它不能实现 也就是\N{\fs12}things, but there's one of them it can't implement which is
Dialogue: 0,0:39:02.68,0:39:04.84,yin,,0,0,0,,cellForRowAtIndexPath\N{\fs12}cell for row at index path.
Dialogue: 0,0:39:04.84,0:39:07.66,yin,,0,0,0,,它不知道对象的什么属性\N{\fs12}Okay, it doesn't really know what attributes
Dialogue: 0,0:39:07.66,0:39:11.43,yin,,0,0,0,,你想放到UITableViewCell的哪些部分\N{\fs12}of the object you want to put in which parts of the UI-TableView cell.
Dialogue: 0,0:39:11.43,0:39:14.32,yin,,0,0,0,,标题 副标题 它不知道这些\N{\fs12}The title, the subtitle, it doesn't know those things.
Dialogue: 0,0:39:14.32,0:39:16.43,yin,,0,0,0,,因此 我们需要自己来实现\N{\fs12}So, we have to implement that ourselves.
Dialogue: 0,0:39:16.43,0:39:20.68,yin,,0,0,0,,这是UITableViewCell\N{\fs12}So, that's UI-TableView cell,
Dialogue: 0,0:39:20.68,0:39:22.91,yin,,0,0,0,,cellForRowAtIndexPath\N{\fs12}cellForRowAtIndexPath.
Dialogue: 0,0:39:22.91,0:39:25.18,yin,,0,0,0,,这个东西你应该非常熟悉才行\N{\fs12}You should be very, very, very familiar with this thing.
Dialogue: 0,0:39:25.18,0:39:28.74,yin,,0,0,0,,它是这样的 cell =\N{\fs12}It just looks like this, cell equal,
Dialogue: 0,0:39:28.74,0:39:32.72,yin,,0,0,0,,self.tableView Dequeue…\N{\fs12}self.tableview DQ,
Dialogue: 0,0:39:32.74,0:39:35.87,yin,,0,0,0,,这些是拍照者 因此这里称作Photographer Cell\N{\fs12}and well, these are photographers, so we'll call this photographer cells.
Dialogue: 0,0:39:35.87,0:39:38.53,yin,,0,0,0,,你们要监督我的工作\N{\fs12}We got to make sure you guys are going to keep me honest.
Dialogue: 0,0:39:38.53,0:39:40.32,yin,,0,0,0,,确保我记得在故事板中设置这个\N{\fs12}Make sure I remember to set that in the story board
Dialogue: 0,0:39:40.32,0:39:42.52,yin,,0,0,0,,确保我记得在故事板中设置这个\N{\fs12}when we create one of these in the story board.
Dialogue: 0,0:39:42.52,0:39:50.11,yin,,0,0,0,,现在 我需要这个行和这个section处的拍照者\N{\fs12}And now, I need the photographer that is at this row and section.
Dialogue: 0,0:39:50.11,0:39:57.23,yin,,0,0,0,,我将首先导入Photographer.h\N{\fs12}So, I'm going to import photographer first of all, not create, .H.
Dialogue: 0,0:39:57.23,0:39:58.97,yin,,0,0,0,,好 这就是Photographer\N{\fs12}Okay, so there's the photographer.
Dialogue: 0,0:39:58.97,0:40:01.36,yin,,0,0,0,,然后我要说 photographer = …\N{\fs12}And, then I'm going to say photographer equals,
Dialogue: 0,0:40:01.36,0:40:06.31,yin,,0,0,0,,这个怎么做呢 photographer = self.\N{\fs12}and how do I do this, photographer equals self.
Dialogue: 0,0:40:06.31,0:40:10.73,yin,,0,0,0,,fetchedResultsController objectAtIndexPath:indexPath\N{\fs12}Fetched results controller, object at index path, index path.
Dialogue: 0,0:40:10.73,0:40:13.98,yin,,0,0,0,,这就得到了这一行处的拍照者\N{\fs12}Now I have the photographer that's in this row.
Dialogue: 0,0:40:13.98,0:40:15.84,yin,,0,0,0,,有了这个之后\N{\fs12}So, now that I have that, I can do things
Dialogue: 0,0:40:15.84,0:40:22.51,yin,,0,0,0,,我就可以说 textLabel.text = 拍照者的名字\N{\fs12}like text label.text equals let's say the photographers name of course.
Dialogue: 0,0:40:22.51,0:40:24.26,yin,,0,0,0,,再来点酷的\N{\fs12}Also, how about something cool like this,
Dialogue: 0,0:40:24.26,0:40:29.61,yin,,0,0,0,,cell.detailTextLabel = 一个带格式的字符串\N{\fs12}cell.detail text label equals a string with format.
Dialogue: 0,0:40:31.07,0:40:34.91,yin,,0,0,0,,如果我想要拍照者所拍的照片数量呢\N{\fs12}What if I wanted to put how many photos this photographer has taken,
Dialogue: 0,0:40:34.91,0:40:37.97,yin,,0,0,0,,这个信息很容易从数据库中获得\N{\fs12}well that information is readily available to me in the database,
Dialogue: 0,0:40:37.98,0:40:40.18,yin,,0,0,0,,%d photos\N{\fs12}percent D photos,
Dialogue: 0,0:40:40.18,0:40:45.66,yin,,0,0,0,,photographer.photos count\N{\fs12}photographer.photos count.
Dialogue: 0,0:40:45.66,0:40:50.65,yin,,0,0,0,,好 Xcode中 它是这样的\N{\fs12}Okay, X code, shoot, the way it does that.
Dialogue: 0,0:40:50.65,0:40:52.02,yin,,0,0,0,,好\N{\fs12}Okay.
Dialogue: 0,0:40:52.02,0:40:55.19,yin,,0,0,0,,我刚搞定了这个东西\N{\fs12}So, I just go through that thing that goes through that thing
Dialogue: 0,0:40:55.19,0:40:56.94,yin,,0,0,0,,whoTook photos关系\N{\fs12}that who took photos relationship.
Dialogue: 0,0:40:56.94,0:40:58.25,yin,,0,0,0,,我抓取了photos一侧\N{\fs12}I just grab the photos side.
Dialogue: 0,0:40:58.25,0:40:59.39,yin,,0,0,0,,它是一个NSSet\N{\fs12}It's an NS set.
Dialogue: 0,0:40:59.39,0:41:01.11,yin,,0,0,0,,NSSet实现count计数\N{\fs12}NS set implements count.
Dialogue: 0,0:41:01.11,0:41:03.82,yin,,0,0,0,,我就得到了我要的\N{\fs12}I got what I need.
Dialogue: 0,0:41:03.82,0:41:05.81,yin,,0,0,0,,然后返回cell\N{\fs12}And, then let's return this cell.
Dialogue: 0,0:41:07.81,0:41:10.41,yin,,0,0,0,,大家都理解这个cellForRowAtIndexPath了吗\N{\fs12}Okay, every one understand this cellForRowAtIndexPath.
Dialogue: 0,0:41:10.41,0:41:10.86,yin,,0,0,0,,有问题\N{\fs12}Question?
Dialogue: 0,0:41:15.06,0:41:17.33,yin,,0,0,0,,对 这个属性 fetchedResultsController\N{\fs12}Yes, this property fetchedResultsController
Dialogue: 0,0:41:17.33,0:41:19.51,yin,,0,0,0,,继承自CoreDataTableView\N{\fs12}is inherited from Core Data TableView.
Dialogue: 0,0:41:19.51,0:41:22.19,yin,,0,0,0,,问得很好\N{\fs12}That's actually a good question.
Dialogue: 0,0:41:22.19,0:41:24.21,yin,,0,0,0,,好 我们继续\N{\fs12}Okay, so let's go ahead
Dialogue: 0,0:41:24.21,0:41:29.09,yin,,0,0,0,,来创建相关的故事板 毕竟我们现在在做这个\N{\fs12}and build our story board while we're at this, and while we have this fresh in our minds.
Dialogue: 0,0:41:29.09,0:41:29.85,yin,,0,0,0,,它是这样的\N{\fs12}So, here it is.
Dialogue: 0,0:41:29.85,0:41:31.95,yin,,0,0,0,,这是我们得到的默认情形\N{\fs12}This is the kind of default one that we got.
Dialogue: 0,0:41:31.95,0:41:33.87,yin,,0,0,0,,删掉它 我们不需要它\N{\fs12}Let's get rid this. We don't want this.
Dialogue: 0,0:41:33.87,0:41:38.75,yin,,0,0,0,,拖出一个TableView\N{\fs12}Let's go bring out a TableView. So, here I'm just going to drag a TableView out here.
Dialogue: 0,0:41:38.75,0:41:47.41,yin,,0,0,0,,将它设置为PhotographersCDTVC\N{\fs12}I'm going to set it to be a photographers Core Data TableView Controller, right,
Dialogue: 0,0:41:47.42,0:41:50.56,yin,,0,0,0,,然后按需求设置cell\N{\fs12}and then let's set up our cell the way we want.
Dialogue: 0,0:41:50.56,0:41:54.53,yin,,0,0,0,,我们需要它是带有标题的 因为它将拥有拍照者名字\N{\fs12}We want it to be subtitled, because it's going to have the photographer name
Dialogue: 0,0:41:54.53,0:41:56.39,yin,,0,0,0,,然后是他们拍了多少张照片\N{\fs12}and then how many photos they took.
Dialogue: 0,0:41:56.39,0:42:01.83,yin,,0,0,0,,我们需要Photographer Cell作为再利用标识符\N{\fs12}We need to make sure that its photographer cell is our reuse identifier.
Dialogue: 0,0:42:01.83,0:42:03.60,yin,,0,0,0,,这就做好准备了\N{\fs12}Otherwise, we're ready to go.
Dialogue: 0,0:42:03.60,0:42:05.44,yin,,0,0,0,,如果数据库中有东西\N{\fs12}So, if we had stuff in our database,
Dialogue: 0,0:42:05.44,0:42:08.65,yin,,0,0,0,,现在开始运行 这个将能工作\N{\fs12}and we hit run right now, this would work.
Dialogue: 0,0:42:08.65,0:42:10.16,yin,,0,0,0,,我们只需要这些\N{\fs12}That's all we needed to do.
Dialogue: 0,0:42:10.16,0:42:14.52,yin,,0,0,0,,很少量的代码 将TableView和Core Data关联了起来\N{\fs12}An incredibly small amount of code to hook up a table view to Core Data.
Dialogue: 0,0:42:14.52,0:42:16.67,yin,,0,0,0,,不过 数据库中还没有数据\N{\fs12}But, of course, we have no data in our databases.
Dialogue: 0,0:42:16.67,0:42:20.59,yin,,0,0,0,,代码中还没有从Flickr查询加载任何东西\N{\fs12}Nowhere in our code are we querying from Flickr or loading stuff in, and so
Dialogue: 0,0:42:20.59,0:42:24.72,yin,,0,0,0,,我将利用需要这个的机会\N{\fs12}I'm going to use the opportunity of our needing that
Dialogue: 0,0:42:24.72,0:42:29.26,yin,,0,0,0,,为你们首次介绍应用委托\N{\fs12}to introduce you for the first time to your application delegate.
Dialogue: 0,0:42:29.26,0:42:33.01,yin,,0,0,0,,我总喜欢把这些文件移动到支持文件\N{\fs12}So, I've always been moving these files down to supporting files.
Dialogue: 0,0:42:33.01,0:42:34.92,yin,,0,0,0,,不要看它们\N{\fs12}Don't look at them, you know,
Dialogue: 0,0:42:34.92,0:42:36.97,yin,,0,0,0,,我要展示一下这里面有些什么\N{\fs12}and so now I'm going show you a little bit what's in here.
Dialogue: 0,0:42:36.97,0:42:41.15,yin,,0,0,0,,应用委托所监视的是\N{\fs12}So, your application delegate is kind of like,
Dialogue: 0,0:42:41.15,0:42:45.61,yin,,0,0,0,,应用程序中最高层发生的情况\N{\fs12}it is watching what's going on at the highest level of your application.
Dialogue: 0,0:42:45.61,0:42:47.61,yin,,0,0,0,,它会看应用的启动\N{\fs12}It sees your application has launched.
Dialogue: 0,0:42:47.61,0:42:52.39,yin,,0,0,0,,它会看应用退出活动\N{\fs12}Okay. It sees that your application has resigned being the active application.
Dialogue: 0,0:42:52.39,0:42:55.23,yin,,0,0,0,,它会看应用进入后台\N{\fs12}It sees that your application is entering the background.
Dialogue: 0,0:42:55.23,0:42:57.53,yin,,0,0,0,,我们知道在iOS中 一个app\N{\fs12}Okay, we know then iOS, the apps,
Dialogue: 0,0:42:57.53,0:43:00.13,yin,,0,0,0,,在你进入另一个app时并不会退出\N{\fs12}when you go to another app, they don't quit, they just kind
Dialogue: 0,0:43:00.13,0:43:03.06,yin,,0,0,0,,它会进入后台运行 我们可以找到这个\N{\fs12}of move into this background state, right, so we can find that.
Dialogue: 0,0:43:03.06,0:43:05.18,yin,,0,0,0,,你可以知道它什么时候进入前台\N{\fs12}You can find it when you move back into the foreground.
Dialogue: 0,0:43:05.18,0:43:07.03,yin,,0,0,0,,应用是否成为活动应用\N{\fs12}If you become the active application.
Dialogue: 0,0:43:07.03,0:43:10.85,yin,,0,0,0,,是否退出应用 这些都可以知道\N{\fs12}If someone's quitting your application, you find that out as well.
Dialogue: 0,0:43:10.85,0:43:13.57,yin,,0,0,0,,所有这些它都能够弄清\N{\fs12}So, it finds out all these things, and we're going to learn
Dialogue: 0,0:43:13.57,0:43:15.41,yin,,0,0,0,,以后我们还会学到\N{\fs12}about those later in the quarter, so I'm going
Dialogue: 0,0:43:15.41,0:43:18.28,yin,,0,0,0,,现在先把它们都删掉 不过我们要看这个\N{\fs12}to delete all those now, but we are going to look at this one.
Dialogue: 0,0:43:18.28,0:43:20.13,yin,,0,0,0,,这个是didFinishLaunchingWithOptions\N{\fs12}This one is did finish launching with option,
Dialogue: 0,0:43:20.13,0:43:23.76,yin,,0,0,0,,这里它告诉你 你的应用结束了启动\N{\fs12}so here it's tell you your application finished launching.
Dialogue: 0,0:43:23.76,0:43:25.59,yin,,0,0,0,,这时 你就可以\N{\fs12}This is a great time to do things
Dialogue: 0,0:43:25.59,0:43:28.72,yin,,0,0,0,,开始一些Flickr取回了\N{\fs12}like kick off some Flickr fetching or something.
Dialogue: 0,0:43:28.72,0:43:33.55,yin,,0,0,0,,在应用委托中 如果我要在这时进行Flickr取回\N{\fs12}Now, if I'm going to be doing my Flickr fetching here in my application delegate,
Dialogue: 0,0:43:33.55,0:43:35.24,yin,,0,0,0,,我就需要context\N{\fs12}I need the context.
Dialogue: 0,0:43:35.24,0:43:36.95,yin,,0,0,0,,在你们的作业中\N{\fs12}Okay, now in your homework,
Dialogue: 0,0:43:36.95,0:43:40.45,yin,,0,0,0,,你们需要通过创建UIManagedDocument来做到\N{\fs12}you're going to do that by creating a UI managed document.
Dialogue: 0,0:43:40.45,0:43:46.90,yin,,0,0,0,,不过这里 我有一小段代码\N{\fs12}But, here, I have a little piece of code that I got
Dialogue: 0,0:43:46.90,0:43:49.81,yin,,0,0,0,,来自我告诉过你们的另一个模板\N{\fs12}from that other template that I was telling you about
Dialogue: 0,0:43:49.81,0:43:51.78,yin,,0,0,0,,把它复制过来\N{\fs12}that I'm going to bring in here.
Dialogue: 0,0:43:51.78,0:43:54.59,yin,,0,0,0,,像这样 它是一个category\N{\fs12}It looks like this. It's a little category,
Dialogue: 0,0:43:54.59,0:43:58.85,yin,,0,0,0,,它有这个方法 createMainQueueManagedObjectContext\N{\fs12}and it has this method, create main queue managed object context.
Dialogue: 0,0:43:58.85,0:44:00.71,yin,,0,0,0,,这是一个ManagedObjectContext\N{\fs12}So, that's a managed object context
Dialogue: 0,0:44:00.71,0:44:04.93,yin,,0,0,0,,连有一个数据库 这个app的数据库\N{\fs12}that attaches to a database, the database for this app.
Dialogue: 0,0:44:04.93,0:44:09.56,yin,,0,0,0,,这个只有一个 很幸运 而且是在主队列上\N{\fs12}This only has one luckily, and gives me; it's on the main queue,
Dialogue: 0,0:44:09.56,0:44:13.30,yin,,0,0,0,,就像UIDocument一样 因此代码会非常类似\N{\fs12}just like a UI document one is, so this code can be similar.
Dialogue: 0,0:44:13.30,0:44:14.76,yin,,0,0,0,,然后 我还可以保存\N{\fs12}And then also, I can save it. Now,
Dialogue: 0,0:44:14.78,0:44:17.61,yin,,0,0,0,,UIManagedDocument并不需要这个saveContext\N{\fs12}I don't need this save context message for UI managed document,
Dialogue: 0,0:44:17.61,0:44:18.66,yin,,0,0,0,,因为它有自动保存\N{\fs12}because it auto saves.
Dialogue: 0,0:44:18.66,0:44:21.49,yin,,0,0,0,,但这里 如果创建ManagedObjectContext时\N{\fs12}But, here if I create this manage object context not using
Dialogue: 0,0:44:21.49,0:44:23.66,yin,,0,0,0,,不使用Document 那就需要这样做了\N{\fs12}a document, then I have to do that.
Dialogue: 0,0:44:23.66,0:44:26.25,yin,,0,0,0,,我说了 这是另外一种做法\N{\fs12}So, this is, like I said, the other way to do it,
Dialogue: 0,0:44:26.25,0:44:29.71,yin,,0,0,0,,这不需要用到作业中 我只是希望展示给你们\N{\fs12}which you're not going to do for your homework, but I just wanted to show you,
Dialogue: 0,0:44:29.71,0:44:32.03,yin,,0,0,0,,我不打算展示UIManagedDocument\N{\fs12}I didn't really didn't want to show you the UI managed document,
Dialogue: 0,0:44:32.03,0:44:33.79,yin,,0,0,0,,因为我要你们自己去弄清楚\N{\fs12}because I wanted you to figure that out on your own,
Dialogue: 0,0:44:33.79,0:44:35.65,yin,,0,0,0,,因此 我在演示中用这个\N{\fs12}so we're going to manage this one.
Dialogue: 0,0:44:35.65,0:44:37.32,yin,,0,0,0,,好 我添加了这个\N{\fs12}Okay, so I've added this.
Dialogue: 0,0:44:37.32,0:44:41.30,yin,,0,0,0,,这里是PhotomaniaAppDelegate\N{\fs12}This is a, you can see that the photo mania app delegate
Dialogue: 0,0:44:41.30,0:44:42.70,yin,,0,0,0,,category\N{\fs12}category,
Dialogue: 0,0:44:42.70,0:44:48.16,yin,,0,0,0,,它将这两个方法添加到了我的app委托\N{\fs12}so it simply added these two methods to my app delegate.
Dialogue: 0,0:44:49.89,0:44:53.01,yin,,0,0,0,,下面 我将首先创建一些属性\N{\fs12}Now, what I'm going to do here is I am just going to,
Dialogue: 0,0:44:53.01,0:44:56.35,yin,,0,0,0,,下面 我将首先创建一些属性\N{\fs12}first of all, let me create some property.
Dialogue: 0,0:44:56.35,0:44:59.33,yin,,0,0,0,,这是我刚创建的一些属性\N{\fs12}So, this is some stuff that I just created, some properties
Dialogue: 0,0:44:59.33,0:45:00.68,yin,,0,0,0,,这是我刚创建的一些属性\N{\fs12}that I need and stuff like that.
Dialogue: 0,0:45:00.68,0:45:03.35,yin,,0,0,0,,先直接放到这里 使用的时候\N{\fs12}For time, I'm just going to put them in here, but as we use them,
Dialogue: 0,0:45:03.35,0:45:04.92,yin,,0,0,0,,我会提到它们\N{\fs12}I will refer to them.
Dialogue: 0,0:45:04.92,0:45:07.07,yin,,0,0,0,,这里我要用的一个\N{\fs12}But one of them I'm going to use right here
Dialogue: 0,0:45:07.07,0:45:08.90,yin,,0,0,0,,是这个photoDatabaseContext\N{\fs12}is this photo database context.
Dialogue: 0,0:45:08.90,0:45:11.36,yin,,0,0,0,,我要在app委托中记录一个属性\N{\fs12}So, I'm going to keep a property in my app delegate,
Dialogue: 0,0:45:11.36,0:45:14.46,yin,,0,0,0,,也就是我们要进行取回和读取操作的context\N{\fs12}which is the context that we're going to be fetching into
Dialogue: 0,0:45:14.46,0:45:15.81,yin,,0,0,0,,也就是我们要进行取回和读取操作的context\N{\fs12}and that we're going to be reading out of.
Dialogue: 0,0:45:15.81,0:45:17.85,yin,,0,0,0,,我打算在这里设置\N{\fs12}So, I'm going to set that right here,
Dialogue: 0,0:45:17.85,0:45:25.08,yin,,0,0,0,,photoDatabaseContext = self create …\N{\fs12}photo data with context equals self create, oops,
Dialogue: 0,0:45:25.08,0:45:32.23,yin,,0,0,0,,我要导入PhotomaniaAppDelegate+MOC\N{\fs12}got to import that, import photo mania MOC.
Dialogue: 0,0:45:32.23,0:45:36.11,yin,,0,0,0,,这里我导入的是category的头文件 其中有create\N{\fs12}I'm just importing the category header file that has that create
Dialogue: 0,0:45:36.11,0:45:39.39,yin,,0,0,0,,也就是createMainQueueManagedObjectContext\N{\fs12}in that, so create main queue managed object context.
Dialogue: 0,0:45:39.39,0:45:41.75,yin,,0,0,0,,你也需要设置这个\N{\fs12}So, again, you're going to set this as well, but you're going
Dialogue: 0,0:45:41.75,0:45:44.57,yin,,0,0,0,,不过是从UIManagedDocument进行设置\N{\fs12}to set it from your UI managed document.
Dialogue: 0,0:45:44.57,0:45:46.88,yin,,0,0,0,,我有一个context\N{\fs12}So, now, I have a context,
Dialogue: 0,0:45:46.88,0:45:49.98,yin,,0,0,0,,我想开始进行Flickr取回\N{\fs12}and I want to start doing some Flickr Fetches, so I'm going
Dialogue: 0,0:45:49.98,0:45:55.27,yin,,0,0,0,,我要调用另一个方法 start… 叫什么来着\N{\fs12}to call another method here, start, what did I call this,
Dialogue: 0,0:45:55.27,0:45:59.66,yin,,0,0,0,,应该是startFlickrFetch\N{\fs12}start Flickr fetch, I think.
Dialogue: 0,0:45:59.66,0:46:04.00,yin,,0,0,0,,这就会在启动时 立刻开始Flickr取回\N{\fs12}So, that's just going to fire off a Flickr fetch as soon as we launch.
Dialogue: 0,0:46:04.00,0:46:05.39,yin,,0,0,0,,我们刚启动程序\N{\fs12}Okay, we just launched.
Dialogue: 0,0:46:05.39,0:46:07.73,yin,,0,0,0,,这个消息发送给我们\N{\fs12}Get this message gets sent to us when we launch,
Dialogue: 0,0:46:07.73,0:46:09.81,yin,,0,0,0,,然后我将立刻开始Flickr取回\N{\fs12}and I'm just going to fire off a Flickr fetch.
Dialogue: 0,0:46:09.81,0:46:12.31,yin,,0,0,0,,这就是启动时立刻开始取回的一种情况\N{\fs12}So, that's one of the times we're going to fetch is as soon as we launch.
Dialogue: 0,0:46:12.31,0:46:15.36,yin,,0,0,0,,其它情况我们有时也会立刻开始取回\N{\fs12}We're going to fetch some other times, so we're going to fetch as soon as we launch.
Dialogue: 0,0:46:16.84,0:46:20.00,yin,,0,0,0,,我打算把这个放到这里\N{\fs12}So, I'm going to go ahead and put this in here
Dialogue: 0,0:46:20.00,0:46:23.73,yin,,0,0,0,,我们可以看一下 我不打算一行行输入\N{\fs12}so we can look it, instead of my typing it in line by line,
Dialogue: 0,0:46:23.73,0:46:27.57,yin,,0,0,0,,这里有一些东西\N{\fs12}and this is something where it's got some stuff
Dialogue: 0,0:46:27.57,0:46:31.73,yin,,0,0,0,,我在课上没有详细讲过\N{\fs12}that I didn't teach really in detail in lecture,
Dialogue: 0,0:46:31.73,0:46:33.66,yin,,0,0,0,,不过你们应该基本能理解\N{\fs12}but you should mostly be able to understand.
Dialogue: 0,0:46:33.66,0:46:36.89,yin,,0,0,0,,这里做的主要是创建了一个session\N{\fs12}Mostly what this is doing here is it creates a session,
Dialogue: 0,0:46:36.89,0:46:41.11,yin,,0,0,0,,你们知道URLSession 我创建了这个session\N{\fs12}so you know about URL sessions, so I'm creating this session.
Dialogue: 0,0:46:41.11,0:46:43.66,yin,,0,0,0,,这个session同我们之前创建的略有不同\N{\fs12}This session is a little different than the one we created before,
Dialogue: 0,0:46:43.66,0:46:45.79,yin,,0,0,0,,因为它有一个委托\N{\fs12}because look, it has a delegate.
Dialogue: 0,0:46:45.79,0:46:46.60,yin,,0,0,0,,看到了吗\N{\fs12}You see that.
Dialogue: 0,0:46:46.60,0:46:48.71,yin,,0,0,0,,之前我们没有指定委托\N{\fs12}We didn't specify a delegate before.
Dialogue: 0,0:46:48.71,0:46:50.41,yin,,0,0,0,,委托为nil\N{\fs12}Okay, we had delegate nil.
Dialogue: 0,0:46:50.41,0:46:53.24,yin,,0,0,0,,为什么要委托呢\N{\fs12}And, why do we want a delegate, and why are we making it so.
Dialogue: 0,0:46:53.24,0:46:55.95,yin,,0,0,0,,因为我们希望后台开始的这些Flickr取回\N{\fs12}Well, that's because we want these Flickr Fetches
Dialogue: 0,0:46:55.95,0:46:57.52,yin,,0,0,0,,因为我们希望后台开始的这些Flickr取回\N{\fs12}that we're starting off in the background.
Dialogue: 0,0:46:57.52,0:47:00.51,yin,,0,0,0,,如果它们在应用不再运行时结束\N{\fs12}If they finish while our application is no longer running,
Dialogue: 0,0:47:00.53,0:47:03.44,yin,,0,0,0,,我们希望它启动应用并告知我们\N{\fs12}we want it to launch our application and tell us.
Dialogue: 0,0:47:03.44,0:47:05.01,yin,,0,0,0,,或者 如果我们在后台\N{\fs12}Or, if we're in the background,
Dialogue: 0,0:47:05.01,0:47:07.11,yin,,0,0,0,,我们不是用户正在使用的应用\N{\fs12}we're not the application the user is using right now,
Dialogue: 0,0:47:07.11,0:47:10.02,yin,,0,0,0,,而这个URL Flickr返回了一些信息\N{\fs12}and this URL Flickr comes back with some information,
Dialogue: 0,0:47:10.02,0:47:14.59,yin,,0,0,0,,我们希望它唤醒一些 并让我们处理它\N{\fs12}we want it to you know, make us, wake us up a little bit and let us process it.
Dialogue: 0,0:47:14.59,0:47:16.95,yin,,0,0,0,,通过这个委托\N{\fs12}Okay, so by doing this delegate,
Dialogue: 0,0:47:16.95,0:47:21.63,yin,,0,0,0,,同某些后台session一起 我们可以做到这些\N{\fs12}along with a background session, we can do that.
Dialogue: 0,0:47:21.63,0:47:24.08,yin,,0,0,0,,因此 我打算讲讲这个委托实现\N{\fs12}So, I'm going to show you this delegate implementation.
Dialogue: 0,0:47:24.08,0:47:26.17,yin,,0,0,0,,我创建了这个session\N{\fs12}So, I create this session, and then I'm doing here
Dialogue: 0,0:47:26.17,0:47:30.26,yin,,0,0,0,,然后startFlickrFetch创建了一个任务 然后重新开始\N{\fs12}on start Flickr Fetch is creating a task and resuming it.
Dialogue: 0,0:47:30.26,0:47:32.69,yin,,0,0,0,,这同我们之前做的完全一样\N{\fs12}So, this is the exact same thing that we did before, right?
Dialogue: 0,0:47:32.69,0:47:33.84,yin,,0,0,0,,我们有一个URLSession\N{\fs12}We had a URL session.
Dialogue: 0,0:47:33.84,0:47:35.41,yin,,0,0,0,,我们创建一个下载任务\N{\fs12}We created a download task.
Dialogue: 0,0:47:35.41,0:47:38.65,yin,,0,0,0,,唯一的差别在于 上次我们用到了competionHandler\N{\fs12}The only difference is last time we did with completion handler,
Dialogue: 0,0:47:38.65,0:47:41.91,yin,,0,0,0,,我们还有一段代码发生在下载回来时\N{\fs12}and we had a little block that would happen when the download came back.
Dialogue: 0,0:47:41.91,0:47:44.68,yin,,0,0,0,,而现在 委托将会在URL加载返回时被调用\N{\fs12}Now instead, our delegate's going to get called
Dialogue: 0,0:47:44.68,0:47:48.00,yin,,0,0,0,,而现在 委托将会在URL加载返回时被调用\N{\fs12}when the URL gets loaded and comes back.
Dialogue: 0,0:47:48.00,0:47:49.55,yin,,0,0,0,,大家都理解了\N{\fs12}Does everyone understand the difference
Dialogue: 0,0:47:49.55,0:47:51.88,yin,,0,0,0,,之前和现在的差别了吗\N{\fs12}between what we did before and what we're doing here?
Dialogue: 0,0:47:51.88,0:47:53.29,yin,,0,0,0,,没有competionHandler\N{\fs12}Okay, no completion handler.
Dialogue: 0,0:47:53.29,0:47:54.78,yin,,0,0,0,,这里我们用的是委托\N{\fs12}Here, we're going to use a delegate.
Dialogue: 0,0:47:54.78,0:47:57.22,yin,,0,0,0,,我们看看这个委托是怎样的\N{\fs12}So, let's look at what that delegate looks like.
Dialogue: 0,0:47:57.22,0:47:58.90,yin,,0,0,0,,它是这样的\N{\fs12}It looks like this.
Dialogue: 0,0:47:58.90,0:48:00.82,yin,,0,0,0,,其中有三个方法\N{\fs12}Okay, there are three methods in it.
Dialogue: 0,0:48:00.82,0:48:03.04,yin,,0,0,0,,这三个方法\N{\fs12}These three methods right here.
Dialogue: 0,0:48:03.04,0:48:07.44,yin,,0,0,0,,一是文件刚完成下载时 在这里\N{\fs12}One is your file just finished downloading, and here it is
Dialogue: 0,0:48:07.44,0:48:09.08,yin,,0,0,0,,这里说是本地文件\N{\fs12}as a local file, so this looks a lot
Dialogue: 0,0:48:09.08,0:48:10.83,yin,,0,0,0,,这和competionHandler很像\N{\fs12}like that completion handler,
Dialogue: 0,0:48:10.84,0:48:13.83,yin,,0,0,0,,然后这里有一些我们不打算用\N{\fs12}and then, here's a couple that we're not going to use, like giving you,
Dialogue: 0,0:48:13.83,0:48:17.54,yin,,0,0,0,,这个给了你一些进度 已经读了多少字节\N{\fs12}this gives you some progress, how many bytes its read so far,
Dialogue: 0,0:48:17.54,0:48:19.22,yin,,0,0,0,,是否分块来读\N{\fs12}if it does it in chunks,
Dialogue: 0,0:48:19.23,0:48:22.98,yin,,0,0,0,,然后 下载session也可以被打断 然后继续\N{\fs12}and this also, download sessions can get interrupted and then resumed.
Dialogue: 0,0:48:22.98,0:48:26.39,yin,,0,0,0,,这个我们显然不打算细讲 无论如何\N{\fs12}We're definitely not going to talk about that, but anyway.
Dialogue: 0,0:48:26.39,0:48:29.08,yin,,0,0,0,,可以看到这里我有一个错误 怎么做呢\N{\fs12}Now, you can see I have an error here, okay, so what do we do.
Dialogue: 0,0:48:29.08,0:48:32.21,yin,,0,0,0,,这就是我们在competionHandler中做的\N{\fs12}So, this is what we would have done in our completion handler.
Dialogue: 0,0:48:32.21,0:48:35.18,yin,,0,0,0,,而这里我们要做的\N{\fs12}And, all we're going to do here is we are going
Dialogue: 0,0:48:35.18,0:48:36.99,yin,,0,0,0,,是获得context\N{\fs12}to get the context,
Dialogue: 0,0:48:36.99,0:48:39.63,yin,,0,0,0,,我们在程序已经完成启动方法里面\N{\fs12}our little photo database context that we set up there
Dialogue: 0,0:48:39.63,0:48:41.32,yin,,0,0,0,,设置的照片数据库context\N{\fs12}in application did finish launching.
Dialogue: 0,0:48:41.32,0:48:44.80,yin,,0,0,0,,我们打算从Flickr下载这些照片\N{\fs12}We are going to download those photos from Flickr,
Dialogue: 0,0:48:44.80,0:48:48.84,yin,,0,0,0,,Flickr照片是这个 你们很熟悉这个 对吧\N{\fs12}so Flickr photos is this, which you're very used to, right?
Dialogue: 0,0:48:48.84,0:48:50.81,yin,,0,0,0,,dataWithContentsOfURL\N{\fs12}Data with contents of URL,
Dialogue: 0,0:48:50.81,0:48:52.90,yin,,0,0,0,,JSON 去JSON化\N{\fs12}JSON, de-JSONize it,
Dialogue: 0,0:48:52.90,0:48:55.76,yin,,0,0,0,,从中抓取结果\N{\fs12}grab the results out of that.
Dialogue: 0,0:48:55.76,0:48:57.40,yin,,0,0,0,,我们打算做这些\N{\fs12}Okay. So, we're going to do that little thing.
Dialogue: 0,0:48:57.40,0:49:01.80,yin,,0,0,0,,这需要发生 这是一个本地URL\N{\fs12}This needs to be happening, you know, this is a local URL,
Dialogue: 0,0:49:01.80,0:49:04.39,yin,,0,0,0,,它可以发生在主线程 没问题\N{\fs12}so it can be happening on the main thread, no problem.
Dialogue: 0,0:49:04.39,0:49:06.74,yin,,0,0,0,,下面 我们要在这个context中做点什么\N{\fs12}Now, we're going to do something in this context,
Dialogue: 0,0:49:06.74,0:49:08.68,yin,,0,0,0,,注意 我用了performBlock\N{\fs12}and notice I'm doing perform block.
Dialogue: 0,0:49:08.68,0:49:11.74,yin,,0,0,0,,我在照片创建那个里面没有使用performBlock\N{\fs12}I didn't do perform block over in the photo creating one,
Dialogue: 0,0:49:11.74,0:49:13.60,yin,,0,0,0,,因为这是隐含的 我在创建一张照片\N{\fs12}because it's kind of implicit. I'm creating a photo.
Dialogue: 0,0:49:13.60,0:49:15.84,yin,,0,0,0,,很显然 我在那个context中那样做了\N{\fs12}Of course, I'm doing it on that context,
Dialogue: 0,0:49:15.84,0:49:18.50,yin,,0,0,0,,无论谁调用了那个 都希望在performBlock中做\N{\fs12}so whoever calls that would want to do that in perform block,
Dialogue: 0,0:49:18.50,0:49:20.35,yin,,0,0,0,,这就是我这里所做的\N{\fs12}and that's, in fact, what I'm doing here.
Dialogue: 0,0:49:20.35,0:49:25.12,yin,,0,0,0,,我调用了我们刚写的方法 loadPhotosWithFlickrData\N{\fs12}I'm calling that method we just wrote, load photos with Flickr data, okay.
Dialogue: 0,0:49:25.12,0:49:27.48,yin,,0,0,0,,我们还没有写这个方法 看看它\N{\fs12}We didn't actually write that method, so let's look at that.
Dialogue: 0,0:49:27.48,0:49:28.84,yin,,0,0,0,,它在这里\N{\fs12}So, that's over here.
Dialogue: 0,0:49:28.84,0:49:32.16,yin,,0,0,0,,我们有photoWithFlickrInfo 而这里是加载照片\N{\fs12}Okay, we have photo with Flickr info, and here's loading the photos.
Dialogue: 0,0:49:32.16,0:49:33.29,yin,,0,0,0,,如何加载照片呢\N{\fs12}So, how do we load the photos?
Dialogue: 0,0:49:33.29,0:49:38.85,yin,,0,0,0,,我只需要说 for (NSDictionary *photo in photos)\N{\fs12}I'm just going to say, for NS dictionary photo in photos,
Dialogue: 0,0:49:38.85,0:49:41.56,yin,,0,0,0,,一个个地给我每一张Flickr照片\N{\fs12}okay, so give me each Flickr photo one by one,
Dialogue: 0,0:49:41.56,0:49:44.78,yin,,0,0,0,,然后self photoWithFlickrInfo:\N{\fs12}and then self photo with Flickr info,
Dialogue: 0,0:49:44.78,0:49:48.63,yin,,0,0,0,,photo inManagedObjectContext:context\N{\fs12}photo in manage context, context.
Dialogue: 0,0:49:48.63,0:49:52.22,yin,,0,0,0,,这其实是一种很低效的方式\N{\fs12}Now, this turns out to be really an inefficient way
Dialogue: 0,0:49:52.22,0:49:54.98,yin,,0,0,0,,来加载这一百张Flickr照片\N{\fs12}of loading those hundred Flickr photos,
Dialogue: 0,0:49:54.98,0:50:02.68,yin,,0,0,0,,因为每次调用这个时 我都在进行取回操作\N{\fs12}because every time I call this, I am doing this Fetch.
Dialogue: 0,0:50:02.68,0:50:04.21,yin,,0,0,0,,如果我想加载一百张照片\N{\fs12}So, if I want to load a hundred photos,
Dialogue: 0,0:50:04.21,0:50:07.34,yin,,0,0,0,,我需要一百次取回看是否唯一\N{\fs12}I got to do a hundred fetches to see if those are unique.
Dialogue: 0,0:50:07.34,0:50:09.11,yin,,0,0,0,,这个显然有更好的做法\N{\fs12}Okay, there are much better ways to do this,
Dialogue: 0,0:50:09.11,0:50:11.02,yin,,0,0,0,,一个额外加分的条件就是\N{\fs12}and one of your extra credit items is for you to try
Dialogue: 0,0:50:11.02,0:50:13.05,yin,,0,0,0,,如果你能找到更好的做法\N{\fs12}and figure out a better way to do this.
Dialogue: 0,0:50:13.05,0:50:17.98,yin,,0,0,0,,一种方式是看所有一百张照片的唯一ID\N{\fs12}Okay, and one way is to look at the unique Id's of all hundred photos,
Dialogue: 0,0:50:17.98,0:50:21.17,yin,,0,0,0,,一次把它们都取回 看哪些在数据库中\N{\fs12}fetch them all at once, and see which ones are in the database,
Dialogue: 0,0:50:21.17,0:50:22.68,yin,,0,0,0,,因为你可以取回一个它们的列表\N{\fs12}because you can get a list of them back, right?
Dialogue: 0,0:50:22.68,0:50:25.87,yin,,0,0,0,,在其中的那些 然后你可以一个一个地\N{\fs12}The ones that are in there, and then one by one, you can go
Dialogue: 0,0:50:25.87,0:50:27.84,yin,,0,0,0,,创建没有的那些\N{\fs12}and create the ones that aren't there.
Dialogue: 0,0:50:27.84,0:50:29.81,yin,,0,0,0,,这是一种做法\N{\fs12}Okay, so that's one way to do it.
Dialogue: 0,0:50:29.81,0:50:33.37,yin,,0,0,0,,不过demo中我就用这个简单的方式\N{\fs12}Okay, but this cheap and simple way is good for a demo, okay.
Dialogue: 0,0:50:33.37,0:50:35.34,yin,,0,0,0,,回到app委托\N{\fs12}So, back to our app delegate
Dialogue: 0,0:50:35.34,0:50:37.38,yin,,0,0,0,,现在我们有这个loadPhotosWithFlickrArray\N{\fs12}and now we have this load photos with Flickr array.
Dialogue: 0,0:50:37.38,0:50:40.55,yin,,0,0,0,,让我们导入这个头文件\N{\fs12}Let's go ahead and import that header file, which I do, oh,
Dialogue: 0,0:50:40.55,0:50:42.33,yin,,0,0,0,,或许我该起个别的名字\N{\fs12}maybe I called it something different there.
Dialogue: 0,0:50:42.33,0:50:43.78,yin,,0,0,0,,问题在哪\N{\fs12}What's the problem?
Dialogue: 0,0:50:43.78,0:50:48.77,yin,,0,0,0,,看看 或许我该起个别的名字\N{\fs12}Let's see, yeah, I probably called it something different.
Dialogue: 0,0:50:48.77,0:50:52.23,yin,,0,0,0,,起相同的名字\N{\fs12}Call it the same thing.
Dialogue: 0,0:50:52.23,0:50:55.18,yin,,0,0,0,,这是我的委托 这里\N{\fs12}Here's my delegate, here it is.
Dialogue: 0,0:50:55.18,0:50:57.03,yin,,0,0,0,,称它为[声音不清]Flickr\N{\fs12}There we go, I called it [inaudible] Flickr, right?
Dialogue: 0,0:50:57.03,0:50:58.80,yin,,0,0,0,,这将加载所有这些照片\N{\fs12}So, that's going to load all these photos.
Dialogue: 0,0:50:58.80,0:51:01.04,yin,,0,0,0,,注意 这里我保存了我的context\N{\fs12}Notice, I'm saving my context here.
Dialogue: 0,0:51:01.06,0:51:03.74,yin,,0,0,0,,这里是一个方法 ManagedObjectContext被保存\N{\fs12}Okay this is a method, manage object context was saved.
Dialogue: 0,0:51:03.74,0:51:05.75,yin,,0,0,0,,这是一个错误 我忽略它\N{\fs12}This is an error, which I'm ignoring.
Dialogue: 0,0:51:05.75,0:51:07.32,yin,,0,0,0,,实际不需要做这个\N{\fs12}Don't really need to do this
Dialogue: 0,0:51:07.32,0:51:09.62,yin,,0,0,0,,用于UIManagedDocument 不过也无伤大雅\N{\fs12}for your UI managed document, but it doesn't hurt.
Dialogue: 0,0:51:09.62,0:51:10.74,yin,,0,0,0,,想这样也行\N{\fs12}You can do it if you want.
Dialogue: 0,0:51:10.74,0:51:12.32,yin,,0,0,0,,这不会破坏任何东西\N{\fs12}This would not break anything
Dialogue: 0,0:51:12.32,0:51:14.64,yin,,0,0,0,,如果你有一个context来自UIManagedDocument\N{\fs12}if you had a context from UI managed document,
Dialogue: 0,0:51:14.65,0:51:15.38,yin,,0,0,0,,但我的没有\N{\fs12}but mine's not,
Dialogue: 0,0:51:15.38,0:51:19.38,yin,,0,0,0,,因此我这里明文要求在加载一些照片后进行保存\N{\fs12}so that's why I'm explicitly saving here after I load some photos in.
Dialogue: 0,0:51:21.69,0:51:23.35,yin,,0,0,0,,好 这很酷\N{\fs12}Okay, so that's cool.
Dialogue: 0,0:51:23.35,0:51:26.70,yin,,0,0,0,,再来看看我们的表格\N{\fs12}So, let's go look at our tables.
Dialogue: 0,0:51:26.70,0:51:30.26,yin,,0,0,0,,我们表格的公共API是什么\N{\fs12}What is our tables, public API,
Dialogue: 0,0:51:30.27,0:51:31.93,yin,,0,0,0,,ManagedObjectContext\N{\fs12}managed object context?
Dialogue: 0,0:51:31.93,0:51:33.17,yin,,0,0,0,,我们从没设置过\N{\fs12}We never set that.
Dialogue: 0,0:51:33.17,0:51:36.89,yin,,0,0,0,,我们需要设置这个表格的ManagedObjectContext\N{\fs12}Okay. We need to set this tables managed object context.
Dialogue: 0,0:51:36.89,0:51:39.99,yin,,0,0,0,,我们什么时候做 怎么做呢\N{\fs12}Okay. When and how are we going to do that?
Dialogue: 0,0:51:39.99,0:51:41.50,yin,,0,0,0,,我们有这个应用委托\N{\fs12}We have this application delegate.
Dialogue: 0,0:51:41.50,0:51:43.39,yin,,0,0,0,,这个全局的东西\N{\fs12}It's kind of this global thing,
Dialogue: 0,0:51:43.39,0:51:45.88,yin,,0,0,0,,它在管理这个全局数据库\N{\fs12}and it is managing this global database, but it needs
Dialogue: 0,0:51:45.88,0:51:50.52,yin,,0,0,0,,不过这个东西需要同其他需要它的人进行通信\N{\fs12}to be able to communicate this thing out to anyone who needs to use it,
Dialogue: 0,0:51:50.54,0:51:52.75,yin,,0,0,0,,做法如下\N{\fs12}and the way we're going to that is,
Dialogue: 0,0:51:52.75,0:51:56.74,yin,,0,0,0,,任何设置照片数据库context的时候\N{\fs12}whenever we set this photo database context, we are going
Dialogue: 0,0:51:56.74,0:52:00.29,yin,,0,0,0,,我们都将发布一个通知 广播站那些东西\N{\fs12}to post a notification, the radio station thing.
Dialogue: 0,0:52:00.29,0:52:03.04,yin,,0,0,0,,这是你们第一次看到如何发布一个通知\N{\fs12}So, this is the first time you're going to see how to post an notification,
Dialogue: 0,0:52:03.04,0:52:05.39,yin,,0,0,0,,而不只是观测监听\N{\fs12}not just listen with that observer,
Dialogue: 0,0:52:05.39,0:52:07.87,yin,,0,0,0,,这里你要发布 我们来做这个\N{\fs12}you're going to actually post it right here, so let's do that,
Dialogue: 0,0:52:07.87,0:52:11.29,yin,,0,0,0,,发布通知 你几乎100%的时候\N{\fs12}and when you post a notification you almost always 100%
Dialogue: 0,0:52:11.29,0:52:15.44,yin,,0,0,0,,希望创建一个头文件 这里我来创建头文件\N{\fs12}of the time, want to create a header file, so I'm going to create a header file.
Dialogue: 0,0:52:15.44,0:52:18.75,yin,,0,0,0,,到头文件 C和C++头文件\N{\fs12}Just go here to header file, C, C++ header file,
Dialogue: 0,0:52:18.75,0:52:22.39,yin,,0,0,0,,头文件将包含通知名\N{\fs12}and that header file is going to contain the name of the notification,
Dialogue: 0,0:52:22.39,0:52:26.41,yin,,0,0,0,,还有用户信息中那些东西的名称 用于通知\N{\fs12}and also the name of anything that's in the user info, for the notification.
Dialogue: 0,0:52:26.41,0:52:30.72,yin,,0,0,0,,保证这是在正确的地方\N{\fs12}So, let's go ahead and make sure it's in the right place.
Dialogue: 0,0:52:30.72,0:52:35.66,yin,,0,0,0,,我将把这称作PhotoDatabaseAvailability\N{\fs12}It is. I'm going to call this photo database availability,
Dialogue: 0,0:52:35.66,0:52:37.81,yin,,0,0,0,,这个通知就是关于这个的\N{\fs12}because that's what this notification is about.
Dialogue: 0,0:52:37.81,0:52:38.82,yin,,0,0,0,,广播站\N{\fs12}This radio station talks
Dialogue: 0,0:52:38.82,0:52:41.21,yin,,0,0,0,,讨论了照片数据库是否可用\N{\fs12}about whether the photo database is available, so I'm going
Dialogue: 0,0:52:41.21,0:52:44.40,yin,,0,0,0,,于是我创建了这个头文件 在它中间\N{\fs12}to create this header file, and inside this header file,
Dialogue: 0,0:52:44.40,0:52:46.10,yin,,0,0,0,,我要给出两个#定义\N{\fs12}I'm just going to put 2 pound defines.
Dialogue: 0,0:52:46.10,0:52:51.99,yin,,0,0,0,,一个是PhotoDatabaseAvailabilityNotification\N{\fs12}One is photo database availability notification.
Dialogue: 0,0:52:51.99,0:52:53.89,yin,,0,0,0,,这是通知名\N{\fs12}That's the name of the notification.
Dialogue: 0,0:52:53.89,0:52:55.92,yin,,0,0,0,,我把它叫作这个\N{\fs12}I'm going to call it this.
Dialogue: 0,0:52:55.92,0:52:58.07,yin,,0,0,0,,什么都行 不过我把它叫作这个\N{\fs12}I can call it anything I want, but I'm going to call it that,
Dialogue: 0,0:52:58.07,0:53:01.52,yin,,0,0,0,,然后 通知发出之后\N{\fs12}and then also when the notification goes out,
Dialogue: 0,0:53:01.52,0:53:05.64,yin,,0,0,0,,我们会把context包含在广播站广播中\N{\fs12}I'm going to include the context in the radio station broadcast,
Dialogue: 0,0:53:05.64,0:53:08.38,yin,,0,0,0,,获得通知的人也可以同时获得这个\N{\fs12}so the person can just get it when they get the notification.
Dialogue: 0,0:53:08.38,0:53:14.45,yin,,0,0,0,,这个用PhotoDatabaseAvailabilityContext\N{\fs12}I'll do that with photo database availability context.
Dialogue: 0,0:53:14.45,0:53:16.84,yin,,0,0,0,,名字中使用的是Context\N{\fs12}And, I'll use the same, well, just say context.
Dialogue: 0,0:53:16.84,0:53:18.37,yin,,0,0,0,,叫什么其实都行\N{\fs12}It can be anything you want it to.
Dialogue: 0,0:53:18.37,0:53:20.70,yin,,0,0,0,,这是通知名\N{\fs12}Okay, so this is going to be the name of the notification.
Dialogue: 0,0:53:20.70,0:53:23.63,yin,,0,0,0,,这是同通知一同的信息字典中的键\N{\fs12}This is going to be the key into the dictionary of information
Dialogue: 0,0:53:23.63,0:53:25.49,yin,,0,0,0,,这是同通知一同的信息字典中的键\N{\fs12}that comes along with the notification, alright?
Dialogue: 0,0:53:26.63,0:53:29.56,yin,,0,0,0,,下面 发送这个通知\N{\fs12}So, now, let's send that notification, and I'm going
Dialogue: 0,0:53:29.56,0:53:35.03,yin,,0,0,0,,每次设置这个照片数据库context时 我都会这样做\N{\fs12}to do that every time we set this photo database context.
Dialogue: 0,0:53:35.03,0:53:35.86,yin,,0,0,0,,有问题\N{\fs12}Question?
Dialogue: 0,0:53:42.65,0:53:44.01,yin,,0,0,0,,哦 或许吧\N{\fs12}Oh, yeah, probably.
Dialogue: 0,0:53:44.01,0:53:45.11,yin,,0,0,0,,提得很好\N{\fs12}Good point.
Dialogue: 0,0:53:45.11,0:53:46.37,yin,,0,0,0,,对 这里没有等于\N{\fs12}Yeah, no equals there.
Dialogue: 0,0:53:48.08,0:53:49.05,yin,,0,0,0,,谢谢 很好\N{\fs12}Thanks, very good.
Dialogue: 0,0:53:49.05,0:53:50.52,yin,,0,0,0,,这里只不过是#定义\N{\fs12}This is just a pound sign defined.
Dialogue: 0,0:53:50.52,0:53:53.34,yin,,0,0,0,,这是常数 我们不应该这样做\N{\fs12}If it was a constant, we wouldn't do that.
Dialogue: 0,0:53:53.87,0:54:03.06,yin,,0,0,0,,好 让我们来设置这个照片数据库context\N{\fs12}Okay, alright, so let's set this photo database context,
Dialogue: 0,0:54:03.06,0:54:05.89,yin,,0,0,0,,在set… 这个应该有\N{\fs12}so in the set; I think I might have a thing for that actually.
Dialogue: 0,0:54:05.89,0:54:06.82,yin,,0,0,0,,setPhotoData…\N{\fs12}Set photo data.
Dialogue: 0,0:54:06.82,0:54:07.62,yin,,0,0,0,,确实有\N{\fs12}Yeah, I do.
Dialogue: 0,0:54:07.62,0:54:10.61,yin,,0,0,0,,设置这个照片数据库context时\N{\fs12}So, here when we set this photo database context,
Dialogue: 0,0:54:10.61,0:54:14.68,yin,,0,0,0,,我们会公布这个通知\N{\fs12}we are going to post this notification.
Dialogue: 0,0:54:14.68,0:54:18.70,yin,,0,0,0,,做法是使用NSNotificationCenter defaultCenter\N{\fs12}And we do that using the NS Notification Center default center,
Dialogue: 0,0:54:18.70,0:54:20.10,yin,,0,0,0,,postNotificationName\N{\fs12}post notification name.
Dialogue: 0,0:54:20.10,0:54:21.95,yin,,0,0,0,,我们指定名称 也就是这个\N{\fs12}We just specify the name, which is this.
Dialogue: 0,0:54:21.95,0:54:24.82,yin,,0,0,0,,要想让这个正常工作 我们需要导入\N{\fs12}For this to work, we need to import
Dialogue: 0,0:54:24.82,0:54:29.99,yin,,0,0,0,,PhotoDatabaseAvailability头文件\N{\fs12}that photo availability, photo database availability header.
Dialogue: 0,0:54:29.99,0:54:31.88,yin,,0,0,0,,我们要发布这个通知\N{\fs12}So, we're just going to post this notification,
Dialogue: 0,0:54:31.88,0:54:34.40,yin,,0,0,0,,我们同时还会给出这个用户信息\N{\fs12}and we're going to give this user info along with it,
Dialogue: 0,0:54:34.40,0:54:38.54,yin,,0,0,0,,用户信息只是一个字典 它有一个键\N{\fs12}and user info, it's just a dictionary that has one key,
Dialogue: 0,0:54:38.54,0:54:40.03,yin,,0,0,0,,也就是那个context\N{\fs12}which is that context,
Dialogue: 0,0:54:40.03,0:54:44.29,yin,,0,0,0,,而键的值是context\N{\fs12}and the value of that key is the context.
Dialogue: 0,0:54:45.94,0:54:49.64,yin,,0,0,0,,这就是广播站模型中发布的方式\N{\fs12}So, this is how you post in the radio station model.
Dialogue: 0,0:54:49.64,0:54:52.79,yin,,0,0,0,,有问题吗\N{\fs12}Any questions about that?
Dialogue: 0,0:54:52.79,0:54:56.41,yin,,0,0,0,,下面我要讲监听到广播站\N{\fs12}And now, I'm going to show you listening to a radio station
Dialogue: 0,0:54:56.41,0:55:00.36,yin,,0,0,0,,而不用创建另一个方法\N{\fs12}without having to create another method and all this stuff,
Dialogue: 0,0:55:00.36,0:55:04.10,yin,,0,0,0,,只是很简单的监听 谁需要监听这个\N{\fs12}basically really straightforward listening, and who needs to listen to this?
Dialogue: 0,0:55:04.10,0:55:09.54,yin,,0,0,0,,这个需要 这个拍照者的东西 它需要监听它\N{\fs12}Well, this guy does, this photographer guy, he needs to listen to it.
Dialogue: 0,0:55:09.54,0:55:12.93,yin,,0,0,0,,这个唤醒之后\N{\fs12}So, basically, as soon as this guy awakes,
Dialogue: 0,0:55:12.93,0:55:16.25,yin,,0,0,0,,我或许该用initWithStyle\N{\fs12}and I might do this init with style,
Dialogue: 0,0:55:16.25,0:55:18.25,yin,,0,0,0,,或是别的什么指定初始化器\N{\fs12}or whatever the designated initializer is
Dialogue: 0,0:55:18.25,0:55:20.38,yin,,0,0,0,,用于TableView 我要在awakeFromNib总这样做\N{\fs12}for TableView, but I'm just going to it in awakeFromNib
Dialogue: 0,0:55:20.38,0:55:23.31,yin,,0,0,0,,因为我们知道这个TableView出自于故事板\N{\fs12}for here, because we know this TableView is coming out of the story board.
Dialogue: 0,0:55:23.31,0:55:26.61,yin,,0,0,0,,我要说 通知中心\N{\fs12}I'm just going to say, notification center.
Dialogue: 0,0:55:26.61,0:55:30.82,yin,,0,0,0,,首先导入Availability那个\N{\fs12}First let's import that availability thing.
Dialogue: 0,0:55:30.82,0:55:36.55,yin,,0,0,0,,我要做的是NSNotificationCenter defaultCenter\N{\fs12}So, I'm going to do NS Notification Center, default center.
Dialogue: 0,0:55:36.55,0:55:37.10,yin,,0,0,0,,看这个\N{\fs12}Watch this.
Dialogue: 0,0:55:37.10,0:55:38.67,yin,,0,0,0,,addObserver\N{\fs12}Add observer.
Dialogue: 0,0:55:38.67,0:55:41.14,yin,,0,0,0,,通常我们会使用选择器这些\N{\fs12}Normally, we do it with a selector and all this stuff.
Dialogue: 0,0:55:41.14,0:55:42.98,yin,,0,0,0,,我打算使用基于block的这个\N{\fs12}I'm going to do a block-based one.
Dialogue: 0,0:55:42.98,0:55:45.79,yin,,0,0,0,,之前你们不知道block 所以我没展示 也就是这个\N{\fs12}I couldn't show you this before, because you didn't know block, but it's this one.
Dialogue: 0,0:55:45.79,0:55:48.28,yin,,0,0,0,,addObserverForName 我们给出名字\N{\fs12}Add observer for name, and we give the name,
Dialogue: 0,0:55:48.28,0:55:52.47,yin,,0,0,0,,也就是PhotoDatabaseAvailabilityNotification\N{\fs12}which is photo database availability notification.
Dialogue: 0,0:55:52.47,0:55:57.13,yin,,0,0,0,,对象是谁能发送 我将其设为任何人\N{\fs12}The object is who can send it, and I'll let anyone send this to me.
Dialogue: 0,0:55:57.13,0:55:59.65,yin,,0,0,0,,这是app委托 不过也可以是任何人\N{\fs12}It's going to be the app delegate, but it could be anybody.
Dialogue: 0,0:55:59.65,0:56:03.08,yin,,0,0,0,,队列 我打算在我现在正处在的队列上做\N{\fs12}The queue, I'm going to do it on the queue that I'm on now.
Dialogue: 0,0:56:03.08,0:56:04.15,yin,,0,0,0,,这就是nil的意思\N{\fs12}That's what nil means,
Dialogue: 0,0:56:04.15,0:56:06.56,yin,,0,0,0,,不过我也可以说 NSOperation主队列\N{\fs12}but I could say NS Operation main queue,
Dialogue: 0,0:56:06.56,0:56:09.22,yin,,0,0,0,,或是其它某个队列 不过这里我将其设为nil\N{\fs12}or some other queue even, but I'm going to say nil,
Dialogue: 0,0:56:09.22,0:56:12.49,yin,,0,0,0,,也就是说执行这个时我现在所处的队列\N{\fs12}which means whatever queue I'm on right now when this is being executed,
Dialogue: 0,0:56:12.50,0:56:14.10,yin,,0,0,0,,使用block\N{\fs12}using block,
Dialogue: 0,0:56:14.11,0:56:17.02,yin,,0,0,0,,我双击这里添加一个代码块\N{\fs12}so I'm going to double click here to put a block.
Dialogue: 0,0:56:17.02,0:56:21.00,yin,,0,0,0,,这是末尾 其中有些什么呢\N{\fs12}Okay, and then that's the end of that, and what's going to be in this block?
Dialogue: 0,0:56:21.00,0:56:24.02,yin,,0,0,0,,只有一行代码\N{\fs12}This is one line of code.
Dialogue: 0,0:56:24.02,0:56:30.58,yin,,0,0,0,,self.managedObjectContext = 这个通知\N{\fs12}Self.manage object context equals this notification,
Dialogue: 0,0:56:30.58,0:56:33.67,yin,,0,0,0,,它的用户信息\N{\fs12}its user info,
Dialogue: 0,0:56:33.67,0:56:36.48,yin,,0,0,0,,PhotoDatabaseAvailabilityContext\N{\fs12}photo database context.
Dialogue: 0,0:56:40.48,0:56:42.50,yin,,0,0,0,,抱歉 这一行有点长\N{\fs12}Okay. Sorry for the very, very long line there.
Dialogue: 0,0:56:42.50,0:56:44.11,yin,,0,0,0,,应该能够容纳进来 确实能\N{\fs12}I think it will fit, yeah it will.
Dialogue: 0,0:56:44.97,0:56:46.77,yin,,0,0,0,,我获得了这个block\N{\fs12}So, I'm getting this block.
Dialogue: 0,0:56:46.77,0:56:49.90,yin,,0,0,0,,它在广播站广播时会被执行\N{\fs12}It's executed whenever this radio station broadcasts,
Dialogue: 0,0:56:49.90,0:56:54.08,yin,,0,0,0,,因为加入了context的用户信息 现在我就有了context\N{\fs12}and because I put this user info of the context, now I have the context,
Dialogue: 0,0:56:54.08,0:56:56.42,yin,,0,0,0,,我只需设置我的ManagedObjectContext\N{\fs12}and I just set my own managed object context,
Dialogue: 0,0:56:56.42,0:56:59.61,yin,,0,0,0,,它就会加载这个表格\N{\fs12}and voila, it's going to load this table.
Dialogue: 0,0:56:59.61,0:57:01.60,yin,,0,0,0,,这方面有问题吗\N{\fs12}Questions about that?
Dialogue: 0,0:57:01.60,0:57:04.76,yin,,0,0,0,,这是在发布和接收上的通知\N{\fs12}So, that's notifying both on posting and receiving.
Dialogue: 0,0:57:04.76,0:57:06.69,yin,,0,0,0,,现在它就应该能够工作了\N{\fs12}Alright, so now hopefully it will work.
Dialogue: 0,0:57:06.71,0:57:09.70,yin,,0,0,0,,我们来看看 这就是了\N{\fs12}Let's go take a look at this, and there it is.
Dialogue: 0,0:57:09.70,0:57:12.40,yin,,0,0,0,,它运行得非常快\N{\fs12}Okay, now it went really fast there,
Dialogue: 0,0:57:12.40,0:57:15.16,yin,,0,0,0,,因为它上次进行过加载\N{\fs12}because it actually did the load last time,
Dialogue: 0,0:57:15.16,0:57:17.28,yin,,0,0,0,,只是我们没有看到 数据库已经加载\N{\fs12}but we just didn't see it, so the database was loaded.
Dialogue: 0,0:57:17.28,0:57:19.62,yin,,0,0,0,,我要展示加载是怎样的\N{\fs12}So, I'm going to show it what it looked like to load up.
Dialogue: 0,0:57:19.62,0:57:21.67,yin,,0,0,0,,我如何把这个清掉呢\N{\fs12}So, how do I clean this out?
Dialogue: 0,0:57:21.67,0:57:23.70,yin,,0,0,0,,如何把数据库清掉\N{\fs12}Okay, how do I clean my database out?
Dialogue: 0,0:57:23.70,0:57:26.58,yin,,0,0,0,,知道这个很重要 看好了\N{\fs12}You're really going to want to know this. So, really watch this.
Dialogue: 0,0:57:26.58,0:57:28.67,yin,,0,0,0,,如果你想清掉数据库\N{\fs12}If you want to get rid of your database,
Dialogue: 0,0:57:28.67,0:57:30.83,yin,,0,0,0,,尤其是想改变其schema的时候\N{\fs12}especially if you want to change its schema.
Dialogue: 0,0:57:30.83,0:57:33.42,yin,,0,0,0,,因为如果你要改变其schema 你会重启\N{\fs12}Because if you change its schema, and then you relaunch,
Dialogue: 0,0:57:33.42,0:57:35.60,yin,,0,0,0,,它会说不兼容数据库类型\N{\fs12}it's going to say incompatible database type.
Dialogue: 0,0:57:35.60,0:57:38.77,yin,,0,0,0,,如果你想清掉它 你只需按Home键\N{\fs12}So, if you want to get rid of it, just press the home key.
Dialogue: 0,0:57:38.77,0:57:42.47,yin,,0,0,0,,我还建议先退出Xcode\N{\fs12}I also recommend quitting in X code first.
Dialogue: 0,0:57:45.85,0:57:50.18,yin,,0,0,0,,然后按Home键 按住图标\N{\fs12}Then press the home key, hold down, press to hold,
Dialogue: 0,0:57:50.18,0:57:52.40,yin,,0,0,0,,你也可以在设备上这样做\N{\fs12}you can do this on your device too, and then,
Dialogue: 0,0:57:52.40,0:57:53.79,yin,,0,0,0,,图标会抖动\N{\fs12}you get these jigglies,
Dialogue: 0,0:57:53.79,0:57:56.97,yin,,0,0,0,,然后点X删除应用\N{\fs12}and then press the X to delete that application.
Dialogue: 0,0:57:56.97,0:57:58.90,yin,,0,0,0,,这会删除整个应用\N{\fs12}That will delete the entire application,
Dialogue: 0,0:57:58.90,0:58:06.08,yin,,0,0,0,,包括数据库 之后重新在Xcode中启动\N{\fs12}including the database, and now, when I launch again in X code,
Dialogue: 0,0:58:06.08,0:58:08.33,yin,,0,0,0,,它最开始会是空白的\N{\fs12}it is going to start up blank,
Dialogue: 0,0:58:08.33,0:58:10.63,yin,,0,0,0,,在后台进行Flickr取回\N{\fs12}doing the Flickr Fetch in the background.
Dialogue: 0,0:58:10.63,0:58:13.75,yin,,0,0,0,,ManagedObjectContext填满数据后\N{\fs12}When that manage object context is filled up with data,
Dialogue: 0,0:58:13.75,0:58:17.68,yin,,0,0,0,,它就会神奇地自动出现在TableView中\N{\fs12}it magically automatically appears in the TableView.
Dialogue: 0,0:58:17.68,0:58:21.97,yin,,0,0,0,,这就是FetchedResultsController正在监视context\N{\fs12}That's because that Fetch Results Controller is watching the context.
Dialogue: 0,0:58:21.97,0:58:23.07,yin,,0,0,0,,有问题\N{\fs12}Questions.
Dialogue: 0,0:58:28.82,0:58:30.87,yin,,0,0,0,,好 我们回头看看这个\N{\fs12}Yeah, let's go back and look at that.
Dialogue: 0,0:58:30.87,0:58:33.26,yin,,0,0,0,,问题是 我在哪设置的用户信息\N{\fs12}The question is where did I set this user info,
Dialogue: 0,0:58:33.26,0:58:36.32,yin,,0,0,0,,这一小段用户信息 我在哪设的\N{\fs12}this little user info right here, where did I set that,
Dialogue: 0,0:58:36.32,0:58:41.18,yin,,0,0,0,,这是我发布通知的时候 这里\N{\fs12}and that was when I posted the notification here
Dialogue: 0,0:58:41.18,0:58:42.52,yin,,0,0,0,,在app委托中\N{\fs12}in my app delegate,
Dialogue: 0,0:58:42.52,0:58:46.89,yin,,0,0,0,,这是我在设置context时 在我启动时\N{\fs12}which I did when I set the context, which I did when I launched.
Dialogue: 0,0:58:46.89,0:58:48.30,yin,,0,0,0,,我启动\N{\fs12}Right, so I launch.
Dialogue: 0,0:58:48.30,0:58:49.86,yin,,0,0,0,,这是启动\N{\fs12}Here's launching.
Dialogue: 0,0:58:49.88,0:58:52.18,yin,,0,0,0,,启动时 我创建了context\N{\fs12}When I launch, I create the context,
Dialogue: 0,0:58:52.18,0:58:54.26,yin,,0,0,0,,你会和UIManagedDocument一起创建\N{\fs12}you're going to create it with UI managed document.
Dialogue: 0,0:58:54.26,0:58:55.86,yin,,0,0,0,,我在这里设置了它\N{\fs12}I set it right here.
Dialogue: 0,0:58:55.86,0:58:58.11,yin,,0,0,0,,这是那个的setter\N{\fs12}This is the setter for that.
Dialogue: 0,0:58:58.11,0:58:59.28,yin,,0,0,0,,我设置了它\N{\fs12}Okay, I set it.
Dialogue: 0,0:58:59.28,0:59:02.74,yin,,0,0,0,,然后我把它发布 对其他所有人可用\N{\fs12}Then I post it to available to everybody else.
Dialogue: 0,0:59:04.65,0:59:05.80,yin,,0,0,0,,有问题\N{\fs12}Question.
Dialogue: 0,0:59:11.46,0:59:14.21,yin,,0,0,0,,问题是我如何确保\N{\fs12}Yeah, so the question is, how can I make sure
Dialogue: 0,0:59:14.21,0:59:19.38,yin,,0,0,0,,视图控制器存在 而且在即时监听这个\N{\fs12}that the view controller exists, and is listening in time
Dialogue: 0,0:59:19.38,0:59:22.36,yin,,0,0,0,,毕竟应用委托发布会很早\N{\fs12}to hear this, because the application delegate is posting
Dialogue: 0,0:59:22.36,0:59:24.00,yin,,0,0,0,,就在启动之后\N{\fs12}this pretty early, right after launch.
Dialogue: 0,0:59:24.00,0:59:26.08,yin,,0,0,0,,它发送了这个通知\N{\fs12}It's sending out this notification,
Dialogue: 0,0:59:26.08,0:59:30.91,yin,,0,0,0,,答案是 这就是我在awakeFromNib中做这个的原因\N{\fs12}and the answer to that is that's why I do this in awake from nib,
Dialogue: 0,0:59:30.91,0:59:33.83,yin,,0,0,0,,处在视图控制器生命周期的很早时期\N{\fs12}really early in the view controller's life cycle, right?
Dialogue: 0,0:59:33.83,0:59:36.88,yin,,0,0,0,,当它刚创建时 这样它就有最大的获得机会\N{\fs12}When it's first created, so it has the maximum chance of getting it,
Dialogue: 0,0:59:36.88,0:59:39.12,yin,,0,0,0,,不过也有可能\N{\fs12}but it's possible.
Dialogue: 0,0:59:39.12,0:59:40.70,yin,,0,0,0,,不大可能 不过有可能\N{\fs12}It's unlikely, but it's possible
Dialogue: 0,0:59:40.70,0:59:43.54,yin,,0,0,0,,后面创建的视图控制器可能会适时需要它\N{\fs12}that some view controller you might create later in time might need it,
Dialogue: 0,0:59:43.55,0:59:45.64,yin,,0,0,0,,这时 你可能需要另外一种机制\N{\fs12}and in that case, you might need a different mechanism, or you might need
Dialogue: 0,0:59:45.64,0:59:48.71,yin,,0,0,0,,你可能需要再发布 或是往下传递\N{\fs12}to repost it or you might need to pass it along.
Dialogue: 0,0:59:48.71,0:59:51.82,yin,,0,0,0,,很多时候 我们都不想用这个机制\N{\fs12}Okay, a lot of times, we don't want to use this mechanism
Dialogue: 0,0:59:51.82,0:59:54.28,yin,,0,0,0,,将context给到视图控制器\N{\fs12}to give the context to view controllers,
Dialogue: 0,0:59:54.28,0:59:56.96,yin,,0,0,0,,原因正是视图控制器还不存在\N{\fs12}exactly because the view controller doesn't exist yet,
Dialogue: 0,0:59:56.96,1:00:00.24,yin,,0,0,0,,在这个availability发生之前 它甚至都没有\N{\fs12}until when this availability happens, it's not even there.
Dialogue: 0,1:00:00.24,1:00:04.22,yin,,0,0,0,,还有其它方式能传递ManagedObjectContext\N{\fs12}So, there are other ways to pass you managed object context around, and you always want
Dialogue: 0,1:00:04.22,1:00:07.18,yin,,0,0,0,,那些总需要用到这样的做法之前\N{\fs12}to use those before a way like this.
Dialogue: 0,1:00:07.18,1:00:09.75,yin,,0,0,0,,我讲这个对作业是个提示\N{\fs12}Okay, and I mentioned that in the hints, so the homework is,
Dialogue: 0,1:00:09.75,1:00:12.63,yin,,0,0,0,,传递ManagedObjectContext\N{\fs12}pass the manage object context
Dialogue: 0,1:00:12.63,1:00:17.15,yin,,0,0,0,,给视图控制器 受控于FetchedResultsController\N{\fs12}to a view controller that's NS Fetch results controller controlled
Dialogue: 0,1:00:17.15,1:00:19.27,yin,,0,0,0,,以一种有意义的方式\N{\fs12}in a sensible way in a way that makes sense.
Dialogue: 0,1:00:19.27,1:00:24.06,yin,,0,0,0,,如果你segue到它 传递给它 通过准备它\N{\fs12}If you're segueing to it, pass it to it by preparing it, right?
Dialogue: 0,1:00:24.06,1:00:27.55,yin,,0,0,0,,你不会希望指望这里的这些东西\N{\fs12}You wouldn't want to rely on something like this.
Dialogue: 0,1:00:27.55,1:00:31.67,yin,,0,0,0,,好 再来讨论更多地加载数据库\N{\fs12}Okay. Alright, now let's talk about loading our database some more.
Dialogue: 0,1:00:31.67,1:00:35.45,yin,,0,0,0,,现在 我们只在启动时加载了数据库\N{\fs12}Okay, right now, we only loaded our database on launch.
Dialogue: 0,1:00:35.45,1:00:37.92,yin,,0,0,0,,这是didFinishLaunchingWithOptions\N{\fs12}Here's the application that did finish loading with options.
Dialogue: 0,1:00:37.92,1:00:41.82,yin,,0,0,0,,我们加载了数据库 然后开始Flickr取回 这就完了\N{\fs12}We load our database right here and start Flickr fetch that's it.
Dialogue: 0,1:00:41.82,1:00:44.01,yin,,0,0,0,,这还不是很好\N{\fs12}Well, that's not very good,
Dialogue: 0,1:00:44.01,1:00:46.42,yin,,0,0,0,,这意味着我们永远就这一批数据\N{\fs12}that just means we only get one batch of data ever,
Dialogue: 0,1:00:46.42,1:00:49.29,yin,,0,0,0,,我们需要一直退出重启来获得新数据\N{\fs12}when we launch our app, we have to quit, or have to relaunch it all the time.
Dialogue: 0,1:00:49.29,1:00:52.33,yin,,0,0,0,,我们希望能够在后台加载这些Flickr信息\N{\fs12}So, what about kind of loading this Flickr information
Dialogue: 0,1:00:52.33,1:00:55.16,yin,,0,0,0,,我们希望能够在后台加载这些Flickr信息\N{\fs12}in the background, and we can do that,
Dialogue: 0,1:00:55.16,1:00:58.47,yin,,0,0,0,,不过有两种不同的后台条件需要考虑\N{\fs12}but there's really two different background conditions to consider.
Dialogue: 0,1:00:58.47,1:01:02.03,yin,,0,0,0,,一个 我们的app处在后台\N{\fs12}One is background, and our app is in the background.
Dialogue: 0,1:01:02.03,1:01:04.96,yin,,0,0,0,,换言之 用户当前并没有用我们的app\N{\fs12}In other words, the user is not currently using our app, okay.
Dialogue: 0,1:01:04.96,1:01:07.60,yin,,0,0,0,,他们用过 但现在程序在后台\N{\fs12}They were using it, but now it's in the background.
Dialogue: 0,1:01:07.60,1:01:09.34,yin,,0,0,0,,这时如何取回呢\N{\fs12}Okay, how do I fetch when that happens.
Dialogue: 0,1:01:09.34,1:01:12.44,yin,,0,0,0,,这时的取回受系统限制\N{\fs12}Well, fetching there is kind of limited by the system.
Dialogue: 0,1:01:12.44,1:01:15.75,yin,,0,0,0,,这时系统不会让你疯狂地取回数据\N{\fs12}The system is not going let you just go hog wild fetching things
Dialogue: 0,1:01:15.75,1:01:17.88,yin,,0,0,0,,毕竟你不是用户使用的app\N{\fs12}when you're not the app that the user is using,
Dialogue: 0,1:01:17.88,1:01:20.51,yin,,0,0,0,,不过有时 它会让你这样做\N{\fs12}but it will let you do it sometimes.
Dialogue: 0,1:01:20.51,1:01:24.02,yin,,0,0,0,,系统有时可以将你从背景唤醒\N{\fs12}And, the way you can get the system to kind of wake you up
Dialogue: 0,1:01:24.02,1:01:26.61,yin,,0,0,0,,并让你取回一些信息\N{\fs12}and let you fetch sometimes in the background,
Dialogue: 0,1:01:26.61,1:01:28.95,yin,,0,0,0,,或许一天几次\N{\fs12}every once in awhile, I don't know, a few times a day,
Dialogue: 0,1:01:28.95,1:01:32.51,yin,,0,0,0,,具体的没人知道 不过有时 它会使用后台取回\N{\fs12}who knows what, but sometimes, it's using background fetching,
Dialogue: 0,1:01:32.51,1:01:36.86,yin,,0,0,0,,这是一个多任务处理API 这是iOS7的新特性\N{\fs12}which is a multitasking API, new for iOS 7.
Dialogue: 0,1:01:36.87,1:01:40.06,yin,,0,0,0,,我将把这当作一个例子\N{\fs12}So, I'm just going to show you this as an example of what some
Dialogue: 0,1:01:40.06,1:01:43.16,yin,,0,0,0,,告诉你们多任务处理API是怎样的\N{\fs12}of the multitasking APIs look like.
Dialogue: 0,1:01:43.16,1:01:45.75,yin,,0,0,0,,打开这个的做法如下 编辑你的项目\N{\fs12}Now, the way you turn this is on, is you edit your project.
Dialogue: 0,1:01:45.75,1:01:48.25,yin,,0,0,0,,这是我的项目 我点了上面这里\N{\fs12}You see this is my project I clicked on up here,
Dialogue: 0,1:01:48.25,1:01:51.52,yin,,0,0,0,,然后到这个选项卡 Capabilities(能力)\N{\fs12}and now you're going to go to this tab right here, capabilities.
Dialogue: 0,1:01:51.52,1:01:54.63,yin,,0,0,0,,来到capabilities 这里有很多\N{\fs12}So, I go to capabilities, and there's a lot of capabilities.
Dialogue: 0,1:01:54.63,1:01:58.39,yin,,0,0,0,,从这里就能感受到 我们对iOS的接触有多粗浅\N{\fs12}This really kind of gives you a feeling of how we're only skimming the surface of iOS,
Dialogue: 0,1:01:58.39,1:02:00.58,yin,,0,0,0,,看看这里你可以做多少事情\N{\fs12}when you look at all these things you can do.
Dialogue: 0,1:02:00.58,1:02:02.21,yin,,0,0,0,,无论如何 我们要的在这里\N{\fs12}But, anyway, we're going to do this one right here,
Dialogue: 0,1:02:02.21,1:02:05.17,yin,,0,0,0,,后台模式 我要把这个打开\N{\fs12}background modes, and I'm going to turn this on.
Dialogue: 0,1:02:05.17,1:02:07.76,yin,,0,0,0,,打开时 这里有各种后台模式\N{\fs12}When I turn it on, there's all kinds of background modes,
Dialogue: 0,1:02:07.76,1:02:10.51,yin,,0,0,0,,这些在后台都可以做到\N{\fs12}things that I can be allowed to do in the background.
Dialogue: 0,1:02:10.51,1:02:13.81,yin,,0,0,0,,也就是说 我的app当前没有被用户使用\N{\fs12}That is to say when my app is not currently being used by the user,
Dialogue: 0,1:02:13.83,1:02:15.39,yin,,0,0,0,,我要的是下面这个\N{\fs12}and I'm going to pick this one down here,
Dialogue: 0,1:02:15.39,1:02:16.81,yin,,0,0,0,,后台取回\N{\fs12}background fetch,
Dialogue: 0,1:02:16.81,1:02:19.91,yin,,0,0,0,,如果我打开这个后台取回\N{\fs12}and if I turn this on, okay, background fetch,
Dialogue: 0,1:02:19.91,1:02:24.14,yin,,0,0,0,,那么 我就会偶尔在系统的允许下\N{\fs12}then I will occasionally by the system at its discretion,
Dialogue: 0,1:02:24.14,1:02:29.31,yin,,0,0,0,,发送一条消息给我的app委托 甚至启动去做这个\N{\fs12}send a message to my app delegate, perhaps even launching me to do it.
Dialogue: 0,1:02:29.31,1:02:32.23,yin,,0,0,0,,发送的消息是什么呢\N{\fs12}And what is that message that gets sent.
Dialogue: 0,1:02:32.23,1:02:33.90,yin,,0,0,0,,我展示一下\N{\fs12}I'll show it to you right here.
Dialogue: 0,1:02:33.91,1:02:36.74,yin,,0,0,0,,它叫… 我们将键入它\N{\fs12}It is called, we're going to type it in.
Dialogue: 0,1:02:36.74,1:02:39.93,yin,,0,0,0,,application… 你可以看看能从应用中接收的所有东西\N{\fs12}Application, so you can look at all the things you can receive from your application.
Dialogue: 0,1:02:39.93,1:02:41.91,yin,,0,0,0,,这里有好多东西\N{\fs12}There is just a billion of them here.
Dialogue: 0,1:02:41.91,1:02:43.29,yin,,0,0,0,,看到了吗\N{\fs12}See them.
Dialogue: 0,1:02:43.29,1:02:45.70,yin,,0,0,0,,我们会谈到有些 不过肯定不是全部\N{\fs12}So, we'll cover some of those, but not all of them,
Dialogue: 0,1:02:45.70,1:02:47.95,yin,,0,0,0,,总之 这里有很多\N{\fs12}but there's quite a few of them in here.
Dialogue: 0,1:02:47.95,1:02:51.71,yin,,0,0,0,,这里我们要的是这个\N{\fs12}But, the one you get when you do this is this one right here,
Dialogue: 0,1:02:51.71,1:02:55.19,yin,,0,0,0,,performFetchWithCompletionHandler\N{\fs12}perform fetch with completion handler, okay,
Dialogue: 0,1:02:55.20,1:02:58.94,yin,,0,0,0,,这个被发给你 它会说 好\N{\fs12}so this gets sent to you, and it's basically saying, okay,
Dialogue: 0,1:02:58.94,1:03:01.32,yin,,0,0,0,,我给你一个在后台做事的机会\N{\fs12}I'm giving you an opportunity to go do something in the background,
Dialogue: 0,1:03:01.34,1:03:02.92,yin,,0,0,0,,取回或是别的什么\N{\fs12}a fetch or whatever you want to do.
Dialogue: 0,1:03:02.92,1:03:06.15,yin,,0,0,0,,通常是取回 不过这里想做什么都可以\N{\fs12}Usually it's a fetch, but you can kind of do whatever you want here,
Dialogue: 0,1:03:06.15,1:03:10.23,yin,,0,0,0,,你在做这个时的唯一责任是\N{\fs12}and the only responsibility you have in doing this is
Dialogue: 0,1:03:10.23,1:03:12.88,yin,,0,0,0,,完成时调用这个completionHandler\N{\fs12}to call this completion handler when you're done.
Dialogue: 0,1:03:12.88,1:03:14.69,yin,,0,0,0,,你只需要做这个就行了\N{\fs12}That's the only thing you absolutely have to do.
Dialogue: 0,1:03:14.69,1:03:16.70,yin,,0,0,0,,如果你不及时调用这个\N{\fs12}If you don't call that in a timely manner,
Dialogue: 0,1:03:16.70,1:03:19.91,yin,,0,0,0,,系统会对你产生厌烦 它会停止取回\N{\fs12}the system will grow tired of you, and it will stop fetching.
Dialogue: 0,1:03:19.91,1:03:22.06,yin,,0,0,0,,会停止发送这条消息给你\N{\fs12}It will stop sending you this message.
Dialogue: 0,1:03:22.06,1:03:25.25,yin,,0,0,0,,我们对这个的反应越及时 系统就越有可能\N{\fs12}So, more timely we respond to this, the more likely it's going
Dialogue: 0,1:03:25.25,1:03:27.54,yin,,0,0,0,,许我们在后台取回\N{\fs12}to let you fetch in the background.
Dialogue: 0,1:03:27.54,1:03:29.71,yin,,0,0,0,,这里我们怎么做呢\N{\fs12}Okay, so what are we going to do here?
Dialogue: 0,1:03:29.71,1:03:36.00,yin,,0,0,0,,我们这里只需要开始一个Flickr取回\N{\fs12}Well, it turns out, all we're going to do in here is start a Flickr fetch,
Dialogue: 0,1:03:36.01,1:03:40.42,yin,,0,0,0,,然后我们立刻调用这个CompletionHandler\N{\fs12}and then we're immediately going to call this completion handler.
Dialogue: 0,1:03:40.42,1:03:41.90,yin,,0,0,0,,这还没完\N{\fs12}We're not done.
Dialogue: 0,1:03:41.90,1:03:43.56,yin,,0,0,0,,这个取回我们才开始\N{\fs12}This fetch, we just started it.
Dialogue: 0,1:03:43.56,1:03:46.24,yin,,0,0,0,,它需要一会才能完成 但是\N{\fs12}It's going to take awhile to come back later, but
Dialogue: 0,1:03:46.24,1:03:48.94,yin,,0,0,0,,只要这个后台取回的东西在继续就行了\N{\fs12}we're done, as far as this background fetch thing is continued.
Dialogue: 0,1:03:48.94,1:03:52.86,yin,,0,0,0,,获得结果这些会在别的时候发生\N{\fs12}Okay, getting the result and doing all that, that's going to happen at some other time,
Dialogue: 0,1:03:52.86,1:03:55.28,yin,,0,0,0,,但这里我们完成了\N{\fs12}but here, we're done, and we have to,
Dialogue: 0,1:03:55.28,1:03:58.08,yin,,0,0,0,,这个CompletionHandler的参数\N{\fs12}the argument to this completion handler
Dialogue: 0,1:03:58.08,1:04:00.68,yin,,0,0,0,,是一个UIBackgroundFetchResult\N{\fs12}is a UI background fetch result,
Dialogue: 0,1:04:00.68,1:04:05.23,yin,,0,0,0,,也就是 无论这里做了什么 改变你的UI\N{\fs12}which is whether whatever you did in here changed your UI.
Dialogue: 0,1:04:05.23,1:04:09.11,yin,,0,0,0,,因为如果它这样做了 我们就需要更新任务切换器\N{\fs12}Because if it did, we need to update the little task switcher.
Dialogue: 0,1:04:09.11,1:04:11.76,yin,,0,0,0,,iOS7中任务切换器是什么知道吗\N{\fs12}Okay, does everyone know what the task switcher is in iOS 7?
Dialogue: 0,1:04:11.76,1:04:14.81,yin,,0,0,0,,它是这样的 这就是任务切换器\N{\fs12}It looks like this, okay, here's the task switcher.
Dialogue: 0,1:04:14.81,1:04:18.77,yin,,0,0,0,,它让你能观看各种app 看app有没有做任何事\N{\fs12}It lets you go through and look at various apps, if my apps are doing anything here.
Dialogue: 0,1:04:18.77,1:04:19.99,yin,,0,0,0,,让我们启动一个app\N{\fs12}Let's launch an app.
Dialogue: 0,1:04:19.99,1:04:21.76,yin,,0,0,0,,启动Safari\N{\fs12}Let's launch safari here.
Dialogue: 0,1:04:21.76,1:04:24.51,yin,,0,0,0,,现在进入任务切换器 这是Safari\N{\fs12}Okay, so now I go into task switcher, and here's Safari.
Dialogue: 0,1:04:24.51,1:04:27.95,yin,,0,0,0,,它给我展示了Safari中显示的内容\N{\fs12}See how it's showing me what's actually in Safari?
Dialogue: 0,1:04:27.95,1:04:30.85,yin,,0,0,0,,它展示的并不是现在Safari中的内容\N{\fs12}It's not really showing me what's in Safari right now.
Dialogue: 0,1:04:30.85,1:04:35.75,yin,,0,0,0,,而是上次我离开Safari时显示的内容\N{\fs12}It's kind of showing me Safari the last time I left Safari.
Dialogue: 0,1:04:35.75,1:04:37.83,yin,,0,0,0,,或者 如果我有这种后台取回\N{\fs12}Or, if I get this background fetch
Dialogue: 0,1:04:37.83,1:04:40.31,yin,,0,0,0,,和这个完成处理器\N{\fs12}and this completion handler,
Dialogue: 0,1:04:40.31,1:04:44.61,yin,,0,0,0,,我说UIBackgroundFetchNewData\N{\fs12}I say UI background fetch, new data,
Dialogue: 0,1:04:44.62,1:04:46.89,yin,,0,0,0,,这时 它就会为我重新绘制这个\N{\fs12}then it would redraw that thing for me.
Dialogue: 0,1:04:46.89,1:04:49.26,yin,,0,0,0,,它会给我一个重新绘制的机会\N{\fs12}It would give me a chance to redraw it.
Dialogue: 0,1:04:49.26,1:04:51.29,yin,,0,0,0,,但我没有任何新数据\N{\fs12}But, I don't actually have any new data.
Dialogue: 0,1:04:51.29,1:04:55.17,yin,,0,0,0,,这里我没有数据 因为我还没有从这里获得数据\N{\fs12}I have no data here, because I haven't gotten the data from this yet.
Dialogue: 0,1:04:55.17,1:05:00.63,yin,,0,0,0,,这个Flickr取回还没有返回 因此它什么都不会做\N{\fs12}This Flickr fetch has not come back yet, so it's not going to do anything.
Dialogue: 0,1:05:00.63,1:05:02.28,yin,,0,0,0,,这很棒\N{\fs12}So, this is great.
Dialogue: 0,1:05:02.28,1:05:05.62,yin,,0,0,0,,这让我偶尔能够进行后台取回\N{\fs12}This lets me occasionally fire off a background fetch,
Dialogue: 0,1:05:05.62,1:05:09.97,yin,,0,0,0,,但当数据返回时 我该怎么做呢\N{\fs12}but when the data comes back in, then what do I do.
Dialogue: 0,1:05:09.97,1:05:11.93,yin,,0,0,0,,如果我在后台\N{\fs12}Well, if I'm in the background,
Dialogue: 0,1:05:11.93,1:05:17.54,yin,,0,0,0,,这些URL东西都不会被调用\N{\fs12}none of these URL things are going to get called.
Dialogue: 0,1:05:17.54,1:05:21.60,yin,,0,0,0,,因为我在后台\N{\fs12}Because I'm back-grounded.
Dialogue: 0,1:05:21.60,1:05:25.78,yin,,0,0,0,,这些不会被调用并不严格成立\N{\fs12}Now, it's not strictly true that these won't get called,
Dialogue: 0,1:05:25.78,1:05:29.93,yin,,0,0,0,,因为如果URL在我在后台时返回\N{\fs12}because what will happen is if the URL returns while I'm
Dialogue: 0,1:05:29.93,1:05:32.09,yin,,0,0,0,,我最开始是在后台中\N{\fs12}in the background, so I started it in the background,
Dialogue: 0,1:05:32.09,1:05:35.40,yin,,0,0,0,,如果它返回 我会得到另一个application的东西\N{\fs12}if it returns, I'll get another application thing called
Dialogue: 0,1:05:35.40,1:05:40.54,yin,,0,0,0,,叫application handleEventsForBackgroundURLSession\N{\fs12}application handle events for background URL session.
Dialogue: 0,1:05:40.54,1:05:44.30,yin,,0,0,0,,它也有一个完成处理器 和之前不同\N{\fs12}And, it also has a completion handler, a little different one.
Dialogue: 0,1:05:44.30,1:05:47.64,yin,,0,0,0,,事情在后台中发生时 这个就会被调用\N{\fs12}Okay, so this is called whenever things happen in the background.
Dialogue: 0,1:05:47.64,1:05:49.48,yin,,0,0,0,,这个有一点很有趣\N{\fs12}Now, what's interesting about this one is,
Dialogue: 0,1:05:49.48,1:05:52.06,yin,,0,0,0,,这个里面我也不需要做任何事\N{\fs12}I don't actually need to do anything in this one either.
Dialogue: 0,1:05:52.06,1:05:54.39,yin,,0,0,0,,因为如果我实现这个方法\N{\fs12}Because if I implement this method,
Dialogue: 0,1:05:54.40,1:05:58.37,yin,,0,0,0,,那么下面这里的委托方法 就会自动被调用\N{\fs12}then these delegate methods down here will automatically get called,
Dialogue: 0,1:05:58.37,1:06:04.39,yin,,0,0,0,,它们已经知道如何从Flickr解包数据 并放入我的数据库\N{\fs12}and they already know how to unpackage the data from Flickr and put it in my database.
Dialogue: 0,1:06:04.39,1:06:07.52,yin,,0,0,0,,它们已经知道怎么做 不过我还有这个责任\N{\fs12}They already know how to do all that, but I still do have this responsibility
Dialogue: 0,1:06:07.52,1:06:09.83,yin,,0,0,0,,对于这个的完成处理器\N{\fs12}for the completion handler on this one too.
Dialogue: 0,1:06:11.71,1:06:15.62,yin,,0,0,0,,这个完成处理器的调用需要等到\N{\fs12}Now, this completion handler, we really do want to wait to call
Dialogue: 0,1:06:15.62,1:06:19.39,yin,,0,0,0,,我们已经处理了这个返回自Flickr的URL\N{\fs12}until we've actually handled this URL coming back from Flickr.
Dialogue: 0,1:06:19.39,1:06:22.18,yin,,0,0,0,,这个在处理返回自Flickr的URL\N{\fs12}Okay, this is handling a URL coming back from Flickr.
Dialogue: 0,1:06:22.18,1:06:24.72,yin,,0,0,0,,现在我们要等待\N{\fs12}So, now we're going to wait. So, I'm going to have to hold onto it.
Dialogue: 0,1:06:24.72,1:06:28.10,yin,,0,0,0,,我这里有一个实例变量\N{\fs12}So, I'm going to. I have an instance variable here,
Dialogue: 0,1:06:28.10,1:06:31.13,yin,,0,0,0,,我要保持住这个完成处理器\N{\fs12}where I'm going to hold onto this completion handler,
Dialogue: 0,1:06:31.13,1:06:33.77,yin,,0,0,0,,这里就是那个实例变量\N{\fs12}and here's the instance variable right here.
Dialogue: 0,1:06:33.77,1:06:35.88,yin,,0,0,0,,它是void\N{\fs12}Okay. It's a void.
Dialogue: 0,1:06:35.88,1:06:39.10,yin,,0,0,0,,没有参数 只是属性\N{\fs12}It takes no arguments, just properties.
Dialogue: 0,1:06:39.10,1:06:42.35,yin,,0,0,0,,顺便说下 所有的block 都是copy属性\N{\fs12}All blocks by the way, want to be copy properties.
Dialogue: 0,1:06:42.35,1:06:46.10,yin,,0,0,0,,在保持处理时 block需要被复制到堆\N{\fs12}Blocks want to be copied into the heap when you keep a handle to them.
Dialogue: 0,1:06:46.10,1:06:47.70,yin,,0,0,0,,这需要大家知道\N{\fs12}Something to know.
Dialogue: 0,1:06:47.70,1:06:52.58,yin,,0,0,0,,无论如何 我要保持这个东西\N{\fs12}So, anyway, all I need to do is keep this thing, and then I need
Dialogue: 0,1:06:52.58,1:06:55.17,yin,,0,0,0,,然后我要在完成时调用这个\N{\fs12}to call this when I'm done,
Dialogue: 0,1:06:55.17,1:06:58.48,yin,,0,0,0,,下面有个方法是做这个的\N{\fs12}so I have a method down here that I use to do that with.
Dialogue: 0,1:06:58.48,1:07:02.31,yin,,0,0,0,,叫作flickrDownloadTasksMightBeComplete\N{\fs12}It's called Flickr download tasks might be complete,
Dialogue: 0,1:07:02.31,1:07:05.05,yin,,0,0,0,,因为我可能有多个下载任务发生\N{\fs12}because I might have multiple download tasks happening,
Dialogue: 0,1:07:05.05,1:07:07.94,yin,,0,0,0,,于是这里我获得所有Flickr下载session所做的任务\N{\fs12}and so what I do here is, I get all the tasks
Dialogue: 0,1:07:07.94,1:07:10.20,yin,,0,0,0,,于是这里我获得所有Flickr下载session所做的任务\N{\fs12}that my Flickr download session is doing,
Dialogue: 0,1:07:10.20,1:07:12.84,yin,,0,0,0,,这就是这个方法的作用 它也有一个block\N{\fs12}that's what this method does, and it has a little block
Dialogue: 0,1:07:12.84,1:07:14.88,yin,,0,0,0,,这个会被调用 因为它无法立刻执行\N{\fs12}that gets called, because it can't do that immediately.
Dialogue: 0,1:07:14.88,1:07:17.57,yin,,0,0,0,,有时 它需要一些时间才能弄清\N{\fs12}Sometimes it takes a little time to figure that out,
Dialogue: 0,1:07:17.57,1:07:20.63,yin,,0,0,0,,如果没有下载任务剩余\N{\fs12}and then if there are no download tasks left, right?
Dialogue: 0,1:07:20.63,1:07:22.79,yin,,0,0,0,,![dowloadTasks count]\N{\fs12}Not download task count,
Dialogue: 0,1:07:22.79,1:07:25.48,yin,,0,0,0,,那么我就会调用这个完成处理器\N{\fs12}then I'm going to call this completion handler.
Dialogue: 0,1:07:25.48,1:07:30.06,yin,,0,0,0,,这个Flickr下载后台完成处理器 说我完成了\N{\fs12}This Flickr download background completion handler, and say that I'm done.
Dialogue: 0,1:07:30.06,1:07:32.34,yin,,0,0,0,,这时 我就完成了下载\N{\fs12}Okay, so now I've finished downloading it,
Dialogue: 0,1:07:32.34,1:07:35.84,yin,,0,0,0,,我重画了我的UI 我还调用了完成处理器\N{\fs12}I've redrawn my UI, and I'm calling the completion handler,
Dialogue: 0,1:07:35.84,1:07:40.73,yin,,0,0,0,,这个完成处理器没有UI无数据的东西\N{\fs12}and this completion handler doesn't have the little UI no data thing,
Dialogue: 0,1:07:40.73,1:07:44.60,yin,,0,0,0,,因为它总假设你会更新你的UI\N{\fs12}because it always assumes that you're going to update your UI.
Dialogue: 0,1:07:44.60,1:07:45.63,yin,,0,0,0,,总是假设\N{\fs12}So, it's always assuming.
Dialogue: 0,1:07:45.63,1:07:48.92,yin,,0,0,0,,它在你那样做时会总是重绘\N{\fs12}It's always going to redraw when you do that.
Dialogue: 0,1:07:48.92,1:07:51.75,yin,,0,0,0,,好 要看这是怎么样的\N{\fs12}Okay. So, let's see what this, okay, to see what this is going
Dialogue: 0,1:07:51.75,1:07:53.40,yin,,0,0,0,,有一个很酷的方式\N{\fs12}to look like, there's a really cool way.
Dialogue: 0,1:07:53.40,1:07:55.62,yin,,0,0,0,,我们这里分两步走\N{\fs12}Well let's, okay, let's do this two part here.
Dialogue: 0,1:07:55.62,1:07:57.00,yin,,0,0,0,,我打算运行这个\N{\fs12}I'm going to run this.
Dialogue: 0,1:07:57.00,1:07:58.12,yin,,0,0,0,,它在这里\N{\fs12}Here it is right here.
Dialogue: 0,1:07:58.12,1:08:02.44,yin,,0,0,0,,你可以在Xcode中模拟后台取回\N{\fs12}You can actually simulate fetching in the background in X code.
Dialogue: 0,1:08:02.44,1:08:03.98,yin,,0,0,0,,回到Xcode\N{\fs12}So, I'm going back to X code.
Dialogue: 0,1:08:03.98,1:08:05.46,yin,,0,0,0,,这是我的UI\N{\fs12}Here's my UI.
Dialogue: 0,1:08:05.48,1:08:08.99,yin,,0,0,0,,从Xcode中 在调试下 我要说\N{\fs12}Okay, I'm going to say, from X code, under debug,
Dialogue: 0,1:08:08.99,1:08:12.22,yin,,0,0,0,,模拟后台取回 看我的UI会发生什么\N{\fs12}simulate background fetch, and watch what's going to happen to my UI,
Dialogue: 0,1:08:12.23,1:08:14.51,yin,,0,0,0,,我被丢到了后台\N{\fs12}oop, I got put in the background.
Dialogue: 0,1:08:14.51,1:08:16.28,yin,,0,0,0,,它在进行取回\N{\fs12}Okay. And it's doing a fetch.
Dialogue: 0,1:08:16.28,1:08:20.12,yin,,0,0,0,,它到Flickr进行着那些下载\N{\fs12}It's going in Flickr. It's downloading to Flickr and doing all that stuff,
Dialogue: 0,1:08:20.12,1:08:22.26,yin,,0,0,0,,实际上 完成后到这里\N{\fs12}and actually if I went like this when it was done,
Dialogue: 0,1:08:22.26,1:08:24.72,yin,,0,0,0,,我可以看到结果\N{\fs12}I would see the results in here.
Dialogue: 0,1:08:24.72,1:08:27.08,yin,,0,0,0,,这个你们有些难于看到\N{\fs12}Okay, now that's hard for you to see here,
Dialogue: 0,1:08:27.08,1:08:30.81,yin,,0,0,0,,因此 我还打算展示另一个模拟后台取回的方式\N{\fs12}so I'm going to show you another way to simulate a background fetch besides this,
Dialogue: 0,1:08:30.81,1:08:33.88,yin,,0,0,0,,我们删除了Photomania 这样表格就空了\N{\fs12}so let's delete photo mania so that our tables are empty.
Dialogue: 0,1:08:33.88,1:08:36.30,yin,,0,0,0,,你们可以在这里很清楚地看到\N{\fs12}You'll really be able to see it clearly here, oops,
Dialogue: 0,1:08:36.30,1:08:39.27,yin,,0,0,0,,我应该先退出Xcode\N{\fs12}I should have quit X code first.
Dialogue: 0,1:08:39.27,1:08:40.68,yin,,0,0,0,,这里我来退出\N{\fs12}Put that in the step.
Dialogue: 0,1:08:41.72,1:08:45.07,yin,,0,0,0,,我下面要做的是这样 有一种方式\N{\fs12}And, so what I'm going to do here is there's a way
Dialogue: 0,1:08:45.07,1:08:47.31,yin,,0,0,0,,来启动你的应用\N{\fs12}to launch your application
Dialogue: 0,1:08:47.31,1:08:51.09,yin,,0,0,0,,就像它刚从后台取回中得到启动\N{\fs12}as if it just got launched from a background fetch,
Dialogue: 0,1:08:51.09,1:08:54.71,yin,,0,0,0,,做法是编辑scheme\N{\fs12}and the way to do that is edit scheme.
Dialogue: 0,1:08:54.71,1:08:58.23,yin,,0,0,0,,编辑scheme scheme也就是它如何启动你\N{\fs12}If you edit this little scheme, the scheme is how it's launching you.
Dialogue: 0,1:08:58.23,1:09:00.44,yin,,0,0,0,,这里它是在模拟器中启动我们\N{\fs12}In this case, it's launching us in a simulator.
Dialogue: 0,1:09:00.44,1:09:04.65,yin,,0,0,0,,编辑scheme 到选项 这里有个小选框\N{\fs12}So, if you edit scheme, and you go over to options, there's this little switch here,
Dialogue: 0,1:09:04.65,1:09:06.94,yin,,0,0,0,,由于后台取回的启动\N{\fs12}launch due to a background fetch.
Dialogue: 0,1:09:06.94,1:09:10.14,yin,,0,0,0,,换言之 我点击运行时 假装我刚启动\N{\fs12}In other words, when I hit run, pretend I just got launched,
Dialogue: 0,1:09:10.14,1:09:14.23,yin,,0,0,0,,因为一个后台取回被发送给我 这就是这个\N{\fs12}because a background fetch got sent to me, okay, so that's what that means.
Dialogue: 0,1:09:14.23,1:09:17.85,yin,,0,0,0,,通常 我们不会那样设置\N{\fs12}Now, normally, we're not going to set that switch and leave it set like that.
Dialogue: 0,1:09:17.85,1:09:21.46,yin,,0,0,0,,你可以复制这个scheme 这里我来复制一下\N{\fs12}You can actually duplicate this scheme, so I have the schema; I'm going to duplicate it.
Dialogue: 0,1:09:21.46,1:09:23.79,yin,,0,0,0,,称它为我的BFF scheme\N{\fs12}I'm going to call it my BFF scheme.
Dialogue: 0,1:09:23.79,1:09:27.66,yin,,0,0,0,,意思是后台Flickr取回器\N{\fs12}That means background Flickr fetcher.
Dialogue: 0,1:09:27.66,1:09:34.75,yin,,0,0,0,,我的BFF scheme中 我将勾选这个\N{\fs12}It's my BFF scheme, and in my BFF scheme, I'm going to have that switch set, okay.
Dialogue: 0,1:09:34.75,1:09:38.66,yin,,0,0,0,,在其它scheme 例如回到这个scheme 编辑它\N{\fs12}In my other scheme, if I go back to this scheme and edit it,
Dialogue: 0,1:09:38.66,1:09:41.20,yin,,0,0,0,,这个就没有勾选\N{\fs12}that switch is not set, okay.
Dialogue: 0,1:09:41.20,1:09:44.32,yin,,0,0,0,,要假装这个正在发生\N{\fs12}So, if I want to pretend that's happening,
Dialogue: 0,1:09:44.32,1:09:48.36,yin,,0,0,0,,我到BFF scheme 点运行\N{\fs12}I go to my BFF scheme, and I press run.
Dialogue: 0,1:09:48.36,1:09:51.91,yin,,0,0,0,,运行时 可以看到 我是在后台运行\N{\fs12}Now, when I run, see it ran me in the background.
Dialogue: 0,1:09:51.91,1:09:55.23,yin,,0,0,0,,另外还有一点我想展示给大家\N{\fs12}So, the other two things -- the other thing I really wanted
Dialogue: 0,1:09:55.23,1:09:57.57,yin,,0,0,0,,只是时间有点不够了\N{\fs12}to show you here, which I don't really have time to do.
Dialogue: 0,1:09:57.57,1:09:59.24,yin,,0,0,0,,我快点展示吧 也就是\N{\fs12}Oh, actually I'll do it real quick is,
Dialogue: 0,1:09:59.24,1:10:02.23,yin,,0,0,0,,我如果是前台app 取回是怎样的\N{\fs12}how about fetching when I'm the foreground app.
Dialogue: 0,1:10:02.23,1:10:06.77,yin,,0,0,0,,如果用户正在用我 我想周期性取回\N{\fs12}What happens if the user is currently using me, and I want to fetch periodically.
Dialogue: 0,1:10:06.77,1:10:08.57,yin,,0,0,0,,这是完全不同的内容\N{\fs12}Okay, that's a totally different thing.
Dialogue: 0,1:10:08.57,1:10:11.78,yin,,0,0,0,,要做到这个 我们需要一个类 叫NSTimer\N{\fs12}To do that, we're going to use a class called NS timer.
Dialogue: 0,1:10:11.78,1:10:13.57,yin,,0,0,0,,我要写到这里\N{\fs12}Okay, so I'm going to put this here.
Dialogue: 0,1:10:13.57,1:10:16.39,yin,,0,0,0,,一旦数据库context可用\N{\fs12}Once the database context is available, then I'm going
Dialogue: 0,1:10:16.39,1:10:20.07,yin,,0,0,0,,我就要开启一个Timer 使用NSTimer方法\N{\fs12}to fire off a timer using this NS timer method,
Dialogue: 0,1:10:20.07,1:10:21.80,yin,,0,0,0,,scheduleTimerWithTimeInterval\N{\fs12}schedule timer with time interval.
Dialogue: 0,1:10:21.80,1:10:23.20,yin,,0,0,0,,我要做这个\N{\fs12}I want to do this one.
Dialogue: 0,1:10:23.20,1:10:26.10,yin,,0,0,0,,Flickr取回要多频繁呢\N{\fs12}How often should we do our Flickr fetch?
Dialogue: 0,1:10:26.10,1:10:30.16,yin,,0,0,0,,Flickr大概每十到十五分钟才会更新一次\N{\fs12}Well, it doesn't seem like Flickr updates it more than once every 10 or 15 minutes,
Dialogue: 0,1:10:30.16,1:10:33.24,yin,,0,0,0,,我们这里就每二十分钟取回一次吧\N{\fs12}so let's do it every 20 minutes.
Dialogue: 0,1:10:33.24,1:10:34.83,yin,,0,0,0,,这是以秒计的\N{\fs12}So, this is in seconds.
Dialogue: 0,1:10:34.83,1:10:38.49,yin,,0,0,0,,我们用二十分钟 目标是我的self\N{\fs12}So, I'll do 20 minutes, and the target is going to be myself.
Dialogue: 0,1:10:38.49,1:10:41.25,yin,,0,0,0,,换言之 每隔二十分钟 发给我一个方法\N{\fs12}In other words, every 20 minutes, send me a method,
Dialogue: 0,1:10:41.25,1:10:49.63,yin,,0,0,0,,而发送给我的方法是 startFlickrFetch 还有参数\N{\fs12}and the method to send me is start Flickr fetch, and the argument.
Dialogue: 0,1:10:49.63,1:10:51.63,yin,,0,0,0,,没有用户信息\N{\fs12}And, no user info.
Dialogue: 0,1:10:51.63,1:10:55.56,yin,,0,0,0,,抱歉 这里应该是个冒号\N{\fs12}Sorry, this has to be a colon.
Dialogue: 0,1:10:55.56,1:10:57.59,yin,,0,0,0,,等下我就会解释为什么\N{\fs12}I'll show you why in a second.
Dialogue: 0,1:10:57.59,1:10:59.63,yin,,0,0,0,,然后重复\N{\fs12}And repeat, yes,
Dialogue: 0,1:10:59.63,1:11:04.05,yin,,0,0,0,,我希望这个是每二十分钟 发送这个Timer\N{\fs12}so I want this to just be every 20 minutes at sending this timer.
Dialogue: 0,1:11:04.05,1:11:09.41,yin,,0,0,0,,这个startFlickrFetch为什么需要有一个冒号呢\N{\fs12}Okay. So, why is this start Flickr fetch here have to have colon?
Dialogue: 0,1:11:09.41,1:11:12.07,yin,,0,0,0,,这是因为这个Timer在发送它的消息时\N{\fs12}That's because this timer when it sends its message,
Dialogue: 0,1:11:12.07,1:11:16.76,yin,,0,0,0,,总有一个参数 如果我说startFlickrFetch\N{\fs12}it always has an argument, and if I do start Flickr fetch
Dialogue: 0,1:11:16.76,1:11:21.33,yin,,0,0,0,,带有那个参数 发送给你的是NSTimer\N{\fs12}with the argument, it's the NS timer that sent it to you.
Dialogue: 0,1:11:21.33,1:11:23.89,yin,,0,0,0,,不过这里 我不关心\N{\fs12}But, in this case, I don't care.
Dialogue: 0,1:11:23.89,1:11:25.92,yin,,0,0,0,,我只要startFlickrFetch\N{\fs12}I'm just going to start Flickr fetch.
Dialogue: 0,1:11:25.92,1:11:29.86,yin,,0,0,0,,每二十分钟 我都会发送这个Flickr取回\N{\fs12}So, every 20 minutes, I'm going to fire off this Flickr fetch.
Dialogue: 0,1:11:29.86,1:11:31.78,yin,,0,0,0,,这很简单\N{\fs12}Okay, so that's easy.
Dialogue: 0,1:11:31.78,1:11:33.17,yin,,0,0,0,,这时你在前台\N{\fs12}So, if you're in the foreground,
Dialogue: 0,1:11:33.17,1:11:36.07,yin,,0,0,0,,在后台时 这个Timer不会发送\N{\fs12}now this timer will not fire when you're in the background.
Dialogue: 0,1:11:36.07,1:11:38.37,yin,,0,0,0,,它不会发送 不过这没问题\N{\fs12}It just will not fire, but that's okay, because we have
Dialogue: 0,1:11:38.37,1:11:42.32,yin,,0,0,0,,因为有后台取回那些在发送 不这么频繁 不过偶尔会\N{\fs12}that background fetching thing firing it, not as often, but occasionally.
Dialogue: 0,1:11:42.32,1:11:47.15,yin,,0,0,0,,而现在 我们的app会一直获取新Flickr\N{\fs12}Okay, but now all the time, our app is getting new Flickr information all the time.
Dialogue: 0,1:11:48.34,1:11:49.32,yin,,0,0,0,,理解吗\N{\fs12}Make sense?
Dialogue: 0,1:11:50.75,1:11:53.40,yin,,0,0,0,,好 这就是我要演示的全部\N{\fs12}Okay, so that's all I wanted to show you. Hopefully.
Dialogue: 0,1:11:53.40,1:11:55.22,yin,,0,0,0,,这里有很多信息\N{\fs12}There's a lot of information there I know.
Dialogue: 0,1:11:55.22,1:11:56.08,yin,,0,0,0,,包括后台取回\N{\fs12}We have background fetching.
Dialogue: 0,1:11:56.08,1:11:56.94,yin,,0,0,0,,前台取回\N{\fs12}We have foreground fetching.
Dialogue: 0,1:11:56.94,1:11:58.98,yin,,0,0,0,,创建数据库模型\N{\fs12}You've got creating the database model.
Dialogue: 0,1:11:58.98,1:12:01.59,yin,,0,0,0,,使用category来创建添加\N{\fs12}You got doing the categories to create the adding things.
Dialogue: 0,1:12:01.59,1:12:04.01,yin,,0,0,0,,有TableView 带NSFetchResultsController\N{\fs12}We got the TableView with NS Fetch Results Controller.
Dialogue: 0,1:12:04.01,1:12:05.52,yin,,0,0,0,,所有代码我都会贴出\N{\fs12}I'm going to post all this code.
Dialogue: 0,1:12:05.52,1:12:07.20,yin,,0,0,0,,今晚我会加一些评论\N{\fs12}I'll throw some comments in there tonight,
Dialogue: 0,1:12:07.20,1:12:13.13,yin,,0,0,0,,让你们记得所有这些东西 方便你们掌握\N{\fs12}so you can remember what all these things do, and you'll be good to go.
Dialogue: 0,1:12:14.26,1:12:18.63,yin,,0,0,0,,作业好运 我们周一见\N{\fs12}Good luck with your homework, and I'll see you on Monday.
Dialogue: 0,1:12:18.63,1:12:22.37,yin,,0,0,0,,更多内容 请访问我校官网stanford.edu\N{\fs12}> For more, please visit us at Stanford.edu.
